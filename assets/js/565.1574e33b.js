(window.webpackJsonp=window.webpackJsonp||[]).push([[565],{877:function(s,t,a){"use strict";a.r(t);var e=a(12),r=function(s){s.options.__data__block__={markmap_1a962853:"- [第 14 章 预处理器](#第-14-章-预处理器)\n  - [14.1 预定义符号](#141-预定义符号)\n  - [14.2 `#define`](#142-define)\n    - [14.2.1 宏](#1421-宏)\n    - [14.2.2 `#define` 替换](#1422-define-替换)\n    - [14.2.3 宏与函数](#1423-宏与函数)\n    - [14.2.4 带副作用的宏参数](#1424-带副作用的宏参数)\n    - [14.2.5 命名约定](#1425-命名约定)\n    - [14.2.6 `#undef`](#1426-undef)\n    - [14.2.7 命令行定义](#1427-命令行定义)\n  - [14.3 条件编译](#143-条件编译)\n    - [14.3.1 是否被定义](#1431-是否被定义)\n    - [14.3.2 嵌套指令](#1432-嵌套指令)\n  - [14.4 文件包含](#144-文件包含)\n    - [14.4.1 函数库文件包含](#1441-函数库文件包含)\n    - [14.4.2 本地文件包含](#1442-本地文件包含)\n    - [14.4.3 嵌套文件包含](#1443-嵌套文件包含)\n  - [14.5 其他指令](#145-其他指令)\n  - [14.6 总结](#146-总结)\n  - [14.9 问题](#149-问题)\n  - [14.10 编程练习](#1410-编程练习)"}},n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"第-14-章-预处理器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第-14-章-预处理器"}},[s._v("#")]),s._v(" 第 14 章 预处理器")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("书本内容")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/14-0-2021-09-16-07-14-36.png",alt:"14-0-2021-09-16-07-14-36"}})])]),s._v(" "),a("Markmap",{attrs:{id:"markmap_1a962853",code:s.$dataBlock.markmap_1a962853}}),a("h2",{attrs:{id:"141-预定义符号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#141-预定义符号"}},[s._v("#")]),s._v(" 14.1 预定义符号")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("书本内容")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/14-1-2021-09-16-07-16-24.png",alt:"14-1-2021-09-16-07-16-24"}})])]),s._v(" "),a("h2",{attrs:{id:"142-define"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#142-define"}},[s._v("#")]),s._v(" 14.2 "),a("code",[s._v("#define")])]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("书本内容")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/14-2-2021-09-16-07-17-28.png",alt:"14-2-2021-09-16-07-17-28"}})])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("ul",[a("li",[s._v("相邻的字符串常量被自动的连接为一个字符串\n"),a("ul",[a("li",[s._v("利用这一特性可以在字符串常量中间进行换行")]),s._v(" "),a("li",[s._v("也可以将宏插入到字符串常量中")])])])])]),s._v(" "),a("h3",{attrs:{id:"1421-宏"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#1421-宏"}},[s._v("#")]),s._v(" 14.2.1 宏")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("书本内容")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/14-2-1-2021-09-16-07-17-56.png",alt:"14-2-1-2021-09-16-07-17-56"}})])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("ul",[a("li",[s._v("宏是 "),a("code",[s._v("#define")]),s._v(" 机制中允许把参数替换到文本中的功能\n"),a("ul",[a("li",[s._v("此时的参数被称宏参数")])])])])]),s._v(" "),a("h3",{attrs:{id:"1422-define-替换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#1422-define-替换"}},[s._v("#")]),s._v(" 14.2.2 "),a("code",[s._v("#define")]),s._v(" 替换")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("书本内容")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/14-2-2-2021-09-16-07-18-31.png",alt:"14-2-2-2021-09-16-07-18-31"}})])]),s._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[s._v("笔记")]),s._v(" "),a("ul",[a("li",[s._v("宏参数和 "),a("code",[s._v("#define")]),s._v(" 定义可以包含其他 "),a("code",[s._v("#define")]),s._v(" 定义的符号\n"),a("ul",[a("li",[s._v("但是宏不能出现递归，即宏不能包含其本身")])])]),s._v(" "),a("li",[s._v("预处理器搜索 "),a("code",[s._v("#define")]),s._v(" 定义的符号时，不会搜索字符串常量\n"),a("ul",[a("li",[s._v("此时可以利用相邻的字符串常量被自动的连接为一个字符串的特性将宏插入到字符串常量中")])])]),s._v(" "),a("li",[a("code",[s._v("#宏参数")]),s._v("，会将宏参数翻译为字符串")]),s._v(" "),a("li",[a("code",[s._v("##")]),s._v(" 结构允许从分离的文本创建标识符，但其所创建的标识符必须是合法的")])])]),s._v(" "),a("h3",{attrs:{id:"1423-宏与函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#1423-宏与函数"}},[s._v("#")]),s._v(" 14.2.3 宏与函数")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("书本内容")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/14-2-3-2021-09-16-07-19-10.png",alt:"14-2-3-2021-09-16-07-19-10"}})])]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("宏定义不要以 "),a("code",[s._v(";")]),s._v(" 结尾")])]),s._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[s._v("笔记")]),s._v(" "),a("ul",[a("li",[s._v("宏参数是没有类型的，而且能够传递一些函数无法传递的参数，比如数据类型 "),a("code",[s._v("int")])]),s._v(" "),a("li",[s._v("但是使用宏可能大幅增加程序的长度")])])]),s._v(" "),a("h3",{attrs:{id:"1424-带副作用的宏参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#1424-带副作用的宏参数"}},[s._v("#")]),s._v(" 14.2.4 带副作用的宏参数")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("书本内容")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/14-2-4-2021-09-16-07-19-48.png",alt:"14-2-4-2021-09-16-07-19-48"}})])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("ul",[a("li",[s._v("使用带有副作用的表达式作为宏参数时，要谨慎\n"),a("ul",[a("li",[s._v("因为宏参数可能会被使用多次")]),s._v(" "),a("li",[s._v("这点与函数调用存在着极大的区别")])])])])]),s._v(" "),a("h3",{attrs:{id:"1425-命名约定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#1425-命名约定"}},[s._v("#")]),s._v(" 14.2.5 命名约定")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("书本内容")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/14-2-5-2021-09-16-07-21-59.png",alt:"14-2-5-2021-09-16-07-21-59"}})])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("注意宏和函数的对比")])]),s._v(" "),a("h3",{attrs:{id:"1426-undef"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#1426-undef"}},[s._v("#")]),s._v(" 14.2.6 "),a("code",[s._v("#undef")])]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("书本内容")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/14-2-6-2021-09-16-07-23-53.png",alt:"14-2-6-2021-09-16-07-23-53"}})])]),s._v(" "),a("h3",{attrs:{id:"1427-命令行定义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#1427-命令行定义"}},[s._v("#")]),s._v(" 14.2.7 命令行定义")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("书本内容")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/14-2-7-2021-09-16-07-24-05.png",alt:"14-2-7-2021-09-16-07-24-05"}})])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("编译时，可以在命令行中定义宏参数或者取消定义的宏参数")])]),s._v(" "),a("h2",{attrs:{id:"143-条件编译"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#143-条件编译"}},[s._v("#")]),s._v(" 14.3 条件编译")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("书本内容")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/14-3-2021-09-16-07-25-26.png",alt:"14-3-2021-09-16-07-25-26"}})])]),s._v(" "),a("h3",{attrs:{id:"1431-是否被定义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#1431-是否被定义"}},[s._v("#")]),s._v(" 14.3.1 是否被定义")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("书本内容")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/14-3-1-2021-09-16-07-26-14.png",alt:"14-3-1-2021-09-16-07-26-14"}})])]),s._v(" "),a("h3",{attrs:{id:"1432-嵌套指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#1432-嵌套指令"}},[s._v("#")]),s._v(" 14.3.2 嵌套指令")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("书本内容")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/14-3-2-2021-09-16-07-27-06.png",alt:"14-3-2-2021-09-16-07-27-06"}})])]),s._v(" "),a("h2",{attrs:{id:"144-文件包含"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#144-文件包含"}},[s._v("#")]),s._v(" 14.4 文件包含")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("书本内容")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/14-4-2021-09-16-07-27-34.png",alt:"14-4-2021-09-16-07-27-34"}})])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[a("code",[s._v("#include")]),s._v(" 指令")])]),s._v(" "),a("h3",{attrs:{id:"1441-函数库文件包含"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#1441-函数库文件包含"}},[s._v("#")]),s._v(" 14.4.1 函数库文件包含")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("书本内容")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/14-4-1-2021-09-16-07-28-49.png",alt:"14-4-1-2021-09-16-07-28-49"}})])]),s._v(" "),a("h3",{attrs:{id:"1442-本地文件包含"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#1442-本地文件包含"}},[s._v("#")]),s._v(" 14.4.2 本地文件包含")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("书本内容")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/14-4-2-2021-09-16-07-29-48.png",alt:"14-4-2-2021-09-16-07-29-48"}})])]),s._v(" "),a("h3",{attrs:{id:"1443-嵌套文件包含"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#1443-嵌套文件包含"}},[s._v("#")]),s._v(" 14.4.3 嵌套文件包含")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("书本内容")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/14-4-3-2021-09-16-07-31-14.png",alt:"14-4-3-2021-09-16-07-31-14"}})])]),s._v(" "),a("h2",{attrs:{id:"145-其他指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#145-其他指令"}},[s._v("#")]),s._v(" 14.5 其他指令")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("书本内容")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/14-5-2021-09-16-07-32-10.png",alt:"14-5-2021-09-16-07-32-10"}})])]),s._v(" "),a("h2",{attrs:{id:"146-总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#146-总结"}},[s._v("#")]),s._v(" 14.6 总结")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("书本内容")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/14-6-2021-09-16-07-32-44.png",alt:"14-6-2021-09-16-07-32-44"}})])]),s._v(" "),a("h2",{attrs:{id:"149-问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#149-问题"}},[s._v("#")]),s._v(" 14.9 问题")]),s._v(" "),a("br"),s._v(" "),a("h6",{staticClass:"anchor-user-defined",attrs:{id:"q1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q1"}},[s._v("#")])]),s._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[s._v("问题 1")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("答案")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("__FILE__")]),s._v(" 和 "),a("code",[s._v("__LINE__")]),s._v(" 可以用来打印错误信息，在调试中很有用\n"),a("ul",[a("li",[a("code",[s._v("assert")]),s._v(" 宏即使用它们来实现自己的功能")])])]),s._v(" "),a("li",[a("code",[s._v("__DATE__")]),s._v(" 和 "),a("code",[s._v("__TIME__")]),s._v(" 可以把版本信息编译到程序中")]),s._v(" "),a("li",[a("code",[s._v("__STDC__")]),s._v(" 可以用于条件编译中，从而根据编译器是否为 ANSI C 来选择不同的代码结构进行编译")])])])]),s._v(" "),a("h6",{staticClass:"anchor-user-defined",attrs:{id:"q2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q2"}},[s._v("#")])]),s._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[s._v("问题 2")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("答案")]),s._v(" "),a("ul",[a("li",[s._v("可读性好")]),s._v(" "),a("li",[s._v("更易于修改")])])])]),s._v(" "),a("h6",{staticClass:"anchor-user-defined",attrs:{id:"q3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q3"}},[s._v("#")])]),s._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[s._v("问题 3")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("答案")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("代码")]),s._v(" "),a("div",{staticClass:"language-c line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token macro-name function"}},[s._v("DEBUG_PRINT")]),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" expr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("printf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")])]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"File %s, line %d: %s = "')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token expression"}},[s._v("fmt ")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\\n"')]),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n              "),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("__FILE__")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("__LINE__")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" #expr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" expr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")])])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])])])]),s._v(" "),a("h6",{staticClass:"anchor-user-defined",attrs:{id:"q4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q4"}},[s._v("#")])]),s._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[s._v("问题 4")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("点击查看")]),s._v(" "),a("ul",[a("li",[s._v("3, 2, 3")]),s._v(" "),a("li",[s._v("5, 3, 5")]),s._v(" "),a("li",[s._v("2, 4, 20")]),s._v(" "),a("li",[s._v("2, 4, 12")])])])]),s._v(" "),a("h6",{staticClass:"anchor-user-defined",attrs:{id:"q5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q5"}},[s._v("#")])]),s._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[s._v("问题 5")]),s._v(" "),a("ul",[a("li",[s._v("因为 "),a("code",[s._v("putchar")]),s._v(" 使用的很频繁，将其作为宏实现，可以降低函数调用的开销")])])]),s._v(" "),a("h6",{staticClass:"anchor-user-defined",attrs:{id:"q6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q6"}},[s._v("#")])]),s._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[s._v("问题 6")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("答案")]),s._v(" "),a("ul",[a("li",[s._v("无法根据给出的代码进行判断\n"),a("ul",[a("li",[s._v("如果 "),a("code",[s._v("process")]),s._v(" 是宏定义的，则增加下标值的副作用可能导致错误的结果")])])])])])]),s._v(" "),a("h6",{staticClass:"anchor-user-defined",attrs:{id:"q7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q7"}},[s._v("#")])]),s._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[s._v("问题 7")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("答案")]),s._v(" "),a("ul",[a("li",[s._v("如果 "),a("code",[s._v("SIZE")]),s._v(" 是奇数值，则由于每次循环在宏定义中均访问两个值，最后一次访问会因为数组越界而出错")])])])]),s._v(" "),a("h6",{staticClass:"anchor-user-defined",attrs:{id:"q8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q8"}},[s._v("#")])]),s._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[s._v("问题 8")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("答案")]),s._v(" "),a("ul",[a("li",[s._v("没有错误")]),s._v(" "),a("li",[s._v("虽然这两个文件各自包含另外一个文件，但是由于条件编译的存在，不会出现编译器交替读取它们，直到达到其包含嵌套限制的情况。")])])])]),s._v(" "),a("h6",{staticClass:"anchor-user-defined",attrs:{id:"q9"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q9"}},[s._v("#")])]),s._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[s._v("问题 9")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("答案")]),s._v(" "),a("ul",[a("li",[s._v("条件编译要求条件是一个常量表达式，因此使用 "),a("code",[s._v("sizeof")]),s._v(" 会出错")]),s._v(" "),a("li",[s._v("可以使用 "),a("code",[s._v("limits.h")]),s._v(" 中定义的相关变量来达到相同的功能")])])])]),s._v(" "),a("h2",{attrs:{id:"1410-编程练习"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#1410-编程练习"}},[s._v("#")]),s._v(" 14.10 编程练习")]),s._v(" "),a("br"),s._v(" "),a("h6",{staticClass:"anchor-user-defined",attrs:{id:"p1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#p1"}},[s._v("#")])]),s._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[s._v("编程练习 1")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("答案")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("定义一个名为 "),a("code",[s._v("OK")]),s._v(" 的宏，来判断是否需要调用默认的函数")])]),s._v(" "),a("li",[a("p",[s._v("代码")]),s._v(" "),a("div",{staticClass:"language-c line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("print_ledger")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("ifdef")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token expression"}},[s._v("OPTION_LONG")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token macro-name"}},[s._v("OK")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("print_ledger_long")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("endif")])]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("ifdef")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token expression"}},[s._v("OPTION_DETAILED")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token macro-name"}},[s._v("OK")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("print_ledger_detailed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("endif")])]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("ifndef")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token expression"}},[s._v("OK")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("print_ledger_default")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("endif")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])])])])])]),s._v(" "),a("h6",{staticClass:"anchor-user-defined",attrs:{id:"p2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#p2"}},[s._v("#")])]),s._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[s._v("编程练习 2")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("答案")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("使用 "),a("code",[s._v("#if defined()")]),s._v(" 来替代 "),a("code",[s._v("#ifdef")]),s._v("，因为前者可以和 "),a("code",[s._v("#elif")]),s._v(" 结合使用，功能更强")])]),s._v(" "),a("li",[a("p",[s._v("代码")]),s._v(" "),a("div",{staticClass:"language-c line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cpu_types.h"')])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cpu_type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("defined")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" VAX "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")])])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" CPU_VAX"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("elif")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("defined")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("M68000"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")])])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" CPU_68000"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("elif")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("defined")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" M68020 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")])])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" CPU_68020"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("elif")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("defined")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" I80386 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")])])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" CPU_80386"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("elif")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("defined")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" X6809 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")])])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" CPU_6809"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("elif")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("defined")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" X6502 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")])])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" CPU_6502"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("elif")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("defined")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" U3B2 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")])])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" CPU_3B2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("else")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" CPU_UNKNOWN"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("endif")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])])])])])])],1)}),[],!1,null,null,null);"function"==typeof r&&r(n);t.default=n.exports}}]);