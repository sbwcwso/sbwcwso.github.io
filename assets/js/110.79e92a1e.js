(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{908:function(s,n,a){"use strict";a.r(n);var t=a(12),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"architecture-lab"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#architecture-lab"}},[s._v("#")]),s._v(" Architecture lab")]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("每个 Linux 命令块开始时的文件夹默认为 "),a("code",[s._v("sim")])])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"http://csapp.cs.cmu.edu/3e/archlab32.pdf",target:"_blank",rel:"noopener noreferrer"}},[s._v("通关攻略"),a("OutboundLink")],1)])]),s._v(" "),a("li",[a("p",[s._v("图形化的模拟运行过程")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成相应的 yo 文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ./y86-code\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" asum.yo\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 无流水线仿真")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/seq\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" clean "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n./ssim -g "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/y86-code/asum.yo\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 带流水线仿真")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/pipe\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" clean "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n./psim -g "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/y86-code/asum.yo\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])])])])]),s._v(" "),a("h2",{attrs:{id:"实验环境准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实验环境准备"}},[s._v("#")]),s._v(" 实验环境准备")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("实验环境配置")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("需要安装 Tcl/tk 这两个软件：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" tcl tk\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("p",[a("code",[s._v("manjaro")]),s._v(" 使用如下命令")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" pacman -S tcl tk  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("因为 Makefile 里写的 tcl 的版本较低，需要修改一下 Makefile：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s/tcl8.5/tcl8.6/g"')]),s._v(" Makefile\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s/CFLAGS=/CFLAGS=-DUSE_INTERP_RESULT /g"')]),s._v(" Makefile\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("需要注意 "),a("code",[s._v("seq")]),s._v(" 和 "),a("code",[s._v("pipe")]),s._v(" 两个文件夹下的 Makefile 也需要修改")])])])])]),s._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://stackoverflow.com/a/53148702",target:"_blank",rel:"noopener noreferrer"}},[s._v("编译错误的解决方案"),a("OutboundLink")],1)]),s._v(" "),a("ul",[a("li",[a("p",[s._v("由于相关软件更新，在 "),a("code",[s._v("ssim.c")]),s._v(" 和 "),a("code",[s._v("psim.c")]),s._v(" 中需要注释掉以下两条语句")]),s._v(" "),a("div",{staticClass:"language-c line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extern")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("matherr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("tclDummyMathPtr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" matherr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])])]),s._v(" "),a("li",[a("p",[s._v("较新版本 gcc 下 Makefile 中 gcc 命令需要添加 "),a("code",[s._v("-fcommon")]),s._v(" 参数")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://stackoverflow.com/a/65294080/11152760",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考"),a("OutboundLink")],1)])])])])]),s._v(" "),a("h2",{attrs:{id:"part-a"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#part-a"}},[s._v("#")]),s._v(" Part A")]),s._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[s._v("根据 Y86 的相关指令进行编写即可")]),s._v(" "),a("ul",[a("li",[a("details",{staticClass:"custom-block details"},[a("summary",[s._v("sum.ys")]),s._v(" "),a("div",{staticClass:"language-ys line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# Execution begins at address 0 \n  .pos 0\n  irmovq stack, %rsp    # Set up stack pointer\n  irmovq ele1,%rdi\n  call sum_list    # sum_list(ele1)\n  halt      # Terminate program \n\n.align 8\nele1:\n  .quad 0x00a\n  .quad ele2\nele2:\n  .quad 0x0b0\n  .quad ele3\nele3:\n  .quad 0xc00\n  .quad 0\n\n# long sum_list(list_ptr ls)\n# ls in %rdi\nsum_list:\n  xorq %rax, %rax  # val = 0\n  andq %rdi, %rdi  # set CC\n  je done\nloop:\n  mrmovq (%rdi), %rsi  # get ls->val\n  addq %rsi, %rax  # val += ls->val\n  mrmovq 0x8(%rdi), %rdi  # ls = ls-next;\n  andq %rdi, %rdi  # set CC\n  jne loop\ndone:\n  ret\n\n# Stack starts here and grows to lower addresses\n  .pos 0x200\nstack:\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br")])])])]),s._v(" "),a("li",[a("details",{staticClass:"custom-block details"},[a("summary",[s._v("rsum.ys")]),s._v(" "),a("div",{staticClass:"language-ys line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# Execution begins at address 0 \n  .pos 0\n  irmovq stack, %rsp    # Set up stack pointer\n  irmovq ele1,%rdi\n  call rsum_list    # sum_list(ele1)\n  halt      # Terminate program \n\n.align 8\nele1:\n  .quad 0x00a\n  .quad ele2\nele2:\n  .quad 0x0b0\n  .quad ele3\nele3:\n  .quad 0xc00\n  .quad 0\n\n# long rsum_list(list_ptr ls)\n# ls in %rdi\nrsum_list:\n  xorq %rax, %rax  # val = 0\n  andq %rdi, %rdi  # set CC\n  je done\n  mrmovq (%rdi), %rsi  # get ls->val\n  pushq %rsi\n  mrmovq 0x8(%rdi), %rdi  # ls = ls-next;\n  call rsum_list\n  popq %rsi\n  addq %rsi, %rax  # val += ls->val\ndone:\n  ret\n\n# Stack starts here and grows to lower addresses\n  .pos 0x200\nstack:\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br")])])])]),s._v(" "),a("li",[a("details",{staticClass:"custom-block details"},[a("summary",[s._v("copy.ys")]),s._v(" "),a("div",{staticClass:"language-ys line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# Execution begins at address 0 \n  .pos 0\n  irmovq stack, %rsp    # Set up stack pointer\n  irmovq src, %rdi\n  irmovq dest, %rsi\n  irmovq $3, %rdx\n  call copy_block    # copy_block(src, dest, len)\n  halt      # Terminate program \n\n.align 8\n# Source block\nsrc:\n  .quad 0x00a\n  .quad 0x0b0\n  .quad 0xc00\n\n# Destination block\ndest:\n  .quad 0x111\n  .quad 0x222\n  .quad 0x333\n\n\n\n# long copy_block(src, dest, len)\n# src in %rdi, dest in %rsi, len in %rdx\ncopy_block:\n  andq %rdx, %rdx  # set CC\n  jle done\n  xorq %rax, %rax  # val = 0\n  irmovq $8, %r8\n  irmovq $1, %r9\nloop:\n  mrmovq (%rdi), %r10  # val = *src\n  rmmovq %r10, (%rsi)\n  xorq %r10, %rax\n  addq %r8, %rdi  # src++\n  addq %r8, %rsi  # dest++\n  subq %r9, %rdx  # len-- and set CC\n  jne loop\ndone:\n  ret\n\n# Stack starts here and grows to lower addresses\n  .pos 0x200\nstack:\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br")])])])])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("运行下述命令检查代码正确性")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" misc\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" clean "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n./yas sum.ys "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" ./yis sum.yo\n./yas rsum.ys "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" ./yis rsum.yo\n./yas copy.ys "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" ./yis copy.yo\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"part-b"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#part-b"}},[s._v("#")]),s._v(" Part B")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("参考")]),s._v(" "),a("ul",[a("li",[a("details",{staticClass:"custom-block details"},[a("summary",[s._v("练习 4.51 4.52 及 4.3")]),s._v(" "),a("ul",[a("li",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20220204175812-2022-02-04-17-58-12.png",alt:"20220204175812-2022-02-04-17-58-12"}})]),s._v(" "),a("li",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20220204175741-2022-02-04-17-57-41.png",alt:"20220204175741-2022-02-04-17-57-41"}})])])])]),s._v(" "),a("li",[a("details",{staticClass:"custom-block details"},[a("summary",[s._v("图 4.18")]),s._v(" "),a("ul",[a("li",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20220204175316-2022-02-04-17-53-16.png",alt:"20220204175316-2022-02-04-17-53-16"}})])])])])])]),s._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[s._v("解答")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("iaddq")]),s._v(" 的计算过程如下")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[s._v("阶段")]),s._v(" "),a("th",{staticStyle:{"text-align":"left"}},[a("code",[s._v("iaddq V, rB")])])])]),s._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("取指")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("code",[s._v("icode:ifun ← M1[PC]")]),s._v(" "),a("br"),s._v(" "),a("code",[s._v("rA:rB ← M1[PC+1]")]),s._v(" "),a("br"),s._v(" "),a("code",[s._v("valC ← M8[PC+2]")]),s._v(" "),a("br"),s._v(" "),a("code",[s._v("valP ← PC + 10")])])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("译码")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("code",[s._v("valB ← R[rB]")])])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("执行")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("code",[s._v("valE ← valB + valC")])])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("访存")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}})]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("写回")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("code",[s._v("R[rB] ← valE")])])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("更新PC")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("code",[s._v("PC ← valP")])])])])]),s._v(" "),a("ul",[a("li",[a("details",{staticClass:"custom-block details"},[a("summary",[s._v("修改后的 seq-full.hcl")]),s._v(" "),a("ul",[a("li",[s._v("修改的地方主要是在各个信号中添加 "),a("code",[s._v("IIADDQ")]),s._v("， 以达成上表中的逻辑行为")])]),s._v(" "),a("div",{staticClass:"language-hcl line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-hcl"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#/* $begin seq-all-hcl */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("####################################################################")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  HCL Description of Control for Single Cycle Y86-64 Processor SEQ   #")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  Copyright (C) Randal E. Bryant, David R. O'Hallaron, 2010       #")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("####################################################################")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Your task is to implement the iaddq instruction")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## The file contains a declaration of the icodes")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## for iaddq (IIADDQ)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Your job is to add the rest of the logic to make it work")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("####################################################################")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    C Include's.  Don't alter these                               #")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("####################################################################")]),s._v("\n\nquote '"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#include <stdio.h>'")]),s._v("\nquote '"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#include "isa.h"\'')]),s._v("\nquote '"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#include "sim.h"\'')]),s._v("\nquote 'int sim_main(int argc, char *argv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(");'\nquote 'word_t gen_pc()"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("return "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(";"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("'\nquote 'int main(int argc, char *argv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(")'\nquote '  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("plusmode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(";return sim_main(argc,argv);"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("'\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("####################################################################")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    Declarations.  Do not change/remove/delete any of these       #")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("####################################################################")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Symbolic representation of Y86-64 Instruction Codes #############")]),s._v("\nwordsig INOP \t'I_NOP'\nwordsig IHALT\t'I_HALT'\nwordsig IRRMOVQ\t'I_RRMOVQ'\nwordsig IIRMOVQ\t'I_IRMOVQ'\nwordsig IRMMOVQ\t'I_RMMOVQ'\nwordsig IMRMOVQ\t'I_MRMOVQ'\nwordsig IOPQ\t'I_ALU'\nwordsig IJXX\t'I_JMP'\nwordsig ICALL\t'I_CALL'\nwordsig IRET\t'I_RET'\nwordsig IPUSHQ\t'I_PUSHQ'\nwordsig IPOPQ\t'I_POPQ'\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Instruction code for iaddq instruction")]),s._v("\nwordsig IIADDQ\t'I_IADDQ'\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Symbolic represenations of Y86-64 function codes                  #####")]),s._v("\nwordsig FNONE    'F_NONE'        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Default function code")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Symbolic representation of Y86-64 Registers referenced explicitly #####")]),s._v("\nwordsig RRSP     'REG_RSP'    \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Stack Pointer")]),s._v("\nwordsig RNONE    'REG_NONE'   \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# Special value indicating "no register"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### ALU Functions referenced explicitly                            #####")]),s._v("\nwordsig ALUADD\t'A_ADD'\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ALU should add its arguments")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Possible instruction status values                             #####")]),s._v("\nwordsig SAOK\t'STAT_AOK'\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Normal execution")]),s._v("\nwordsig SADR\t'STAT_ADR'\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Invalid memory address")]),s._v("\nwordsig SINS\t'STAT_INS'\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Invalid instruction")]),s._v("\nwordsig SHLT\t'STAT_HLT'\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Halt instruction encountered")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Signals that can be referenced by control logic ####################")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Fetch stage inputs\t\t#####")]),s._v("\nwordsig pc 'pc'\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Program counter")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Fetch stage computations\t\t#####")]),s._v("\nwordsig imem_icode 'imem_icode'\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# icode field from instruction memory")]),s._v("\nwordsig imem_ifun  'imem_ifun' \t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ifun field from instruction memory")]),s._v("\nwordsig icode\t  'icode'\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Instruction control code")]),s._v("\nwordsig ifun\t  'ifun'\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Instruction function")]),s._v("\nwordsig rA\t  'ra'\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rA field from instruction")]),s._v("\nwordsig rB\t  'rb'\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rB field from instruction")]),s._v("\nwordsig valC\t  'valc'\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Constant from instruction")]),s._v("\nwordsig valP\t  'valp'\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Address of following instruction")]),s._v("\nboolsig imem_error 'imem_error'\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Error signal from instruction memory")]),s._v("\nboolsig instr_valid 'instr_valid'\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Is fetched instruction valid?")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Decode stage computations\t\t#####")]),s._v("\nwordsig valA\t'vala'\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Value from register A port")]),s._v("\nwordsig valB\t'valb'\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Value from register B port")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Execute stage computations\t#####")]),s._v("\nwordsig valE\t'vale'\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Value computed by ALU")]),s._v("\nboolsig Cnd\t'cond'\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Branch test")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Memory stage computations\t\t#####")]),s._v("\nwordsig valM\t'valm'\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Value read from memory")]),s._v("\nboolsig dmem_error 'dmem_error'\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Error signal from data memory")]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("####################################################################")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    Control Signal Definitions.                                   #")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("####################################################################")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################ Fetch Stage     ###################################")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Determine instruction code")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("icode")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\timem_error: INOP;\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": imem_icode;\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Default: get from instruction memory")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Determine instruction function")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("ifun")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\timem_error: FNONE;\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": imem_ifun;\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Default: get from instruction memory")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\nbool "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("instr_valid")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" INOP, IHALT, IRRMOVQ, IIRMOVQ, IRMMOVQ, IMRMOVQ,\n\t       IOPQ, IJXX, ICALL, IRET, IPUSHQ, IPOPQ, IIADDQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Does fetched instruction require a regid byte?")]),s._v("\nbool "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("need_regids")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("\n\ticode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IRRMOVQ, IOPQ, IPUSHQ, IPOPQ, \n\t\t     IIRMOVQ, IRMMOVQ, IMRMOVQ, IIADDQ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Does fetched instruction require a constant word?")]),s._v("\nbool "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("need_valC")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("\n\ticode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IIRMOVQ, IRMMOVQ, IMRMOVQ, IJXX, ICALL, IIADDQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################ Decode Stage    ###################################")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## What register should be used as the A source?")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("srcA")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\ticode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IRRMOVQ, IRMMOVQ, IOPQ, IPUSHQ  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : rA;\n\ticode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IPOPQ, IRET "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : RRSP;\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" : RNONE; "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Don't need register")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## What register should be used as the B source?")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("srcB")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\ticode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IOPQ, IRMMOVQ, IMRMOVQ, IIADDQ  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : rB;\n\ticode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IPUSHQ, IPOPQ, ICALL, IRET "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : RRSP;\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" : RNONE;  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Don't need register")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## What register should be used as the E destination?")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("dstE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\ticode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IRRMOVQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" && Cnd : rB;\n\ticode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IIRMOVQ, IOPQ, IIADDQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : rB;\n\ticode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IPUSHQ, IPOPQ, ICALL, IRET "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : RRSP;\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" : RNONE;  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Don't write any register")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## What register should be used as the M destination?")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("dstM")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\ticode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IMRMOVQ, IPOPQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : rA;\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" : RNONE;  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Don't write any register")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################ Execute Stage   ###################################")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Select input A to ALU")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("aluA")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\ticode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IRRMOVQ, IOPQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : valA;\n\ticode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IIRMOVQ, IRMMOVQ, IMRMOVQ, IIADDQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : valC;\n\ticode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" ICALL, IPUSHQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : -"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(";\n\ticode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IRET, IPOPQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(";\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Other instructions don't need ALU")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Select input B to ALU")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("aluB")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\ticode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IRMMOVQ, IMRMOVQ, IOPQ, ICALL, \n\t\t      IPUSHQ, IRET, IPOPQ, IIADDQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : valB;\n\ticode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IRRMOVQ, IIRMOVQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(";\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Other instructions don't need ALU")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Set the ALU function")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("alufun")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\ticode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" IOPQ : ifun;\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" : ALUADD;\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Should the condition codes be updated?")]),s._v("\nbool "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("set_cc")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IOPQ, IIADDQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################ Memory Stage    ###################################")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Set read control signal")]),s._v("\nbool "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("mem_read")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IMRMOVQ, IPOPQ, IRET "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Set write control signal")]),s._v("\nbool "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("mem_write")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IRMMOVQ, IPUSHQ, ICALL "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Select memory address")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("mem_addr")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\ticode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IRMMOVQ, IPUSHQ, ICALL, IMRMOVQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : valE;\n\ticode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IPOPQ, IRET "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : valA;\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Other instructions don't need address")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Select memory input data")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("mem_data")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Value from register")]),s._v("\n\ticode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IRMMOVQ, IPUSHQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : valA;\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Return PC")]),s._v("\n\ticode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" ICALL : valP;\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Default: Don't write anything")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Determine instruction status")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("Stat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\timem_error || dmem_error : SADR;\n\t!instr_valid: SINS;\n\ticode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" IHALT : SHLT;\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" : SAOK;\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################ Program Counter Update ############################")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## What address should instruction be fetched at")]),s._v("\n\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("new_pc")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Call.  Use instruction constant")]),s._v("\n\ticode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" ICALL : valC;\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Taken branch.  Use instruction constant")]),s._v("\n\ticode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" IJXX && Cnd : valC;\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Completion of RET instruction.  Use value from stack")]),s._v("\n\ticode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" IRET : valM;\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Default: Use incremented PC")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" : valP;\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#/* $end seq-all-hcl */")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br"),a("span",{staticClass:"line-number"},[s._v("132")]),a("br"),a("span",{staticClass:"line-number"},[s._v("133")]),a("br"),a("span",{staticClass:"line-number"},[s._v("134")]),a("br"),a("span",{staticClass:"line-number"},[s._v("135")]),a("br"),a("span",{staticClass:"line-number"},[s._v("136")]),a("br"),a("span",{staticClass:"line-number"},[s._v("137")]),a("br"),a("span",{staticClass:"line-number"},[s._v("138")]),a("br"),a("span",{staticClass:"line-number"},[s._v("139")]),a("br"),a("span",{staticClass:"line-number"},[s._v("140")]),a("br"),a("span",{staticClass:"line-number"},[s._v("141")]),a("br"),a("span",{staticClass:"line-number"},[s._v("142")]),a("br"),a("span",{staticClass:"line-number"},[s._v("143")]),a("br"),a("span",{staticClass:"line-number"},[s._v("144")]),a("br"),a("span",{staticClass:"line-number"},[s._v("145")]),a("br"),a("span",{staticClass:"line-number"},[s._v("146")]),a("br"),a("span",{staticClass:"line-number"},[s._v("147")]),a("br"),a("span",{staticClass:"line-number"},[s._v("148")]),a("br"),a("span",{staticClass:"line-number"},[s._v("149")]),a("br"),a("span",{staticClass:"line-number"},[s._v("150")]),a("br"),a("span",{staticClass:"line-number"},[s._v("151")]),a("br"),a("span",{staticClass:"line-number"},[s._v("152")]),a("br"),a("span",{staticClass:"line-number"},[s._v("153")]),a("br"),a("span",{staticClass:"line-number"},[s._v("154")]),a("br"),a("span",{staticClass:"line-number"},[s._v("155")]),a("br"),a("span",{staticClass:"line-number"},[s._v("156")]),a("br"),a("span",{staticClass:"line-number"},[s._v("157")]),a("br"),a("span",{staticClass:"line-number"},[s._v("158")]),a("br"),a("span",{staticClass:"line-number"},[s._v("159")]),a("br"),a("span",{staticClass:"line-number"},[s._v("160")]),a("br"),a("span",{staticClass:"line-number"},[s._v("161")]),a("br"),a("span",{staticClass:"line-number"},[s._v("162")]),a("br"),a("span",{staticClass:"line-number"},[s._v("163")]),a("br"),a("span",{staticClass:"line-number"},[s._v("164")]),a("br"),a("span",{staticClass:"line-number"},[s._v("165")]),a("br"),a("span",{staticClass:"line-number"},[s._v("166")]),a("br"),a("span",{staticClass:"line-number"},[s._v("167")]),a("br"),a("span",{staticClass:"line-number"},[s._v("168")]),a("br"),a("span",{staticClass:"line-number"},[s._v("169")]),a("br"),a("span",{staticClass:"line-number"},[s._v("170")]),a("br"),a("span",{staticClass:"line-number"},[s._v("171")]),a("br"),a("span",{staticClass:"line-number"},[s._v("172")]),a("br"),a("span",{staticClass:"line-number"},[s._v("173")]),a("br"),a("span",{staticClass:"line-number"},[s._v("174")]),a("br"),a("span",{staticClass:"line-number"},[s._v("175")]),a("br"),a("span",{staticClass:"line-number"},[s._v("176")]),a("br"),a("span",{staticClass:"line-number"},[s._v("177")]),a("br"),a("span",{staticClass:"line-number"},[s._v("178")]),a("br"),a("span",{staticClass:"line-number"},[s._v("179")]),a("br"),a("span",{staticClass:"line-number"},[s._v("180")]),a("br"),a("span",{staticClass:"line-number"},[s._v("181")]),a("br"),a("span",{staticClass:"line-number"},[s._v("182")]),a("br"),a("span",{staticClass:"line-number"},[s._v("183")]),a("br"),a("span",{staticClass:"line-number"},[s._v("184")]),a("br"),a("span",{staticClass:"line-number"},[s._v("185")]),a("br"),a("span",{staticClass:"line-number"},[s._v("186")]),a("br"),a("span",{staticClass:"line-number"},[s._v("187")]),a("br"),a("span",{staticClass:"line-number"},[s._v("188")]),a("br"),a("span",{staticClass:"line-number"},[s._v("189")]),a("br"),a("span",{staticClass:"line-number"},[s._v("190")]),a("br"),a("span",{staticClass:"line-number"},[s._v("191")]),a("br"),a("span",{staticClass:"line-number"},[s._v("192")]),a("br"),a("span",{staticClass:"line-number"},[s._v("193")]),a("br"),a("span",{staticClass:"line-number"},[s._v("194")]),a("br"),a("span",{staticClass:"line-number"},[s._v("195")]),a("br"),a("span",{staticClass:"line-number"},[s._v("196")]),a("br"),a("span",{staticClass:"line-number"},[s._v("197")]),a("br"),a("span",{staticClass:"line-number"},[s._v("198")]),a("br"),a("span",{staticClass:"line-number"},[s._v("199")]),a("br"),a("span",{staticClass:"line-number"},[s._v("200")]),a("br"),a("span",{staticClass:"line-number"},[s._v("201")]),a("br"),a("span",{staticClass:"line-number"},[s._v("202")]),a("br"),a("span",{staticClass:"line-number"},[s._v("203")]),a("br"),a("span",{staticClass:"line-number"},[s._v("204")]),a("br"),a("span",{staticClass:"line-number"},[s._v("205")]),a("br"),a("span",{staticClass:"line-number"},[s._v("206")]),a("br"),a("span",{staticClass:"line-number"},[s._v("207")]),a("br"),a("span",{staticClass:"line-number"},[s._v("208")]),a("br"),a("span",{staticClass:"line-number"},[s._v("209")]),a("br"),a("span",{staticClass:"line-number"},[s._v("210")]),a("br"),a("span",{staticClass:"line-number"},[s._v("211")]),a("br"),a("span",{staticClass:"line-number"},[s._v("212")]),a("br"),a("span",{staticClass:"line-number"},[s._v("213")]),a("br"),a("span",{staticClass:"line-number"},[s._v("214")]),a("br"),a("span",{staticClass:"line-number"},[s._v("215")]),a("br"),a("span",{staticClass:"line-number"},[s._v("216")]),a("br"),a("span",{staticClass:"line-number"},[s._v("217")]),a("br"),a("span",{staticClass:"line-number"},[s._v("218")]),a("br"),a("span",{staticClass:"line-number"},[s._v("219")]),a("br"),a("span",{staticClass:"line-number"},[s._v("220")]),a("br"),a("span",{staticClass:"line-number"},[s._v("221")]),a("br"),a("span",{staticClass:"line-number"},[s._v("222")]),a("br"),a("span",{staticClass:"line-number"},[s._v("223")]),a("br"),a("span",{staticClass:"line-number"},[s._v("224")]),a("br")])])])])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("运行下述命令检查代码正确性")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("seq")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" clean "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("VERSION")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("full\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/ptest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SIM")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/seq/ssim "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TFLAGS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-i\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"part-c"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#part-c"}},[s._v("#")]),s._v(" Part C")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("解题思路")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("添加 "),a("code",[s._v("iadd")]),s._v(" 指令可以减少指令的条数，诸如以下两条指令，即可合并为一条指令")]),s._v(" "),a("div",{staticClass:"language-nasm line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-nasm"}},[a("code",[s._v("irmovq "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("$1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token register variable"}},[s._v("r10")]),s._v("\nsubq "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token register variable"}},[s._v("r10")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token register variable"}},[s._v("rdx")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("可合并为")]),s._v(" "),a("div",{staticClass:"language-nasm line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-nasm"}},[a("code",[s._v("iaddq "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token register variable"}},[s._v("rdx")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("采用条件转移指令不能改善性能")]),s._v(" "),a("div",{staticClass:"language-nasm line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-nasm"}},[a("code",[s._v("andq "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token register variable"}},[s._v("r10")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token register variable"}},[s._v("r10")]),s._v("\t\t# val "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("?\njle Npos\t\t# if so, goto Npos:\niaddq "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("$1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token register variable"}},[s._v("rax")]),s._v("\t\t# count"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("此段代码如果换为条件转移指令所需要指令条数为 4 条")]),s._v(" "),a("li",[s._v("而跳转指令当前采用是总是跳转(AT)策略，当判断成功时，需要 2 条指令。判断失败时，需要加入两个气泡，因此总共需要 5 条指令\n"),a("ul",[a("li",[s._v("本例中数据是随机生成的，因此判断成功的概念为 50%，平均指令数为 3.5 条")]),s._v(" "),a("li",[s._v("因此条件跳转指令的性能要优于条件转移指令")])])])])]),s._v(" "),a("li",[a("p",[s._v("内存读写时，要避免数据的加载/使用冒险")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("如下面的代码，即存在着数据的加载/使用冒险，会导致产生 1 个气泡")]),s._v(" "),a("ul",[a("li",[s._v("需要向其中加入一条其它不使用 "),a("code",[s._v("%r10")]),s._v(" 的指令来避免此种情况")])]),s._v(" "),a("div",{staticClass:"language-nasm line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-nasm"}},[a("code",[s._v("mrmovq ("),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token register variable"}},[s._v("rdi")]),s._v("), "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token register variable"}},[s._v("r10")]),s._v("\t# read val from src...\nrmmovq "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token register variable"}},[s._v("r10")]),s._v(", ("),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token register variable"}},[s._v("rsi")]),s._v(")\t# ...and store it to dst\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])])]),s._v(" "),a("li",[a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("最终的优化策略是循环展开和避免数据的加载/使用冒险")]),s._v(" "),a("ul",[a("li",[s._v("循环展开可以减少程序条件跳转的次数，从而提升 CPE")]),s._v(" "),a("li",[s._v("实际编写代码时发现，发现只采用循环展开的效果并不是很好\n"),a("ul",[a("li",[s._v("经分析是由于循环展开的余数部分仍然会有较多的条件跳转判断")]),s._v(" "),a("li",[s._v("因此，将余数部分也展开，从而进一步提升 CPE\n"),a("ul",[a("li",[s._v("判断余数时使用二分法，可以减少判断的次数")]),s._v(" "),a("li",[s._v("余数部分展开时，较大的余数可以利用较小的余数部分的代码")]),s._v(" "),a("li",[s._v("通过将余数为 1 时的内存数据提前移入寄存器 "),a("code",[s._v("%r8")]),s._v(" 可以巧妙的避免数据的加载/使用冒险\n"),a("ul",[a("li",[s._v("对应于 9 次展开第 86 行的代码")])])]),s._v(" "),a("li",[s._v("要注意余数为 0 时，不应再对内存进行写入操作")]),s._v(" "),a("li",[s._v("对余数为 0 和 余数为 1 的部分单独进行处理，可以进一步的提升 CPE\n"),a("ul",[a("li",[s._v("对应于 9 次展开 99 ~ 102 行的代码")])])]),s._v(" "),a("li",[s._v("设展开次数为 "),a("code",[s._v("K")]),s._v("，则对于余数 "),a("code",[s._v("K-1")]),s._v("， 可以不采用跳转操作，而是直接接着代码顺序执行")])])])])]),s._v(" "),a("li",[s._v("能直接 "),a("code",[s._v("ret")]),s._v(" 的就直接 "),a("code",[s._v("ret")]),s._v("，而不是跳转到 "),a("code",[s._v("Done")]),s._v("，可以节省一条标签")]),s._v(" "),a("li",[s._v("对于此程序， 省略 "),a("code",[s._v("xorq %rax, %rax")]),s._v(" 这条语句也可以通过测试程序\n"),a("ul",[a("li",[s._v("这个改动需要函数调用者的配合, 不知道 MCU 的最优答案是否省略了这条语句")])])]),s._v(" "),a("li",[s._v("最终发现展开次数为 "),a("code",[s._v("9")]),s._v(" 时，代码的长度为 985 bytes，再往前展开，则会超出代码长度的限制。\n"),a("ul",[a("li",[s._v("展开次数为 "),a("code",[s._v("9")]),s._v(" 时，平均 CPE 为 7.48，达到了 guide 中的最好水平\n"),a("ul",[a("li",[s._v("通过测试，展开次数为 "),a("code",[s._v("8")]),s._v(" 时，平均 CPE 为 7.5")])])])])])])])])])]),s._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[s._v("最终答案")]),s._v(" "),a("ul",[a("li",[a("details",{staticClass:"custom-block details"},[a("summary",[s._v("pipe-full.hcl")]),s._v(" "),a("ul",[a("li",[s._v("修改的地方主要是在各个信号中添加 "),a("code",[s._v("IIADDQ")])])]),s._v(" "),a("div",{staticClass:"language-hcl line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-hcl"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#/* $begin pipe-all-hcl */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("####################################################################")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    HCL Description of Control for Pipelined Y86-64 Processor     #")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    Copyright (C) Randal E. Bryant, David R. O'Hallaron, 2014     #")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("####################################################################")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Your task is to implement the iaddq instruction")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## The file contains a declaration of the icodes")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## for iaddq (IIADDQ)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Your job is to add the rest of the logic to make it work")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("####################################################################")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    C Include's.  Don't alter these                               #")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("####################################################################")]),s._v("\n\nquote '"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#include <stdio.h>'")]),s._v("\nquote '"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#include "isa.h"\'')]),s._v("\nquote '"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#include "pipeline.h"\'')]),s._v("\nquote '"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#include "stages.h"\'')]),s._v("\nquote '"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#include "sim.h"\'')]),s._v("\nquote 'int sim_main(int argc, char *argv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(");'\nquote 'int main(int argc, char *argv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(")"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("return sim_main(argc,argv);"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("'\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("####################################################################")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    Declarations.  Do not change/remove/delete any of these       #")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("####################################################################")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Symbolic representation of Y86-64 Instruction Codes #############")]),s._v("\nwordsig INOP \t'I_NOP'\nwordsig IHALT\t'I_HALT'\nwordsig IRRMOVQ\t'I_RRMOVQ'\nwordsig IIRMOVQ\t'I_IRMOVQ'\nwordsig IRMMOVQ\t'I_RMMOVQ'\nwordsig IMRMOVQ\t'I_MRMOVQ'\nwordsig IOPQ\t'I_ALU'\nwordsig IJXX\t'I_JMP'\nwordsig ICALL\t'I_CALL'\nwordsig IRET\t'I_RET'\nwordsig IPUSHQ\t'I_PUSHQ'\nwordsig IPOPQ\t'I_POPQ'\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Instruction code for iaddq instruction")]),s._v("\nwordsig IIADDQ\t'I_IADDQ'\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Symbolic represenations of Y86-64 function codes            #####")]),s._v("\nwordsig FNONE    'F_NONE'        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Default function code")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Symbolic representation of Y86-64 Registers referenced      #####")]),s._v("\nwordsig RRSP     'REG_RSP'    \t     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Stack Pointer")]),s._v("\nwordsig RNONE    'REG_NONE'   \t     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# Special value indicating "no register"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### ALU Functions referenced explicitly ##########################")]),s._v("\nwordsig ALUADD\t'A_ADD'\t\t     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ALU should add its arguments")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Possible instruction status values                       #####")]),s._v("\nwordsig SBUB\t'STAT_BUB'\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Bubble in stage")]),s._v("\nwordsig SAOK\t'STAT_AOK'\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Normal execution")]),s._v("\nwordsig SADR\t'STAT_ADR'\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Invalid memory address")]),s._v("\nwordsig SINS\t'STAT_INS'\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Invalid instruction")]),s._v("\nwordsig SHLT\t'STAT_HLT'\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Halt instruction encountered")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Signals that can be referenced by control logic ##############")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Pipeline Register F ##########################################")]),s._v("\n\nwordsig F_predPC 'pc_curr->pc'\t     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Predicted value of PC")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Intermediate Values in Fetch Stage ###########################")]),s._v("\n\nwordsig imem_icode  'imem_icode'      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# icode field from instruction memory")]),s._v("\nwordsig imem_ifun   'imem_ifun'       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ifun  field from instruction memory")]),s._v("\nwordsig f_icode\t'if_id_next->icode'  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# (Possibly modified) instruction code")]),s._v("\nwordsig f_ifun\t'if_id_next->ifun'   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Fetched instruction function")]),s._v("\nwordsig f_valC\t'if_id_next->valc'   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Constant data of fetched instruction")]),s._v("\nwordsig f_valP\t'if_id_next->valp'   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Address of following instruction")]),s._v("\nboolsig imem_error 'imem_error'\t     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Error signal from instruction memory")]),s._v("\nboolsig instr_valid 'instr_valid'    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Is fetched instruction valid?")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Pipeline Register D ##########################################")]),s._v("\nwordsig D_icode 'if_id_curr->icode'   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Instruction code")]),s._v("\nwordsig D_rA 'if_id_curr->ra'\t     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rA field from instruction")]),s._v("\nwordsig D_rB 'if_id_curr->rb'\t     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rB field from instruction")]),s._v("\nwordsig D_valP 'if_id_curr->valp'     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Incremented PC")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Intermediate Values in Decode Stage  #########################")]),s._v("\n\nwordsig d_srcA\t 'id_ex_next->srca'  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# srcA from decoded instruction")]),s._v("\nwordsig d_srcB\t 'id_ex_next->srcb'  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# srcB from decoded instruction")]),s._v("\nwordsig d_rvalA 'd_regvala'\t     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# valA read from register file")]),s._v("\nwordsig d_rvalB 'd_regvalb'\t     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# valB read from register file")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Pipeline Register E ##########################################")]),s._v("\nwordsig E_icode 'id_ex_curr->icode'   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Instruction code")]),s._v("\nwordsig E_ifun  'id_ex_curr->ifun'    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Instruction function")]),s._v("\nwordsig E_valC  'id_ex_curr->valc'    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Constant data")]),s._v("\nwordsig E_srcA  'id_ex_curr->srca'    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Source A register ID")]),s._v("\nwordsig E_valA  'id_ex_curr->vala'    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Source A value")]),s._v("\nwordsig E_srcB  'id_ex_curr->srcb'    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Source B register ID")]),s._v("\nwordsig E_valB  'id_ex_curr->valb'    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Source B value")]),s._v("\nwordsig E_dstE 'id_ex_curr->deste'    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Destination E register ID")]),s._v("\nwordsig E_dstM 'id_ex_curr->destm'    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Destination M register ID")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Intermediate Values in Execute Stage #########################")]),s._v("\nwordsig e_valE 'ex_mem_next->vale'\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# valE generated by ALU")]),s._v("\nboolsig e_Cnd 'ex_mem_next->takebranch' "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Does condition hold?")]),s._v("\nwordsig e_dstE 'ex_mem_next->deste'      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dstE (possibly modified to be RNONE)")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Pipeline Register M                  #########################")]),s._v("\nwordsig M_stat 'ex_mem_curr->status'     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Instruction status")]),s._v("\nwordsig M_icode 'ex_mem_curr->icode'\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Instruction code")]),s._v("\nwordsig M_ifun  'ex_mem_curr->ifun'\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Instruction function")]),s._v("\nwordsig M_valA  'ex_mem_curr->vala'      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Source A value")]),s._v("\nwordsig M_dstE 'ex_mem_curr->deste'\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Destination E register ID")]),s._v("\nwordsig M_valE  'ex_mem_curr->vale'      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ALU E value")]),s._v("\nwordsig M_dstM 'ex_mem_curr->destm'\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Destination M register ID")]),s._v("\nboolsig M_Cnd 'ex_mem_curr->takebranch'\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Condition flag")]),s._v("\nboolsig dmem_error 'dmem_error'\t        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Error signal from instruction memory")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Intermediate Values in Memory Stage ##########################")]),s._v("\nwordsig m_valM 'mem_wb_next->valm'\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# valM generated by memory")]),s._v("\nwordsig m_stat 'mem_wb_next->status'\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# stat (possibly modified to be SADR)")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### Pipeline Register W ##########################################")]),s._v("\nwordsig W_stat 'mem_wb_curr->status'     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Instruction status")]),s._v("\nwordsig W_icode 'mem_wb_curr->icode'\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Instruction code")]),s._v("\nwordsig W_dstE 'mem_wb_curr->deste'\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Destination E register ID")]),s._v("\nwordsig W_valE  'mem_wb_curr->vale'      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ALU E value")]),s._v("\nwordsig W_dstM 'mem_wb_curr->destm'\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Destination M register ID")]),s._v("\nwordsig W_valM  'mem_wb_curr->valm'\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Memory M value")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("####################################################################")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    Control Signal Definitions.                                   #")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("####################################################################")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################ Fetch Stage     ###################################")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## What address should instruction be fetched at")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("f_pc")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Mispredicted branch.  Fetch at incremented PC")]),s._v("\n\tM_icode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" IJXX && !M_Cnd : M_valA;\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Completion of RET instruction")]),s._v("\n\tW_icode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" IRET : W_valM;\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Default: Use predicted value of PC")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" : F_predPC;\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Determine icode of fetched instruction")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("f_icode")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\timem_error : INOP;\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": imem_icode;\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Determine ifun")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("f_ifun")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\timem_error : FNONE;\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": imem_ifun;\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Is instruction valid?")]),s._v("\nbool "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("instr_valid")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" f_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" INOP, IHALT, IRRMOVQ, IIRMOVQ, IRMMOVQ, IMRMOVQ,\n\t  IOPQ, IJXX, ICALL, IRET, IPUSHQ, IPOPQ, IIADDQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Determine status code for fetched instruction")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("f_stat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\timem_error: SADR;\n\t!instr_valid : SINS;\n\tf_icode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" IHALT : SHLT;\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" : SAOK;\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Does fetched instruction require a regid byte?")]),s._v("\nbool "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("need_regids")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("\n\tf_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IRRMOVQ, IOPQ, IPUSHQ, IPOPQ, \n\t\t     IIRMOVQ, IRMMOVQ, IMRMOVQ, IIADDQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Does fetched instruction require a constant word?")]),s._v("\nbool "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("need_valC")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("\n\tf_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IIRMOVQ, IRMMOVQ, IMRMOVQ, IJXX, ICALL, IIADDQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Predict next value of PC")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("f_predPC")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\tf_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IJXX, ICALL "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : f_valC;\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" : f_valP;\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################ Decode Stage ######################################")]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## What register should be used as the A source?")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("d_srcA")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\tD_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IRRMOVQ, IRMMOVQ, IOPQ, IPUSHQ  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : D_rA;\n\tD_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IPOPQ, IRET "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : RRSP;\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" : RNONE; "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Don't need register")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## What register should be used as the B source?")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("d_srcB")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\tD_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IOPQ, IRMMOVQ, IMRMOVQ, IIADDQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : D_rB;\n\tD_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IPUSHQ, IPOPQ, ICALL, IRET "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : RRSP;\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" : RNONE;  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Don't need register")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## What register should be used as the E destination?")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("d_dstE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\tD_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IRRMOVQ, IIRMOVQ, IOPQ, IIADDQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : D_rB;\n\tD_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IPUSHQ, IPOPQ, ICALL, IRET "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : RRSP;\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" : RNONE;  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Don't write any register")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## What register should be used as the M destination?")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("d_dstM")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\tD_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IMRMOVQ, IPOPQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : D_rA;\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" : RNONE;  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Don't write any register")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## What should be the A value?")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Forward into decode stage for valA")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("d_valA")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\tD_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" ICALL, IJXX "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : D_valP; "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Use incremented PC")]),s._v("\n\td_srcA "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" e_dstE : e_valE;    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Forward valE from execute")]),s._v("\n\td_srcA "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" M_dstM : m_valM;    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Forward valM from memory")]),s._v("\n\td_srcA "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" M_dstE : M_valE;    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Forward valE from memory")]),s._v("\n\td_srcA "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" W_dstM : W_valM;    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Forward valM from write back")]),s._v("\n\td_srcA "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" W_dstE : W_valE;    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Forward valE from write back")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" : d_rvalA;  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Use value read from register file")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("d_valB")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\td_srcB "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" e_dstE : e_valE;    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Forward valE from execute")]),s._v("\n\td_srcB "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" M_dstM : m_valM;    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Forward valM from memory")]),s._v("\n\td_srcB "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" M_dstE : M_valE;    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Forward valE from memory")]),s._v("\n\td_srcB "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" W_dstM : W_valM;    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Forward valM from write back")]),s._v("\n\td_srcB "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" W_dstE : W_valE;    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Forward valE from write back")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" : d_rvalB;  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Use value read from register file")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################ Execute Stage #####################################")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Select input A to ALU")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("aluA")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\tE_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IRRMOVQ, IOPQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : E_valA;\n\tE_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IIRMOVQ, IRMMOVQ, IMRMOVQ, IIADDQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : E_valC;\n\tE_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" ICALL, IPUSHQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : -"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(";\n\tE_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IRET, IPOPQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(";\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Other instructions don't need ALU")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Select input B to ALU")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("aluB")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\tE_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IRMMOVQ, IMRMOVQ, IOPQ, ICALL, \n\t\t     IPUSHQ, IRET, IPOPQ, IIADDQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : E_valB;\n\tE_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IRRMOVQ, IIRMOVQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(";\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Other instructions don't need ALU")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Set the ALU function")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("alufun")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\tE_icode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" IOPQ : E_ifun;\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" : ALUADD;\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Should the condition codes be updated?")]),s._v("\nbool "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("set_cc")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" (E_icode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" IOPQ || E_icode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" IIADDQ) &&\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# State changes only during normal operation")]),s._v("\n\t!m_stat "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" SADR, SINS, SHLT "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" && !W_stat "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" SADR, SINS, SHLT "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Generate valA in execute stage")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("e_valA")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" E_valA;    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Pass valA through stage")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Set dstE to RNONE in event of not-taken conditional move")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("e_dstE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\tE_icode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" IRRMOVQ && !e_Cnd : RNONE;\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" : E_dstE;\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################ Memory Stage ######################################")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Select memory address")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("mem_addr")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\tM_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IRMMOVQ, IPUSHQ, ICALL, IMRMOVQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : M_valE;\n\tM_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IPOPQ, IRET "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" : M_valA;\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Other instructions don't need address")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Set read control signal")]),s._v("\nbool "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("mem_read")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" M_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IMRMOVQ, IPOPQ, IRET "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Set write control signal")]),s._v("\nbool "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("mem_write")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" M_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IRMMOVQ, IPUSHQ, ICALL "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#/* $begin pipe-m_stat-hcl */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Update the status")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("m_stat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\tdmem_error : SADR;\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" : M_stat;\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#/* $end pipe-m_stat-hcl */")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Set E port register ID")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("w_dstE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" W_dstE;\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Set E port value")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("w_valE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" W_valE;\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Set M port register ID")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("w_dstM")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" W_dstM;\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Set M port value")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("w_valM")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" W_valM;\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Update processor status")]),s._v("\nword "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("Stat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\tW_stat "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" SBUB : SAOK;\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" : W_stat;\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################ Pipeline Register Control #########################")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Should I stall or inject a bubble into Pipeline Register F?")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# At most one of these can be true.")]),s._v("\nbool "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("F_bubble")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(";\nbool "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("F_stall")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Conditions for a load/use hazard")]),s._v("\n\tE_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IMRMOVQ, IPOPQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" &&\n\t E_dstM "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" d_srcA, d_srcB "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" ||\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Stalling at fetch while ret passes through pipeline")]),s._v("\n\tIRET "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" D_icode, E_icode, M_icode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Should I stall or inject a bubble into Pipeline Register D?")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# At most one of these can be true.")]),s._v("\nbool "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("D_stall")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Conditions for a load/use hazard")]),s._v("\n\tE_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IMRMOVQ, IPOPQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" &&\n\t E_dstM "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" d_srcA, d_srcB "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(";\n\nbool "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("D_bubble")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Mispredicted branch")]),s._v("\n\t(E_icode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" IJXX && !e_Cnd) ||\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Stalling at fetch while ret passes through pipeline")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# but not condition for a load/use hazard")]),s._v("\n\t!(E_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IMRMOVQ, IPOPQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" && E_dstM "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" d_srcA, d_srcB "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(") &&\n\t  IRET "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" D_icode, E_icode, M_icode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Should I stall or inject a bubble into Pipeline Register E?")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# At most one of these can be true.")]),s._v("\nbool "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("E_stall")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(";\nbool "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("E_bubble")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Mispredicted branch")]),s._v("\n\t(E_icode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" IJXX && !e_Cnd) ||\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Conditions for a load/use hazard")]),s._v("\n\tE_icode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" IMRMOVQ, IPOPQ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" &&\n\t E_dstM "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" d_srcA, d_srcB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Should I stall or inject a bubble into Pipeline Register M?")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# At most one of these can be true.")]),s._v("\nbool "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("M_stall")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(";\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Start injecting bubbles as soon as exception passes through memory stage")]),s._v("\nbool "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("M_bubble")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" m_stat "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" SADR, SINS, SHLT "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" || W_stat "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" SADR, SINS, SHLT "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Should I stall or inject a bubble into Pipeline Register W?")]),s._v("\nbool "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("W_stall")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" W_stat "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" SADR, SINS, SHLT "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(";\nbool "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("W_bubble")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(";\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#/* $end pipe-all-hcl */")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br"),a("span",{staticClass:"line-number"},[s._v("132")]),a("br"),a("span",{staticClass:"line-number"},[s._v("133")]),a("br"),a("span",{staticClass:"line-number"},[s._v("134")]),a("br"),a("span",{staticClass:"line-number"},[s._v("135")]),a("br"),a("span",{staticClass:"line-number"},[s._v("136")]),a("br"),a("span",{staticClass:"line-number"},[s._v("137")]),a("br"),a("span",{staticClass:"line-number"},[s._v("138")]),a("br"),a("span",{staticClass:"line-number"},[s._v("139")]),a("br"),a("span",{staticClass:"line-number"},[s._v("140")]),a("br"),a("span",{staticClass:"line-number"},[s._v("141")]),a("br"),a("span",{staticClass:"line-number"},[s._v("142")]),a("br"),a("span",{staticClass:"line-number"},[s._v("143")]),a("br"),a("span",{staticClass:"line-number"},[s._v("144")]),a("br"),a("span",{staticClass:"line-number"},[s._v("145")]),a("br"),a("span",{staticClass:"line-number"},[s._v("146")]),a("br"),a("span",{staticClass:"line-number"},[s._v("147")]),a("br"),a("span",{staticClass:"line-number"},[s._v("148")]),a("br"),a("span",{staticClass:"line-number"},[s._v("149")]),a("br"),a("span",{staticClass:"line-number"},[s._v("150")]),a("br"),a("span",{staticClass:"line-number"},[s._v("151")]),a("br"),a("span",{staticClass:"line-number"},[s._v("152")]),a("br"),a("span",{staticClass:"line-number"},[s._v("153")]),a("br"),a("span",{staticClass:"line-number"},[s._v("154")]),a("br"),a("span",{staticClass:"line-number"},[s._v("155")]),a("br"),a("span",{staticClass:"line-number"},[s._v("156")]),a("br"),a("span",{staticClass:"line-number"},[s._v("157")]),a("br"),a("span",{staticClass:"line-number"},[s._v("158")]),a("br"),a("span",{staticClass:"line-number"},[s._v("159")]),a("br"),a("span",{staticClass:"line-number"},[s._v("160")]),a("br"),a("span",{staticClass:"line-number"},[s._v("161")]),a("br"),a("span",{staticClass:"line-number"},[s._v("162")]),a("br"),a("span",{staticClass:"line-number"},[s._v("163")]),a("br"),a("span",{staticClass:"line-number"},[s._v("164")]),a("br"),a("span",{staticClass:"line-number"},[s._v("165")]),a("br"),a("span",{staticClass:"line-number"},[s._v("166")]),a("br"),a("span",{staticClass:"line-number"},[s._v("167")]),a("br"),a("span",{staticClass:"line-number"},[s._v("168")]),a("br"),a("span",{staticClass:"line-number"},[s._v("169")]),a("br"),a("span",{staticClass:"line-number"},[s._v("170")]),a("br"),a("span",{staticClass:"line-number"},[s._v("171")]),a("br"),a("span",{staticClass:"line-number"},[s._v("172")]),a("br"),a("span",{staticClass:"line-number"},[s._v("173")]),a("br"),a("span",{staticClass:"line-number"},[s._v("174")]),a("br"),a("span",{staticClass:"line-number"},[s._v("175")]),a("br"),a("span",{staticClass:"line-number"},[s._v("176")]),a("br"),a("span",{staticClass:"line-number"},[s._v("177")]),a("br"),a("span",{staticClass:"line-number"},[s._v("178")]),a("br"),a("span",{staticClass:"line-number"},[s._v("179")]),a("br"),a("span",{staticClass:"line-number"},[s._v("180")]),a("br"),a("span",{staticClass:"line-number"},[s._v("181")]),a("br"),a("span",{staticClass:"line-number"},[s._v("182")]),a("br"),a("span",{staticClass:"line-number"},[s._v("183")]),a("br"),a("span",{staticClass:"line-number"},[s._v("184")]),a("br"),a("span",{staticClass:"line-number"},[s._v("185")]),a("br"),a("span",{staticClass:"line-number"},[s._v("186")]),a("br"),a("span",{staticClass:"line-number"},[s._v("187")]),a("br"),a("span",{staticClass:"line-number"},[s._v("188")]),a("br"),a("span",{staticClass:"line-number"},[s._v("189")]),a("br"),a("span",{staticClass:"line-number"},[s._v("190")]),a("br"),a("span",{staticClass:"line-number"},[s._v("191")]),a("br"),a("span",{staticClass:"line-number"},[s._v("192")]),a("br"),a("span",{staticClass:"line-number"},[s._v("193")]),a("br"),a("span",{staticClass:"line-number"},[s._v("194")]),a("br"),a("span",{staticClass:"line-number"},[s._v("195")]),a("br"),a("span",{staticClass:"line-number"},[s._v("196")]),a("br"),a("span",{staticClass:"line-number"},[s._v("197")]),a("br"),a("span",{staticClass:"line-number"},[s._v("198")]),a("br"),a("span",{staticClass:"line-number"},[s._v("199")]),a("br"),a("span",{staticClass:"line-number"},[s._v("200")]),a("br"),a("span",{staticClass:"line-number"},[s._v("201")]),a("br"),a("span",{staticClass:"line-number"},[s._v("202")]),a("br"),a("span",{staticClass:"line-number"},[s._v("203")]),a("br"),a("span",{staticClass:"line-number"},[s._v("204")]),a("br"),a("span",{staticClass:"line-number"},[s._v("205")]),a("br"),a("span",{staticClass:"line-number"},[s._v("206")]),a("br"),a("span",{staticClass:"line-number"},[s._v("207")]),a("br"),a("span",{staticClass:"line-number"},[s._v("208")]),a("br"),a("span",{staticClass:"line-number"},[s._v("209")]),a("br"),a("span",{staticClass:"line-number"},[s._v("210")]),a("br"),a("span",{staticClass:"line-number"},[s._v("211")]),a("br"),a("span",{staticClass:"line-number"},[s._v("212")]),a("br"),a("span",{staticClass:"line-number"},[s._v("213")]),a("br"),a("span",{staticClass:"line-number"},[s._v("214")]),a("br"),a("span",{staticClass:"line-number"},[s._v("215")]),a("br"),a("span",{staticClass:"line-number"},[s._v("216")]),a("br"),a("span",{staticClass:"line-number"},[s._v("217")]),a("br"),a("span",{staticClass:"line-number"},[s._v("218")]),a("br"),a("span",{staticClass:"line-number"},[s._v("219")]),a("br"),a("span",{staticClass:"line-number"},[s._v("220")]),a("br"),a("span",{staticClass:"line-number"},[s._v("221")]),a("br"),a("span",{staticClass:"line-number"},[s._v("222")]),a("br"),a("span",{staticClass:"line-number"},[s._v("223")]),a("br"),a("span",{staticClass:"line-number"},[s._v("224")]),a("br"),a("span",{staticClass:"line-number"},[s._v("225")]),a("br"),a("span",{staticClass:"line-number"},[s._v("226")]),a("br"),a("span",{staticClass:"line-number"},[s._v("227")]),a("br"),a("span",{staticClass:"line-number"},[s._v("228")]),a("br"),a("span",{staticClass:"line-number"},[s._v("229")]),a("br"),a("span",{staticClass:"line-number"},[s._v("230")]),a("br"),a("span",{staticClass:"line-number"},[s._v("231")]),a("br"),a("span",{staticClass:"line-number"},[s._v("232")]),a("br"),a("span",{staticClass:"line-number"},[s._v("233")]),a("br"),a("span",{staticClass:"line-number"},[s._v("234")]),a("br"),a("span",{staticClass:"line-number"},[s._v("235")]),a("br"),a("span",{staticClass:"line-number"},[s._v("236")]),a("br"),a("span",{staticClass:"line-number"},[s._v("237")]),a("br"),a("span",{staticClass:"line-number"},[s._v("238")]),a("br"),a("span",{staticClass:"line-number"},[s._v("239")]),a("br"),a("span",{staticClass:"line-number"},[s._v("240")]),a("br"),a("span",{staticClass:"line-number"},[s._v("241")]),a("br"),a("span",{staticClass:"line-number"},[s._v("242")]),a("br"),a("span",{staticClass:"line-number"},[s._v("243")]),a("br"),a("span",{staticClass:"line-number"},[s._v("244")]),a("br"),a("span",{staticClass:"line-number"},[s._v("245")]),a("br"),a("span",{staticClass:"line-number"},[s._v("246")]),a("br"),a("span",{staticClass:"line-number"},[s._v("247")]),a("br"),a("span",{staticClass:"line-number"},[s._v("248")]),a("br"),a("span",{staticClass:"line-number"},[s._v("249")]),a("br"),a("span",{staticClass:"line-number"},[s._v("250")]),a("br"),a("span",{staticClass:"line-number"},[s._v("251")]),a("br"),a("span",{staticClass:"line-number"},[s._v("252")]),a("br"),a("span",{staticClass:"line-number"},[s._v("253")]),a("br"),a("span",{staticClass:"line-number"},[s._v("254")]),a("br"),a("span",{staticClass:"line-number"},[s._v("255")]),a("br"),a("span",{staticClass:"line-number"},[s._v("256")]),a("br"),a("span",{staticClass:"line-number"},[s._v("257")]),a("br"),a("span",{staticClass:"line-number"},[s._v("258")]),a("br"),a("span",{staticClass:"line-number"},[s._v("259")]),a("br"),a("span",{staticClass:"line-number"},[s._v("260")]),a("br"),a("span",{staticClass:"line-number"},[s._v("261")]),a("br"),a("span",{staticClass:"line-number"},[s._v("262")]),a("br"),a("span",{staticClass:"line-number"},[s._v("263")]),a("br"),a("span",{staticClass:"line-number"},[s._v("264")]),a("br"),a("span",{staticClass:"line-number"},[s._v("265")]),a("br"),a("span",{staticClass:"line-number"},[s._v("266")]),a("br"),a("span",{staticClass:"line-number"},[s._v("267")]),a("br"),a("span",{staticClass:"line-number"},[s._v("268")]),a("br"),a("span",{staticClass:"line-number"},[s._v("269")]),a("br"),a("span",{staticClass:"line-number"},[s._v("270")]),a("br"),a("span",{staticClass:"line-number"},[s._v("271")]),a("br"),a("span",{staticClass:"line-number"},[s._v("272")]),a("br"),a("span",{staticClass:"line-number"},[s._v("273")]),a("br"),a("span",{staticClass:"line-number"},[s._v("274")]),a("br"),a("span",{staticClass:"line-number"},[s._v("275")]),a("br"),a("span",{staticClass:"line-number"},[s._v("276")]),a("br"),a("span",{staticClass:"line-number"},[s._v("277")]),a("br"),a("span",{staticClass:"line-number"},[s._v("278")]),a("br"),a("span",{staticClass:"line-number"},[s._v("279")]),a("br"),a("span",{staticClass:"line-number"},[s._v("280")]),a("br"),a("span",{staticClass:"line-number"},[s._v("281")]),a("br"),a("span",{staticClass:"line-number"},[s._v("282")]),a("br"),a("span",{staticClass:"line-number"},[s._v("283")]),a("br"),a("span",{staticClass:"line-number"},[s._v("284")]),a("br"),a("span",{staticClass:"line-number"},[s._v("285")]),a("br"),a("span",{staticClass:"line-number"},[s._v("286")]),a("br"),a("span",{staticClass:"line-number"},[s._v("287")]),a("br"),a("span",{staticClass:"line-number"},[s._v("288")]),a("br"),a("span",{staticClass:"line-number"},[s._v("289")]),a("br"),a("span",{staticClass:"line-number"},[s._v("290")]),a("br"),a("span",{staticClass:"line-number"},[s._v("291")]),a("br"),a("span",{staticClass:"line-number"},[s._v("292")]),a("br"),a("span",{staticClass:"line-number"},[s._v("293")]),a("br"),a("span",{staticClass:"line-number"},[s._v("294")]),a("br"),a("span",{staticClass:"line-number"},[s._v("295")]),a("br"),a("span",{staticClass:"line-number"},[s._v("296")]),a("br"),a("span",{staticClass:"line-number"},[s._v("297")]),a("br"),a("span",{staticClass:"line-number"},[s._v("298")]),a("br"),a("span",{staticClass:"line-number"},[s._v("299")]),a("br"),a("span",{staticClass:"line-number"},[s._v("300")]),a("br"),a("span",{staticClass:"line-number"},[s._v("301")]),a("br"),a("span",{staticClass:"line-number"},[s._v("302")]),a("br"),a("span",{staticClass:"line-number"},[s._v("303")]),a("br"),a("span",{staticClass:"line-number"},[s._v("304")]),a("br"),a("span",{staticClass:"line-number"},[s._v("305")]),a("br"),a("span",{staticClass:"line-number"},[s._v("306")]),a("br"),a("span",{staticClass:"line-number"},[s._v("307")]),a("br"),a("span",{staticClass:"line-number"},[s._v("308")]),a("br"),a("span",{staticClass:"line-number"},[s._v("309")]),a("br"),a("span",{staticClass:"line-number"},[s._v("310")]),a("br"),a("span",{staticClass:"line-number"},[s._v("311")]),a("br"),a("span",{staticClass:"line-number"},[s._v("312")]),a("br"),a("span",{staticClass:"line-number"},[s._v("313")]),a("br"),a("span",{staticClass:"line-number"},[s._v("314")]),a("br"),a("span",{staticClass:"line-number"},[s._v("315")]),a("br"),a("span",{staticClass:"line-number"},[s._v("316")]),a("br"),a("span",{staticClass:"line-number"},[s._v("317")]),a("br"),a("span",{staticClass:"line-number"},[s._v("318")]),a("br"),a("span",{staticClass:"line-number"},[s._v("319")]),a("br"),a("span",{staticClass:"line-number"},[s._v("320")]),a("br"),a("span",{staticClass:"line-number"},[s._v("321")]),a("br"),a("span",{staticClass:"line-number"},[s._v("322")]),a("br"),a("span",{staticClass:"line-number"},[s._v("323")]),a("br"),a("span",{staticClass:"line-number"},[s._v("324")]),a("br"),a("span",{staticClass:"line-number"},[s._v("325")]),a("br"),a("span",{staticClass:"line-number"},[s._v("326")]),a("br"),a("span",{staticClass:"line-number"},[s._v("327")]),a("br"),a("span",{staticClass:"line-number"},[s._v("328")]),a("br"),a("span",{staticClass:"line-number"},[s._v("329")]),a("br"),a("span",{staticClass:"line-number"},[s._v("330")]),a("br"),a("span",{staticClass:"line-number"},[s._v("331")]),a("br"),a("span",{staticClass:"line-number"},[s._v("332")]),a("br"),a("span",{staticClass:"line-number"},[s._v("333")]),a("br"),a("span",{staticClass:"line-number"},[s._v("334")]),a("br"),a("span",{staticClass:"line-number"},[s._v("335")]),a("br"),a("span",{staticClass:"line-number"},[s._v("336")]),a("br"),a("span",{staticClass:"line-number"},[s._v("337")]),a("br"),a("span",{staticClass:"line-number"},[s._v("338")]),a("br"),a("span",{staticClass:"line-number"},[s._v("339")]),a("br"),a("span",{staticClass:"line-number"},[s._v("340")]),a("br"),a("span",{staticClass:"line-number"},[s._v("341")]),a("br"),a("span",{staticClass:"line-number"},[s._v("342")]),a("br"),a("span",{staticClass:"line-number"},[s._v("343")]),a("br"),a("span",{staticClass:"line-number"},[s._v("344")]),a("br"),a("span",{staticClass:"line-number"},[s._v("345")]),a("br"),a("span",{staticClass:"line-number"},[s._v("346")]),a("br"),a("span",{staticClass:"line-number"},[s._v("347")]),a("br"),a("span",{staticClass:"line-number"},[s._v("348")]),a("br"),a("span",{staticClass:"line-number"},[s._v("349")]),a("br"),a("span",{staticClass:"line-number"},[s._v("350")]),a("br"),a("span",{staticClass:"line-number"},[s._v("351")]),a("br"),a("span",{staticClass:"line-number"},[s._v("352")]),a("br"),a("span",{staticClass:"line-number"},[s._v("353")]),a("br"),a("span",{staticClass:"line-number"},[s._v("354")]),a("br"),a("span",{staticClass:"line-number"},[s._v("355")]),a("br"),a("span",{staticClass:"line-number"},[s._v("356")]),a("br"),a("span",{staticClass:"line-number"},[s._v("357")]),a("br"),a("span",{staticClass:"line-number"},[s._v("358")]),a("br"),a("span",{staticClass:"line-number"},[s._v("359")]),a("br"),a("span",{staticClass:"line-number"},[s._v("360")]),a("br"),a("span",{staticClass:"line-number"},[s._v("361")]),a("br"),a("span",{staticClass:"line-number"},[s._v("362")]),a("br"),a("span",{staticClass:"line-number"},[s._v("363")]),a("br")])])])]),s._v(" "),a("li",[a("details",{staticClass:"custom-block details"},[a("summary",[s._v("ncopy.ys")]),s._v(" "),a("ul",[a("li",[a("details",{staticClass:"custom-block details"},[a("summary",[s._v("8 次展开， CPE 为 7.5")]),s._v(" "),a("div",{staticClass:"language-ys line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#/* $begin ncopy-ys */\n##################################################################\n# ncopy.ys - Copy a src block of len words to dst.\n# Return the number of positive words (>0) contained in src.\n#\n# Include your name and ID here.\n#\n# Describe how and why you modified the baseline code.\n#\n##################################################################\n# Do not modify this portion\n# Function prologue.\n# %rdi = src, %rsi = dst, %rdx = len\nncopy:\n\n##################################################################\n# You can modify this portion\n\t# Loop header\n\t# xorq %rax,%rax\t\t# count = 0;\n  iaddq $-8, %rdx\n  jge K_Loop\n  jmp Remainder\n\nK_Loop:\n  mrmovq (%rdi), %r8\n  mrmovq 0x08(%rdi), %r9\n\tandq %r8, %r8\n\trmmovq %r8, (%rsi)\t\n\tjle Npos1\n\tiaddq $1, %rax\nNpos1:\n\trmmovq %r9, 0x08(%rsi)\n\tandq %r9, %r9\t\t\n  mrmovq 0x10(%rdi), %r8\n\tjle Npos2\n\tiaddq $1, %rax\nNpos2:\t\n  rmmovq %r8, 0x10(%rsi)\n\tandq %r8, %r8\n  mrmovq 0x18(%rdi), %r8\n\tjle Npos3\t\t\n\tiaddq $1, %rax\nNpos3:\n  rmmovq %r8, 0x18(%rsi)\n\tandq %r8, %r8\n  mrmovq 0x20(%rdi), %r8\n\tjle Npos4\t\n\tiaddq $1, %rax\nNpos4:\n  rmmovq %r8, 0x20(%rsi)\n\tandq %r8, %r8\n  mrmovq 0x28(%rdi), %r8\n\tjle Npos5\n\tiaddq $1, %rax\nNpos5:\n  rmmovq %r8, 0x28(%rsi)\n\tandq %r8, %r8\n  mrmovq 0x30(%rdi), %r8\n\tjle Npos6\n\tiaddq $1, %rax\nNpos6:\n  rmmovq %r8, 0x30(%rsi)\n\tandq %r8, %r8\n  mrmovq 0x38(%rdi), %r8\n\tjle Npos7\n\tiaddq $1, %rax\nNpos7:\n\tandq %r8, %r8\t\n  rmmovq %r8, 0x38(%rsi)\n\tjle Npos8\n\tiaddq $1, %rax\nNpos8:\n\tiaddq $0x40, %rdi\t\n\tiaddq $0x40, %rsi\n  iaddq $-8, %rdx\n  jge K_Loop\n\nRemainder:\n  iaddq $4, %rdx\n  mrmovq (%rdi), %r8\n  jl Remainder_0_3\n  rmmovq %r8, (%rsi)\n  jg Remainder_5_7\n  jmp Remainder_4\n\nRemainder_0_3:\n  iaddq $2, %rdx\n  jl Remainder_0_1\n  rmmovq %r8, (%rsi)\n  je Remainder_2\n  jg Remainder_3\n\nRemainder_0_1:\n  iaddq $1, %rdx\n  je Remainder_1\n  ret\n\nRemainder_5_7:\n  iaddq $-2, %rdx\n  jl Remainder_5\n  je Remainder_6\n\nRemainder_7:\n  andq %r8, %r8\n  mrmovq 48(%rdi), %r8\n  jle Remainder_Nop7\n  iaddq $1, %rax\nRemainder_Nop7:\n  rmmovq %r8, 48(%rsi)\n\nRemainder_6:\n  andq %r8, %r8\n  mrmovq 40(%rdi), %r8\n  jle Remainder_Nop6\n  iaddq $1, %rax\nRemainder_Nop6:\n  rmmovq %r8, 40(%rsi)\n\nRemainder_5:\n  andq %r8, %r8\n  mrmovq 32(%rdi), %r8\n  jle Remainder_Nop5\n  iaddq $1, %rax\nRemainder_Nop5:\n  rmmovq %r8, 32(%rsi)\n\nRemainder_4:\n  andq %r8, %r8\n  mrmovq 24(%rdi), %r8\n  jle Remainder_Nop4\n  iaddq $1, %rax\nRemainder_Nop4:\n  rmmovq %r8, 24(%rsi)\n\nRemainder_3:\n  andq %r8, %r8\n  mrmovq 16(%rdi), %r8\n  jle Remainder_Nop3\n  iaddq $1, %rax\nRemainder_Nop3:\n  rmmovq %r8, 16(%rsi)\n\nRemainder_2:\n  andq %r8, %r8\n  mrmovq 8(%rdi), %r8\n  jle Remainder_Nop2\n  iaddq $1, %rax\nRemainder_Nop2:\n  rmmovq %r8, 8(%rsi)\n  andq %r8, %r8\n  jle Done\n  iaddq $1, %rax\n  ret\n\nRemainder_1:\n  rmmovq %r8, (%rsi)\n  andq %r8, %r8\n  jle Done\n  iaddq $1, %rax\n  ret\n\n##################################################################\n# Do not modify the following section of code\n# Function epilogue.\nDone:\n\tret\n##################################################################\n# Keep the following label at the end of your function\nEnd:\n#/* $end ncopy-ys */\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br"),a("span",{staticClass:"line-number"},[s._v("132")]),a("br"),a("span",{staticClass:"line-number"},[s._v("133")]),a("br"),a("span",{staticClass:"line-number"},[s._v("134")]),a("br"),a("span",{staticClass:"line-number"},[s._v("135")]),a("br"),a("span",{staticClass:"line-number"},[s._v("136")]),a("br"),a("span",{staticClass:"line-number"},[s._v("137")]),a("br"),a("span",{staticClass:"line-number"},[s._v("138")]),a("br"),a("span",{staticClass:"line-number"},[s._v("139")]),a("br"),a("span",{staticClass:"line-number"},[s._v("140")]),a("br"),a("span",{staticClass:"line-number"},[s._v("141")]),a("br"),a("span",{staticClass:"line-number"},[s._v("142")]),a("br"),a("span",{staticClass:"line-number"},[s._v("143")]),a("br"),a("span",{staticClass:"line-number"},[s._v("144")]),a("br"),a("span",{staticClass:"line-number"},[s._v("145")]),a("br"),a("span",{staticClass:"line-number"},[s._v("146")]),a("br"),a("span",{staticClass:"line-number"},[s._v("147")]),a("br"),a("span",{staticClass:"line-number"},[s._v("148")]),a("br"),a("span",{staticClass:"line-number"},[s._v("149")]),a("br"),a("span",{staticClass:"line-number"},[s._v("150")]),a("br"),a("span",{staticClass:"line-number"},[s._v("151")]),a("br"),a("span",{staticClass:"line-number"},[s._v("152")]),a("br"),a("span",{staticClass:"line-number"},[s._v("153")]),a("br"),a("span",{staticClass:"line-number"},[s._v("154")]),a("br"),a("span",{staticClass:"line-number"},[s._v("155")]),a("br"),a("span",{staticClass:"line-number"},[s._v("156")]),a("br"),a("span",{staticClass:"line-number"},[s._v("157")]),a("br"),a("span",{staticClass:"line-number"},[s._v("158")]),a("br"),a("span",{staticClass:"line-number"},[s._v("159")]),a("br"),a("span",{staticClass:"line-number"},[s._v("160")]),a("br"),a("span",{staticClass:"line-number"},[s._v("161")]),a("br"),a("span",{staticClass:"line-number"},[s._v("162")]),a("br"),a("span",{staticClass:"line-number"},[s._v("163")]),a("br"),a("span",{staticClass:"line-number"},[s._v("164")]),a("br"),a("span",{staticClass:"line-number"},[s._v("165")]),a("br"),a("span",{staticClass:"line-number"},[s._v("166")]),a("br"),a("span",{staticClass:"line-number"},[s._v("167")]),a("br"),a("span",{staticClass:"line-number"},[s._v("168")]),a("br"),a("span",{staticClass:"line-number"},[s._v("169")]),a("br"),a("span",{staticClass:"line-number"},[s._v("170")]),a("br")])])])]),s._v(" "),a("li",[a("details",{staticClass:"custom-block details"},[a("summary",[s._v("9 次展开， CPE 为 7.48")]),s._v(" "),a("div",{staticClass:"language-ys line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#/* $begin ncopy-ys */\n##################################################################\n# ncopy.ys - Copy a src block of len words to dst.\n# Return the number of positive words (>0) contained in src.\n#\n# Include your name and ID here.\n#\n# Describe how and why you modified the baseline code.\n#\n##################################################################\n# Do not modify this portion\n# Function prologue.\n# %rdi = src, %rsi = dst, %rdx = len\nncopy:\n\n##################################################################\n# You can modify this portion\n  # Loop header\n  # xorq %rax,%rax    # count = 0;\n  iaddq $-9, %rdx\n  jge K_Loop\n  jmp Remainder\n\nK_Loop:\n  mrmovq (%rdi), %r8\n  mrmovq 0x08(%rdi), %r9\n  andq %r8, %r8\n  rmmovq %r8, (%rsi)  \n  jle Npos1\n  iaddq $1, %rax\nNpos1:\n  rmmovq %r9, 0x08(%rsi)\n  andq %r9, %r9    \n  mrmovq 0x10(%rdi), %r8\n  jle Npos2\n  iaddq $1, %rax\nNpos2:  \n  rmmovq %r8, 0x10(%rsi)\n  andq %r8, %r8\n  mrmovq 0x18(%rdi), %r8\n  jle Npos3    \n  iaddq $1, %rax\nNpos3:\n  rmmovq %r8, 0x18(%rsi)\n  andq %r8, %r8\n  mrmovq 0x20(%rdi), %r8\n  jle Npos4  \n  iaddq $1, %rax\nNpos4:\n  rmmovq %r8, 0x20(%rsi)\n  andq %r8, %r8\n  mrmovq 0x28(%rdi), %r8\n  jle Npos5\n  iaddq $1, %rax\nNpos5:\n  rmmovq %r8, 0x28(%rsi)\n  andq %r8, %r8\n  mrmovq 0x30(%rdi), %r8\n  jle Npos6\n  iaddq $1, %rax\nNpos6:\n  rmmovq %r8, 0x30(%rsi)\n  andq %r8, %r8\n  mrmovq 0x38(%rdi), %r8\n  jle Npos7\n  iaddq $1, %rax\nNpos7:\n  rmmovq %r8, 0x38(%rsi)\n  andq %r8, %r8  \n  mrmovq 0x40(%rdi), %r8\n  jle Npos8\n  iaddq $1, %rax\nNpos8:\n  rmmovq %r8, 0x40(%rsi)\n  andq %r8, %r8  \n  jle Npos9\n  iaddq $1, %rax\nNpos9:\n  iaddq $0x48, %rdi  \n  iaddq $0x48, %rsi\n  iaddq $-9, %rdx\n  jge K_Loop\n\nRemainder:\n  iaddq $5, %rdx\n  mrmovq (%rdi), %r8\n  jl Remainder_0_3\n  rmmovq %r8, (%rsi)\n  jg Remainder_5_8\n  jmp Remainder_4\n\nRemainder_0_3:\n  iaddq $2, %rdx\n  jl Remainder_0_1\n  rmmovq %r8, (%rsi)\n  je Remainder_2\n  jg Remainder_3\n\nRemainder_0_1:\n  iaddq $1, %rdx\n  je Remainder_1\n  ret\n\nRemainder_5_8:\n  iaddq $-2, %rdx\n  jg Remainder_7_8\n  jl Remainder_5\n  je Remainder_6\n\nRemainder_7_8:\n  iaddq $-1, %rdx\n  je Remainder_7\n\nRemainder_8:\n  andq %r8, %r8\n  mrmovq 56(%rdi), %r8\n  jle Remainder_Nop8\n  iaddq $1, %rax\nRemainder_Nop8:\n  rmmovq %r8, 56(%rsi)\n\nRemainder_7:\n  andq %r8, %r8\n  mrmovq 48(%rdi), %r8\n  jle Remainder_Nop7\n  iaddq $1, %rax\nRemainder_Nop7:\n  rmmovq %r8, 48(%rsi)\n\nRemainder_6:\n  andq %r8, %r8\n  mrmovq 40(%rdi), %r8\n  jle Remainder_Nop6\n  iaddq $1, %rax\nRemainder_Nop6:\n  rmmovq %r8, 40(%rsi)\n\nRemainder_5:\n  andq %r8, %r8\n  mrmovq 32(%rdi), %r8\n  jle Remainder_Nop5\n  iaddq $1, %rax\nRemainder_Nop5:\n  rmmovq %r8, 32(%rsi)\n\nRemainder_4:\n  andq %r8, %r8\n  mrmovq 24(%rdi), %r8\n  jle Remainder_Nop4\n  iaddq $1, %rax\nRemainder_Nop4:\n  rmmovq %r8, 24(%rsi)\n\nRemainder_3:\n  andq %r8, %r8\n  mrmovq 16(%rdi), %r8\n  jle Remainder_Nop3\n  iaddq $1, %rax\nRemainder_Nop3:\n  rmmovq %r8, 16(%rsi)\n\nRemainder_2:\n  andq %r8, %r8\n  mrmovq 8(%rdi), %r8\n  jle Remainder_Nop2\n  iaddq $1, %rax\nRemainder_Nop2:\n  rmmovq %r8, 8(%rsi)\n  andq %r8, %r8\n  jle Done\n  iaddq $1, %rax\n  ret\n\nRemainder_1:\n  rmmovq %r8, (%rsi)\n  andq %r8, %r8\n  jle Done\n  iaddq $1, %rax\n  ret\n\n##################################################################\n# Do not modify the following section of code\n# Function epilogue.\nDone:\n  ret\n##################################################################\n# Keep the following label at the end of your function\nEnd:\n#/* $end ncopy-ys */\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br"),a("span",{staticClass:"line-number"},[s._v("132")]),a("br"),a("span",{staticClass:"line-number"},[s._v("133")]),a("br"),a("span",{staticClass:"line-number"},[s._v("134")]),a("br"),a("span",{staticClass:"line-number"},[s._v("135")]),a("br"),a("span",{staticClass:"line-number"},[s._v("136")]),a("br"),a("span",{staticClass:"line-number"},[s._v("137")]),a("br"),a("span",{staticClass:"line-number"},[s._v("138")]),a("br"),a("span",{staticClass:"line-number"},[s._v("139")]),a("br"),a("span",{staticClass:"line-number"},[s._v("140")]),a("br"),a("span",{staticClass:"line-number"},[s._v("141")]),a("br"),a("span",{staticClass:"line-number"},[s._v("142")]),a("br"),a("span",{staticClass:"line-number"},[s._v("143")]),a("br"),a("span",{staticClass:"line-number"},[s._v("144")]),a("br"),a("span",{staticClass:"line-number"},[s._v("145")]),a("br"),a("span",{staticClass:"line-number"},[s._v("146")]),a("br"),a("span",{staticClass:"line-number"},[s._v("147")]),a("br"),a("span",{staticClass:"line-number"},[s._v("148")]),a("br"),a("span",{staticClass:"line-number"},[s._v("149")]),a("br"),a("span",{staticClass:"line-number"},[s._v("150")]),a("br"),a("span",{staticClass:"line-number"},[s._v("151")]),a("br"),a("span",{staticClass:"line-number"},[s._v("152")]),a("br"),a("span",{staticClass:"line-number"},[s._v("153")]),a("br"),a("span",{staticClass:"line-number"},[s._v("154")]),a("br"),a("span",{staticClass:"line-number"},[s._v("155")]),a("br"),a("span",{staticClass:"line-number"},[s._v("156")]),a("br"),a("span",{staticClass:"line-number"},[s._v("157")]),a("br"),a("span",{staticClass:"line-number"},[s._v("158")]),a("br"),a("span",{staticClass:"line-number"},[s._v("159")]),a("br"),a("span",{staticClass:"line-number"},[s._v("160")]),a("br"),a("span",{staticClass:"line-number"},[s._v("161")]),a("br"),a("span",{staticClass:"line-number"},[s._v("162")]),a("br"),a("span",{staticClass:"line-number"},[s._v("163")]),a("br"),a("span",{staticClass:"line-number"},[s._v("164")]),a("br"),a("span",{staticClass:"line-number"},[s._v("165")]),a("br"),a("span",{staticClass:"line-number"},[s._v("166")]),a("br"),a("span",{staticClass:"line-number"},[s._v("167")]),a("br"),a("span",{staticClass:"line-number"},[s._v("168")]),a("br"),a("span",{staticClass:"line-number"},[s._v("169")]),a("br"),a("span",{staticClass:"line-number"},[s._v("170")]),a("br"),a("span",{staticClass:"line-number"},[s._v("171")]),a("br"),a("span",{staticClass:"line-number"},[s._v("172")]),a("br"),a("span",{staticClass:"line-number"},[s._v("173")]),a("br"),a("span",{staticClass:"line-number"},[s._v("174")]),a("br"),a("span",{staticClass:"line-number"},[s._v("175")]),a("br"),a("span",{staticClass:"line-number"},[s._v("176")]),a("br"),a("span",{staticClass:"line-number"},[s._v("177")]),a("br"),a("span",{staticClass:"line-number"},[s._v("178")]),a("br"),a("span",{staticClass:"line-number"},[s._v("179")]),a("br"),a("span",{staticClass:"line-number"},[s._v("180")]),a("br"),a("span",{staticClass:"line-number"},[s._v("181")]),a("br"),a("span",{staticClass:"line-number"},[s._v("182")]),a("br"),a("span",{staticClass:"line-number"},[s._v("183")]),a("br"),a("span",{staticClass:"line-number"},[s._v("184")]),a("br"),a("span",{staticClass:"line-number"},[s._v("185")]),a("br"),a("span",{staticClass:"line-number"},[s._v("186")]),a("br"),a("span",{staticClass:"line-number"},[s._v("187")]),a("br"),a("span",{staticClass:"line-number"},[s._v("188")]),a("br"),a("span",{staticClass:"line-number"},[s._v("189")]),a("br")])])])])])])])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("答案验证")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" pipe\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编译添加了 iaddq 的 pipe")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" clean "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("VERSION")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("full\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试 iaddq 指令的正确性")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/ptest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SIM")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/pipe/psim "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TFLAGS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-i\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检查 ncopy.ys 的正确性")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/pipe\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检查代码代度 ")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" ncopy.yo\n  ./check-len.pl "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" ncopy.yo\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检查代码正确性 ")]),s._v("\n  ./correctness.pl\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检查代码性能")]),s._v("\n  ./benchmark.pl\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])])])])])}),[],!1,null,null,null);n.default=e.exports}}]);