(window.webpackJsonp=window.webpackJsonp||[]).push([[173],{743:function(t,s,a){"use strict";a.r(s);var l=a(12),i=function(t){t.options.__data__block__={markmap_1a96284d:"- [DMA方式](#dma方式)\n  - [DMA 方式的特点](#dma-方式的特点)\n  - [DMA 接口的功能和组成](#dma-接口的功能和组成)\n  - [DMA 的工作过程](#dma-的工作过程)\n  - [DMA 接口与系统的连接方式](#dma-接口与系统的连接方式)\n  - [DMA 方式与程序中断方式的比较](#dma-方式与程序中断方式的比较)\n  - [DMA 接口的类型](#dma-接口的类型)"}},r=Object(l.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"dma方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dma方式"}},[t._v("#")]),t._v(" DMA方式")]),t._v(" "),a("Markmap",{attrs:{id:"markmap_1a96284d",code:t.$dataBlock.markmap_1a96284d}}),a("h2",{attrs:{id:"dma-方式的特点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dma-方式的特点"}},[t._v("#")]),t._v(" DMA 方式的特点")]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("DMA 和程序中断两种方式的数据通路")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210914103439-2021-09-14-10-34-39.png",alt:"20210914103439-2021-09-14-10-34-39"}})]),t._v(" "),a("ul",[a("li",[t._v("中断方式 CPU 必须中断当前正在运行的程序来完成数据输入输出操作\n"),a("ul",[a("li",[t._v("会降低 CPU 的效率")])])]),t._v(" "),a("li",[t._v("DMA 方式\n"),a("ul",[a("li",[t._v("数据输入输出不再需要 CPU 作为中介")])])])])]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("DMA 与主存交换数据的三种方式")]),t._v(" "),a("ul",[a("li",[t._v("停止 CPU 访问主存\n"),a("ul",[a("li",[t._v("控制简单")]),t._v(" "),a("li",[t._v("CPU 处于不工作状态或保持状态\n"),a("ul",[a("li",[t._v("未充分发挥 CPU 对主存的利用率")])])])]),t._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[t._v("示意图")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210914103825-2021-09-14-10-38-25.png",alt:"20210914103825-2021-09-14-10-38-25"}})])])]),t._v(" "),a("li",[t._v("周期挪用(周期窃取)\n"),a("ul",[a("li",[t._v("DMA 访问主存有三种可能\n"),a("ul",[a("li",[t._v("CPU 此时不访存")]),t._v(" "),a("li",[t._v("CPU 正在访存\n"),a("ul",[a("li",[t._v("DMA 不能抢占")])])]),t._v(" "),a("li",[t._v("CPU 与 DMA 同时请求访存\n"),a("ul",[a("li",[t._v("此时 CPU 将总线控制权让给 DMA")])])])])]),t._v(" "),a("li",[t._v("分成一个或几个小周期进行 DMA 访存")]),t._v(" "),a("li",[t._v("Memory Wall ⌛tag+todo")])]),t._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[t._v("示意图")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210914104351-2021-09-14-10-43-51.png",alt:"20210914104351-2021-09-14-10-43-51"}})])])]),t._v(" "),a("li",[t._v("DMA 和 CPU 交替访问\n"),a("ul",[a("li",[a("mjx-container",{staticClass:"MathJax",attrs:{jax:"SVG"}},[a("svg",{staticStyle:{"vertical-align":"-0.339ex"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"2.605ex",height:"1.934ex",role:"img",focusable:"false",viewBox:"0 -705 1151.6 855","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[a("defs",[a("path",{attrs:{id:"MJX-1139-TEX-I-1D436",d:"M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"}}),a("path",{attrs:{id:"MJX-1139-TEX-N-31",d:"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"}})]),a("g",{attrs:{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"}},[a("g",{attrs:{"data-mml-node":"math"}},[a("g",{attrs:{"data-mml-node":"msub"}},[a("g",{attrs:{"data-mml-node":"mi"}},[a("use",{attrs:{"data-c":"1D436","xlink:href":"#MJX-1139-TEX-I-1D436"}})]),a("g",{attrs:{"data-mml-node":"mn",transform:"translate(748,-150) scale(0.707)"}},[a("use",{attrs:{"data-c":"31","xlink:href":"#MJX-1139-TEX-N-31"}})])])])])])]),t._v(" 专供 DMA 访存")],1),t._v(" "),a("li",[a("mjx-container",{staticClass:"MathJax",attrs:{jax:"SVG"}},[a("svg",{staticStyle:{"vertical-align":"-0.339ex"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"2.605ex",height:"1.934ex",role:"img",focusable:"false",viewBox:"0 -705 1151.6 855","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[a("defs",[a("path",{attrs:{id:"MJX-1279-TEX-I-1D436",d:"M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"}}),a("path",{attrs:{id:"MJX-1279-TEX-N-32",d:"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"}})]),a("g",{attrs:{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"}},[a("g",{attrs:{"data-mml-node":"math"}},[a("g",{attrs:{"data-mml-node":"msub"}},[a("g",{attrs:{"data-mml-node":"mi"}},[a("use",{attrs:{"data-c":"1D436","xlink:href":"#MJX-1279-TEX-I-1D436"}})]),a("g",{attrs:{"data-mml-node":"mn",transform:"translate(748,-150) scale(0.707)"}},[a("use",{attrs:{"data-c":"32","xlink:href":"#MJX-1279-TEX-N-32"}})])])])])])]),t._v(" 专供 CPU 访存")],1),t._v(" "),a("li",[t._v("不需要 申请建立和归还 总线的使用权")])]),t._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[t._v("示意图")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210914104633-2021-09-14-10-46-33.png",alt:"20210914104633-2021-09-14-10-46-33"}})])])])])]),t._v(" "),a("h2",{attrs:{id:"dma-接口的功能和组成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dma-接口的功能和组成"}},[t._v("#")]),t._v(" DMA 接口的功能和组成")]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("DMA 接口功能")]),t._v(" "),a("ul",[a("li",[t._v("向 CPU "),a("strong",[t._v("申请")]),t._v(" DMA 传送")]),t._v(" "),a("li",[t._v("处理总线 "),a("strong",[t._v("控制权的转交")])]),t._v(" "),a("li",[a("strong",[t._v("管理")]),t._v(" 系统总线、"),a("strong",[t._v("控制")]),t._v(" 数据传送")]),t._v(" "),a("li",[a("strong",[t._v("确定")]),t._v(" 数据传送的 "),a("strong",[t._v("首地址和长度")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("修正")]),t._v(" 传送过程中的数据 "),a("strong",[t._v("地址")]),t._v(" 和 "),a("strong",[t._v("长度")])])])]),t._v(" "),a("li",[t._v("DMA 传送结束时，"),a("strong",[t._v("给出操作完成信号")])])])]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("DMA 接口的组成")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210914105020-2021-09-14-10-50-20.png",alt:"20210914105020-2021-09-14-10-50-20"}})]),t._v(" "),a("ul",[a("li",[t._v("AR\n"),a("ul",[a("li",[t._v("地址")])])]),t._v(" "),a("li",[t._v("WC\n"),a("ul",[a("li",[t._v("计数器，每传输一个数据，其加 1")])])]),t._v(" "),a("li",[t._v("BR\n"),a("ul",[a("li",[t._v("数据缓冲区")])])]),t._v(" "),a("li",[t._v("DAR\n"),a("ul",[a("li",[t._v("设备地址寄存器")])])]),t._v(" "),a("li",[t._v("DREQ 设备请求")]),t._v(" "),a("li",[t._v("DACK 应答信号")]),t._v(" "),a("li",[t._v("HRQ 总线使用请求使用信号")]),t._v(" "),a("li",[t._v("HLDA 应答信号")]),t._v(" "),a("li",[t._v("中断机构\n"),a("ul",[a("li",[t._v("由 CPU 作数据传输结束后的相关处理")])])])])]),t._v(" "),a("h2",{attrs:{id:"dma-的工作过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dma-的工作过程"}},[t._v("#")]),t._v(" DMA 的工作过程")]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("预处理")]),t._v(" "),a("ul",[a("li",[t._v("通过几条输入输出指令预置如下信息\n"),a("ul",[a("li",[t._v("通知 DMA 控制逻辑传送方向（入/出）")]),t._v(" "),a("li",[t._v("设备地址 "),a("mjx-container",{staticClass:"MathJax",attrs:{jax:"SVG"}},[a("svg",{staticStyle:{"vertical-align":"-0.025ex"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"3.706ex",height:"1.181ex",role:"img",focusable:"false",viewBox:"0 -511 1638 522","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[a("defs",[a("path",{attrs:{id:"MJX-1280-TEX-N-27F6",d:"M84 237T84 250T98 270H1444Q1328 357 1301 493Q1301 494 1301 496T1300 499Q1300 511 1317 511H1320Q1329 511 1332 510T1338 506T1341 497T1344 481T1352 456Q1374 389 1425 336T1544 261Q1553 258 1553 250Q1553 244 1548 241T1524 231T1486 212Q1445 186 1415 152T1370 85T1349 35T1341 4Q1339 -6 1336 -8T1320 -11Q1300 -11 1300 0Q1300 7 1305 25Q1337 151 1444 230H98Q84 237 84 250Z"}})]),a("g",{attrs:{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"}},[a("g",{attrs:{"data-mml-node":"math"}},[a("g",{attrs:{"data-mml-node":"mo"}},[a("use",{attrs:{"data-c":"27F6","xlink:href":"#MJX-1280-TEX-N-27F6"}})])])])])]),t._v(" DMA 的 DAR")],1),t._v(" "),a("li",[t._v("主存地址 "),a("mjx-container",{staticClass:"MathJax",attrs:{jax:"SVG"}},[a("svg",{staticStyle:{"vertical-align":"-0.025ex"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"3.706ex",height:"1.181ex",role:"img",focusable:"false",viewBox:"0 -511 1638 522","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[a("defs",[a("path",{attrs:{id:"MJX-1280-TEX-N-27F6",d:"M84 237T84 250T98 270H1444Q1328 357 1301 493Q1301 494 1301 496T1300 499Q1300 511 1317 511H1320Q1329 511 1332 510T1338 506T1341 497T1344 481T1352 456Q1374 389 1425 336T1544 261Q1553 258 1553 250Q1553 244 1548 241T1524 231T1486 212Q1445 186 1415 152T1370 85T1349 35T1341 4Q1339 -6 1336 -8T1320 -11Q1300 -11 1300 0Q1300 7 1305 25Q1337 151 1444 230H98Q84 237 84 250Z"}})]),a("g",{attrs:{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"}},[a("g",{attrs:{"data-mml-node":"math"}},[a("g",{attrs:{"data-mml-node":"mo"}},[a("use",{attrs:{"data-c":"27F6","xlink:href":"#MJX-1280-TEX-N-27F6"}})])])])])]),t._v(" DMA 的 AR")],1),t._v(" "),a("li",[t._v("传送字数 "),a("mjx-container",{staticClass:"MathJax",attrs:{jax:"SVG"}},[a("svg",{staticStyle:{"vertical-align":"-0.025ex"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"3.706ex",height:"1.181ex",role:"img",focusable:"false",viewBox:"0 -511 1638 522","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[a("defs",[a("path",{attrs:{id:"MJX-1280-TEX-N-27F6",d:"M84 237T84 250T98 270H1444Q1328 357 1301 493Q1301 494 1301 496T1300 499Q1300 511 1317 511H1320Q1329 511 1332 510T1338 506T1341 497T1344 481T1352 456Q1374 389 1425 336T1544 261Q1553 258 1553 250Q1553 244 1548 241T1524 231T1486 212Q1445 186 1415 152T1370 85T1349 35T1341 4Q1339 -6 1336 -8T1320 -11Q1300 -11 1300 0Q1300 7 1305 25Q1337 151 1444 230H98Q84 237 84 250Z"}})]),a("g",{attrs:{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"}},[a("g",{attrs:{"data-mml-node":"math"}},[a("g",{attrs:{"data-mml-node":"mo"}},[a("use",{attrs:{"data-c":"27F6","xlink:href":"#MJX-1280-TEX-N-27F6"}})])])])])]),t._v(" DMA 的 WC")],1)])])])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("数据传送示意图")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210914110101-2021-09-14-11-01-01.png",alt:"20210914110101-2021-09-14-11-01-01"}})])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("传送过程示意")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210914110014-2021-09-14-11-00-14.png",alt:"20210914110014-2021-09-14-11-00-14"}})])]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("数据传送过程")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210914110553-2021-09-14-11-05-53.png",alt:"20210914110553-2021-09-14-11-05-53"}})])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("后处理")]),t._v(" "),a("ul",[a("li",[t._v("校验送入主存的数是否正确")]),t._v(" "),a("li",[t._v("是否继续用 DMA")]),t._v(" "),a("li",[t._v("测试传送过程是否正确，错则转诊断程序")])]),t._v(" "),a("p",[t._v("由中断服务程序完成")])]),t._v(" "),a("h2",{attrs:{id:"dma-接口与系统的连接方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dma-接口与系统的连接方式"}},[t._v("#")]),t._v(" DMA 接口与系统的连接方式")]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("具有公共请求线的 DMA 请求")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210922111314-2021-09-22-11-13-14.png",alt:"20210922111314-2021-09-22-11-13-14"}})])]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("独立的 DMA 请求")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210922111534-2021-09-22-11-15-34.png",alt:"20210922111534-2021-09-22-11-15-34"}})])]),t._v(" "),a("h2",{attrs:{id:"dma-方式与程序中断方式的比较"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dma-方式与程序中断方式的比较"}},[t._v("#")]),t._v(" DMA 方式与程序中断方式的比较")]),t._v(" "),a("h2",{attrs:{id:"dma-接口的类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dma-接口的类型"}},[t._v("#")]),t._v(" DMA 接口的类型")]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("选择型")]),t._v(" "),a("ul",[a("li",[t._v("在物理上连接多个设备")]),t._v(" "),a("li",[t._v("在逻辑上只允许连接一个设备")])]),t._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[t._v("示意图")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210922112019-2021-09-22-11-20-19.png",alt:"20210922112019-2021-09-22-11-20-19"}})])])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("多路型")]),t._v(" "),a("ul",[a("li",[t._v("在 物理上 连接 多个 设备")]),t._v(" "),a("li",[t._v("在 逻辑上 允许连接 多个 设备同时工作\n"),a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210922112142-2021-09-22-11-21-42.png",alt:"20210922112142-2021-09-22-11-21-42"}})])])]),t._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[t._v("多路型 DMA 接口的工作原理")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210922112424-2021-09-22-11-24-24.png",alt:"20210922112424-2021-09-22-11-24-24"}})]),t._v(" "),a("ul",[a("li",[t._v("速度越高的设备，优先级越高")])])])],1)}),[],!1,null,null,null);"function"==typeof i&&i(r);s.default=r.exports}}]);