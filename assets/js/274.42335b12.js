(window.webpackJsonp=window.webpackJsonp||[]).push([[274],{822:function(t,s,l){"use strict";l.r(s);var i=l(12),c=function(t){t.options.__data__block__={markmap_1a96284d:"- [ICMP互联网控制报文协议](#icmp互联网控制报文协议)\n  - [ICMP 报文](#icmp-报文)\n  - [ICMP的应用举例: Traceroute](#icmp的应用举例-traceroute)"}},a=Object(i.a)({},(function(){var t=this,s=t.$createElement,l=t._self._c||s;return l("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[l("h1",{attrs:{id:"icmp互联网控制报文协议"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#icmp互联网控制报文协议"}},[t._v("#")]),t._v(" ICMP互联网控制报文协议")]),t._v(" "),l("Markmap",{attrs:{id:"markmap_1a96284d",code:t.$dataBlock.markmap_1a96284d}}),l("div",{staticClass:"custom-block tip"},[l("p",{staticClass:"custom-block-title"},[t._v("互联网控制报文协议 ICMP (Internet Control MessageProtocol) 支持主机或路由器")]),t._v(" "),l("ul",[l("li",[t._v("差错(或异常)报告")]),t._v(" "),l("li",[t._v("网络探询")])])]),t._v(" "),l("h2",{attrs:{id:"icmp-报文"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#icmp-报文"}},[t._v("#")]),t._v(" ICMP 报文")]),t._v(" "),l("div",{staticClass:"custom-block note"},[l("p",{staticClass:"custom-block-title"},[t._v("两类 ICMP 报文")]),t._v(" "),l("ul",[l("li",[l("div",{staticClass:"custom-block tip"},[l("p",{staticClass:"custom-block-title"},[t._v("差错报告报文(5 种)")]),t._v(" "),l("ul",[l("li",[t._v("目的不可达")]),t._v(" "),l("li",[t._v("源抑制(Source Quench)\n"),l("ul",[l("li",[t._v("路由器发现缓存已满时，路由器构造 ICMP 报文，向源主机发送，从而降低源主机发送数据的速度\n"),l("ul",[l("li",[t._v("现阶段并未采用")])])])])]),t._v(" "),l("li",[t._v("超时/超期\n"),l("ul",[l("li",[t._v("TTL 超期")])])]),t._v(" "),l("li",[t._v("参数问题\n"),l("ul",[l("li",[t._v("路由器判定报文头部有问题")])])]),t._v(" "),l("li",[t._v("重定向 (Redirect)\n"),l("ul",[l("li",[t._v("告知源主机重定向网关")])])])])])]),t._v(" "),l("li",[l("div",{staticClass:"custom-block tip"},[l("p",{staticClass:"custom-block-title"},[t._v("网络探询报文(2组)")]),t._v(" "),l("ul",[l("li",[t._v("回声(Echo)请求与应答报文(Reply)")]),t._v(" "),l("li",[t._v("时间戳请求与应答报文")])])])])])]),t._v(" "),l("div",{staticClass:"custom-block tip"},[l("p",{staticClass:"custom-block-title"},[t._v("ICMP 报文表")]),t._v(" "),l("table",[l("thead",[l("tr",[l("th",{staticStyle:{"text-align":"center"}},[t._v("类型(Type)")]),t._v(" "),l("th",{staticStyle:{"text-align":"center"}},[t._v("编码(Code)")]),t._v(" "),l("th",{staticStyle:{"text-align":"left"}},[t._v("description")])])]),t._v(" "),l("tbody",[l("tr",[l("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),l("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("回声应答 (ping)")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"center"}},[t._v("3")]),t._v(" "),l("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("目的网络不可达")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"center"}},[t._v("3")]),t._v(" "),l("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("目的主机不可达")])])])]),t._v(" "),l("p",[t._v("3 2 目的协议不可达\n3 3 目的端口不可达\n3 6 目的网络未知\n3 7 目的主机未知\n4 0 源抑制(拥塞控制-未用)\n8 0 回声请求(ping)\n9 0 路由通告\n10 0 路由发现\n11 0 TTL超期\n12 0 IP首部错误")])]),t._v(" "),l("div",{staticClass:"custom-block warning"},[l("p",{staticClass:"custom-block-title"},[t._v("例外情况")]),t._v(" "),l("ul",[l("li",[l("div",{staticClass:"custom-block note"},[l("p",{staticClass:"custom-block-title"},[t._v("几种不发送 ICMP 差错报告报文的特殊情况")]),t._v(" "),l("ul",[l("li",[t._v("对 ICMP 差错报告报文不再发送 ICMP 差错报告报文")])])])]),t._v(" "),l("li",[l("div",{staticClass:"custom-block note"},[l("p",{staticClass:"custom-block-title"},[t._v("几种 ICMP 报文已不再使用")]),t._v(" "),l("ul",[l("li",[t._v("信息请求与应答报文")]),t._v(" "),l("li",[t._v("子网掩码请求和应答报文")]),t._v(" "),l("li",[t._v("路由器询问和通告报文")])])])])])]),t._v(" "),l("div",{staticClass:"custom-block note"},[l("p",{staticClass:"custom-block-title"},[t._v("ICMP报文的格式")]),t._v(" "),l("ul",[l("li",[l("div",{staticClass:"custom-block tip"},[l("p",{staticClass:"custom-block-title"},[t._v("ICMP 报文封装到 IP 数据报中传输")]),t._v(" "),l("ul",[l("li",[l("details",{staticClass:"custom-block details"},[l("summary",[t._v("示意图")]),t._v(" "),l("ul",[l("li",[l("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210917165545-2021-09-17-16-55-45.png",alt:"20210917165545-2021-09-17-16-55-45"}})])])])])])])]),t._v(" "),l("li",[l("details",{staticClass:"custom-block details"},[l("summary",[t._v("ICMP 差错报告报文数据封装示意图")]),t._v(" "),l("p",[l("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210917165652-2021-09-17-16-56-52.png",alt:"20210917165652-2021-09-17-16-56-52"}})])])])])]),t._v(" "),l("h2",{attrs:{id:"icmp的应用举例-traceroute"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#icmp的应用举例-traceroute"}},[t._v("#")]),t._v(" ICMP的应用举例: Traceroute")]),t._v(" "),l("div",{staticClass:"custom-block note"},[l("p",{staticClass:"custom-block-title"},[t._v("源主机向目的主机发送一系列 UDP 数据报")])]),t._v(" "),l("div",{staticClass:"custom-block note"},[l("p",{staticClass:"custom-block-title"},[t._v("当第 n 组数据报(TTL=n)到达第 n 个路由器时")])]),t._v(" "),l("div",{staticClass:"custom-block warning"},[l("p",{staticClass:"custom-block-title"},[t._v("停止准则")])])],1)}),[],!1,null,null,null);"function"==typeof c&&c(a);s.default=a.exports}}]);