<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第 4 章 处理器体系结构 | mznote</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/img/note.png">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" def=""></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/d3@6"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/markmap-view"></script>
    <script src="https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-XF5DN574WN"></script>
    <script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-XF5DN574WN');</script>
    <meta name="description" content="计算机基础知识博客, 个人博客">
    <meta name="keywords" content="个人技术博客,前端,技术文档,学习,c,c++,python,css3,html5,git,github,markdown">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/assets/css/0.styles.b7548b6d.css" as="style"><link rel="preload" href="/assets/js/app.095f6a1f.js" as="script"><link rel="preload" href="/assets/js/2.6bb19404.js" as="script"><link rel="preload" href="/assets/js/3.6d4bd9fe.js" as="script"><link rel="preload" href="/assets/js/98.7925b0c9.js" as="script"><link rel="prefetch" href="/assets/js/10.494491dd.js"><link rel="prefetch" href="/assets/js/100.445a49dc.js"><link rel="prefetch" href="/assets/js/101.1d120680.js"><link rel="prefetch" href="/assets/js/102.7d38a1c6.js"><link rel="prefetch" href="/assets/js/103.33d325d0.js"><link rel="prefetch" href="/assets/js/104.94fbd3e4.js"><link rel="prefetch" href="/assets/js/105.5041358a.js"><link rel="prefetch" href="/assets/js/106.ecbd6f91.js"><link rel="prefetch" href="/assets/js/107.61002796.js"><link rel="prefetch" href="/assets/js/108.663b0f72.js"><link rel="prefetch" href="/assets/js/109.65ca5949.js"><link rel="prefetch" href="/assets/js/11.3b561095.js"><link rel="prefetch" href="/assets/js/110.79e92a1e.js"><link rel="prefetch" href="/assets/js/111.6ebb7462.js"><link rel="prefetch" href="/assets/js/112.89ec46d8.js"><link rel="prefetch" href="/assets/js/113.a8de6828.js"><link rel="prefetch" href="/assets/js/114.84e36fe5.js"><link rel="prefetch" href="/assets/js/115.fb5f54e6.js"><link rel="prefetch" href="/assets/js/116.3abf0f89.js"><link rel="prefetch" href="/assets/js/117.7f428d6c.js"><link rel="prefetch" href="/assets/js/118.9c0b2ba8.js"><link rel="prefetch" href="/assets/js/119.08d71f5c.js"><link rel="prefetch" href="/assets/js/12.c5d338bc.js"><link rel="prefetch" href="/assets/js/120.e5cdff04.js"><link rel="prefetch" href="/assets/js/121.aec618f0.js"><link rel="prefetch" href="/assets/js/122.ad75fdea.js"><link rel="prefetch" href="/assets/js/123.be419d92.js"><link rel="prefetch" href="/assets/js/124.287b7fef.js"><link rel="prefetch" href="/assets/js/125.1ce6a62e.js"><link rel="prefetch" href="/assets/js/126.61c19597.js"><link rel="prefetch" href="/assets/js/127.3a39216d.js"><link rel="prefetch" href="/assets/js/128.d0796efe.js"><link rel="prefetch" href="/assets/js/129.674ca3bf.js"><link rel="prefetch" href="/assets/js/13.89018181.js"><link rel="prefetch" href="/assets/js/130.a196f0ff.js"><link rel="prefetch" href="/assets/js/131.5ceae5b3.js"><link rel="prefetch" href="/assets/js/132.1f1df86b.js"><link rel="prefetch" href="/assets/js/133.5ff23d0c.js"><link rel="prefetch" href="/assets/js/134.d48d2bfb.js"><link rel="prefetch" href="/assets/js/135.034f0e0f.js"><link rel="prefetch" href="/assets/js/136.004d8b5b.js"><link rel="prefetch" href="/assets/js/137.d85175ad.js"><link rel="prefetch" href="/assets/js/138.8e156841.js"><link rel="prefetch" href="/assets/js/139.ac8f1585.js"><link rel="prefetch" href="/assets/js/14.bc808c38.js"><link rel="prefetch" href="/assets/js/140.de8cdddc.js"><link rel="prefetch" href="/assets/js/141.531b6dd2.js"><link rel="prefetch" href="/assets/js/142.f2235d30.js"><link rel="prefetch" href="/assets/js/143.71ad6ab0.js"><link rel="prefetch" href="/assets/js/144.2bbd7bed.js"><link rel="prefetch" href="/assets/js/145.bacdda91.js"><link rel="prefetch" href="/assets/js/146.17b42b03.js"><link rel="prefetch" href="/assets/js/147.deed8eea.js"><link rel="prefetch" href="/assets/js/148.4cda262d.js"><link rel="prefetch" href="/assets/js/149.3efd5184.js"><link rel="prefetch" href="/assets/js/15.0b48cdef.js"><link rel="prefetch" href="/assets/js/150.b2cd8144.js"><link rel="prefetch" href="/assets/js/151.b0cecdb1.js"><link rel="prefetch" href="/assets/js/152.29206387.js"><link rel="prefetch" href="/assets/js/153.f48bceb4.js"><link rel="prefetch" href="/assets/js/154.1e4a452e.js"><link rel="prefetch" href="/assets/js/155.44a5d1d2.js"><link rel="prefetch" href="/assets/js/156.06967467.js"><link rel="prefetch" href="/assets/js/157.edb441f9.js"><link rel="prefetch" href="/assets/js/158.d50e91dc.js"><link rel="prefetch" href="/assets/js/159.292cf499.js"><link rel="prefetch" href="/assets/js/16.43137832.js"><link rel="prefetch" href="/assets/js/160.6d859c92.js"><link rel="prefetch" href="/assets/js/161.46411040.js"><link rel="prefetch" href="/assets/js/162.eb19ae85.js"><link rel="prefetch" href="/assets/js/163.1c9f0ce4.js"><link rel="prefetch" href="/assets/js/164.127bd326.js"><link rel="prefetch" href="/assets/js/165.010f558e.js"><link rel="prefetch" href="/assets/js/166.1ada777c.js"><link rel="prefetch" href="/assets/js/167.f825f7e3.js"><link rel="prefetch" href="/assets/js/168.5e679311.js"><link rel="prefetch" href="/assets/js/169.08ca9e36.js"><link rel="prefetch" href="/assets/js/17.1236efa3.js"><link rel="prefetch" href="/assets/js/170.ffcdd3bb.js"><link rel="prefetch" href="/assets/js/171.1cff3d08.js"><link rel="prefetch" href="/assets/js/172.8e22c29c.js"><link rel="prefetch" href="/assets/js/173.14d0b4cb.js"><link rel="prefetch" href="/assets/js/174.12a70c34.js"><link rel="prefetch" href="/assets/js/175.76382f27.js"><link rel="prefetch" href="/assets/js/176.7df0d862.js"><link rel="prefetch" href="/assets/js/177.05db80cf.js"><link rel="prefetch" href="/assets/js/178.456f29eb.js"><link rel="prefetch" href="/assets/js/179.7f4c20a2.js"><link rel="prefetch" href="/assets/js/18.b1c77070.js"><link rel="prefetch" href="/assets/js/180.fda6f184.js"><link rel="prefetch" href="/assets/js/181.839acd60.js"><link rel="prefetch" href="/assets/js/182.b7b6a43f.js"><link rel="prefetch" href="/assets/js/183.ab2f05d8.js"><link rel="prefetch" href="/assets/js/184.fad21c92.js"><link rel="prefetch" href="/assets/js/185.d24a44da.js"><link rel="prefetch" href="/assets/js/186.9d066e53.js"><link rel="prefetch" href="/assets/js/187.96e7bdd8.js"><link rel="prefetch" href="/assets/js/188.c13b3ed3.js"><link rel="prefetch" href="/assets/js/189.879efb22.js"><link rel="prefetch" href="/assets/js/19.d79c58a1.js"><link rel="prefetch" href="/assets/js/190.a7096791.js"><link rel="prefetch" href="/assets/js/191.9e78de26.js"><link rel="prefetch" href="/assets/js/192.3b4df334.js"><link rel="prefetch" href="/assets/js/193.f9a14cad.js"><link rel="prefetch" href="/assets/js/194.9ed427d7.js"><link rel="prefetch" href="/assets/js/195.ee62ad15.js"><link rel="prefetch" href="/assets/js/196.5eadb168.js"><link rel="prefetch" href="/assets/js/197.19cb6f7b.js"><link rel="prefetch" href="/assets/js/198.33798b2a.js"><link rel="prefetch" href="/assets/js/199.c3cf1fe3.js"><link rel="prefetch" href="/assets/js/20.dd41c2ed.js"><link rel="prefetch" href="/assets/js/200.4bb57f89.js"><link rel="prefetch" href="/assets/js/201.578612bb.js"><link rel="prefetch" href="/assets/js/202.d7a48484.js"><link rel="prefetch" href="/assets/js/203.d11aed73.js"><link rel="prefetch" href="/assets/js/204.e74a7f9d.js"><link rel="prefetch" href="/assets/js/205.8e68b482.js"><link rel="prefetch" href="/assets/js/206.1c7d40bd.js"><link rel="prefetch" href="/assets/js/207.abef77d7.js"><link rel="prefetch" href="/assets/js/208.b0e820df.js"><link rel="prefetch" href="/assets/js/209.a567a864.js"><link rel="prefetch" href="/assets/js/21.eea6bdce.js"><link rel="prefetch" href="/assets/js/210.02af4494.js"><link rel="prefetch" href="/assets/js/211.caf7e3fe.js"><link rel="prefetch" href="/assets/js/212.1509c5da.js"><link rel="prefetch" href="/assets/js/213.25d1fe48.js"><link rel="prefetch" href="/assets/js/214.c49b28fe.js"><link rel="prefetch" href="/assets/js/215.43d106a8.js"><link rel="prefetch" href="/assets/js/216.97ed69f8.js"><link rel="prefetch" href="/assets/js/217.189b5316.js"><link rel="prefetch" href="/assets/js/218.f8eec35b.js"><link rel="prefetch" href="/assets/js/219.917288c7.js"><link rel="prefetch" href="/assets/js/22.ff0c971e.js"><link rel="prefetch" href="/assets/js/220.1ee01431.js"><link rel="prefetch" href="/assets/js/221.2f54ce07.js"><link rel="prefetch" href="/assets/js/222.9905809e.js"><link rel="prefetch" href="/assets/js/223.8c3f0494.js"><link rel="prefetch" href="/assets/js/224.ae6e47e8.js"><link rel="prefetch" href="/assets/js/225.c9ae592f.js"><link rel="prefetch" href="/assets/js/226.3b025908.js"><link rel="prefetch" href="/assets/js/227.6f4e9a52.js"><link rel="prefetch" href="/assets/js/228.ca0cfe8b.js"><link rel="prefetch" href="/assets/js/229.3433290b.js"><link rel="prefetch" href="/assets/js/23.ca2349d0.js"><link rel="prefetch" href="/assets/js/230.efb73cea.js"><link rel="prefetch" href="/assets/js/231.7b4b904f.js"><link rel="prefetch" href="/assets/js/232.1f3a96cd.js"><link rel="prefetch" href="/assets/js/233.53d419ad.js"><link rel="prefetch" href="/assets/js/234.0dc63c2c.js"><link rel="prefetch" href="/assets/js/235.130f09e8.js"><link rel="prefetch" href="/assets/js/236.af6fda35.js"><link rel="prefetch" href="/assets/js/237.c61e25ba.js"><link rel="prefetch" href="/assets/js/238.0ad2ec5f.js"><link rel="prefetch" href="/assets/js/239.e649c2a6.js"><link rel="prefetch" href="/assets/js/24.7abc0828.js"><link rel="prefetch" href="/assets/js/240.ae9d9ac3.js"><link rel="prefetch" href="/assets/js/241.7df959df.js"><link rel="prefetch" href="/assets/js/242.4ae5abf9.js"><link rel="prefetch" href="/assets/js/243.b9bfcba5.js"><link rel="prefetch" href="/assets/js/244.14e35685.js"><link rel="prefetch" href="/assets/js/245.fa48c854.js"><link rel="prefetch" href="/assets/js/246.56ec32b5.js"><link rel="prefetch" href="/assets/js/247.d7eef1f1.js"><link rel="prefetch" href="/assets/js/248.5b71c9af.js"><link rel="prefetch" href="/assets/js/249.f9f5e0ec.js"><link rel="prefetch" href="/assets/js/25.78279337.js"><link rel="prefetch" href="/assets/js/250.3c7a188c.js"><link rel="prefetch" href="/assets/js/251.fa1f591f.js"><link rel="prefetch" href="/assets/js/252.9840ca7b.js"><link rel="prefetch" href="/assets/js/253.9bec1d1d.js"><link rel="prefetch" href="/assets/js/254.501ec471.js"><link rel="prefetch" href="/assets/js/255.2b24b056.js"><link rel="prefetch" href="/assets/js/256.25cda263.js"><link rel="prefetch" href="/assets/js/257.00f5862c.js"><link rel="prefetch" href="/assets/js/258.7b0a0fe7.js"><link rel="prefetch" href="/assets/js/259.9065e975.js"><link rel="prefetch" href="/assets/js/26.317c2e67.js"><link rel="prefetch" href="/assets/js/260.1e2db99f.js"><link rel="prefetch" href="/assets/js/261.45463f74.js"><link rel="prefetch" href="/assets/js/262.780183d7.js"><link rel="prefetch" href="/assets/js/263.71e994c1.js"><link rel="prefetch" href="/assets/js/264.51f2afd6.js"><link rel="prefetch" href="/assets/js/265.bebf5d26.js"><link rel="prefetch" href="/assets/js/266.0f1f8efe.js"><link rel="prefetch" href="/assets/js/267.780f225e.js"><link rel="prefetch" href="/assets/js/268.5fb493e2.js"><link rel="prefetch" href="/assets/js/269.3497cb87.js"><link rel="prefetch" href="/assets/js/27.b530259c.js"><link rel="prefetch" href="/assets/js/270.d08461de.js"><link rel="prefetch" href="/assets/js/271.6ea44863.js"><link rel="prefetch" href="/assets/js/272.3c81f719.js"><link rel="prefetch" href="/assets/js/273.bc63655d.js"><link rel="prefetch" href="/assets/js/274.42335b12.js"><link rel="prefetch" href="/assets/js/275.a4b0b2f6.js"><link rel="prefetch" href="/assets/js/276.8c742b20.js"><link rel="prefetch" href="/assets/js/277.9c930787.js"><link rel="prefetch" href="/assets/js/278.a7086dae.js"><link rel="prefetch" href="/assets/js/279.bfccffdd.js"><link rel="prefetch" href="/assets/js/28.8579f37b.js"><link rel="prefetch" href="/assets/js/280.7d5c0869.js"><link rel="prefetch" href="/assets/js/281.0c13798e.js"><link rel="prefetch" href="/assets/js/282.78bb2100.js"><link rel="prefetch" href="/assets/js/283.102a9ac9.js"><link rel="prefetch" href="/assets/js/284.9c65d687.js"><link rel="prefetch" href="/assets/js/285.46df33cb.js"><link rel="prefetch" href="/assets/js/286.d5334f4a.js"><link rel="prefetch" href="/assets/js/287.b56768ba.js"><link rel="prefetch" href="/assets/js/288.4e8672cf.js"><link rel="prefetch" href="/assets/js/289.3b512333.js"><link rel="prefetch" href="/assets/js/29.4b34cb2e.js"><link rel="prefetch" href="/assets/js/290.13f5cb4f.js"><link rel="prefetch" href="/assets/js/291.9442af0c.js"><link rel="prefetch" href="/assets/js/292.fe087795.js"><link rel="prefetch" href="/assets/js/293.aca3b34f.js"><link rel="prefetch" href="/assets/js/294.c4a0d801.js"><link rel="prefetch" href="/assets/js/295.307848e1.js"><link rel="prefetch" href="/assets/js/296.9303a7fd.js"><link rel="prefetch" href="/assets/js/297.97b72c2d.js"><link rel="prefetch" href="/assets/js/298.304f4b36.js"><link rel="prefetch" href="/assets/js/299.f0f15709.js"><link rel="prefetch" href="/assets/js/30.801059de.js"><link rel="prefetch" href="/assets/js/300.4629592a.js"><link rel="prefetch" href="/assets/js/301.df68b2bd.js"><link rel="prefetch" href="/assets/js/302.3ed42c51.js"><link rel="prefetch" href="/assets/js/303.78b9243b.js"><link rel="prefetch" href="/assets/js/304.2956c5ab.js"><link rel="prefetch" href="/assets/js/305.626ccbda.js"><link rel="prefetch" href="/assets/js/306.72ce3f1d.js"><link rel="prefetch" href="/assets/js/307.db6afaf3.js"><link rel="prefetch" href="/assets/js/308.80a3800c.js"><link rel="prefetch" href="/assets/js/309.13b3f8b1.js"><link rel="prefetch" href="/assets/js/31.6710aa93.js"><link rel="prefetch" href="/assets/js/310.6333970d.js"><link rel="prefetch" href="/assets/js/311.e45ad1b0.js"><link rel="prefetch" href="/assets/js/312.cd1f4ba3.js"><link rel="prefetch" href="/assets/js/313.90ab428b.js"><link rel="prefetch" href="/assets/js/314.eb920c76.js"><link rel="prefetch" href="/assets/js/315.14575706.js"><link rel="prefetch" href="/assets/js/316.da5dc340.js"><link rel="prefetch" href="/assets/js/317.7447df2d.js"><link rel="prefetch" href="/assets/js/318.891c52cd.js"><link rel="prefetch" href="/assets/js/319.56c19bd9.js"><link rel="prefetch" href="/assets/js/32.b9f02dcb.js"><link rel="prefetch" href="/assets/js/320.bc490a46.js"><link rel="prefetch" href="/assets/js/321.24b2a71e.js"><link rel="prefetch" href="/assets/js/322.735d4197.js"><link rel="prefetch" href="/assets/js/323.a9c788f0.js"><link rel="prefetch" href="/assets/js/324.0827164a.js"><link rel="prefetch" href="/assets/js/325.902ab440.js"><link rel="prefetch" href="/assets/js/326.76f9509e.js"><link rel="prefetch" href="/assets/js/327.b1155a77.js"><link rel="prefetch" href="/assets/js/328.d888aec4.js"><link rel="prefetch" href="/assets/js/329.6ff51aa8.js"><link rel="prefetch" href="/assets/js/33.16e702fa.js"><link rel="prefetch" href="/assets/js/330.793a12c0.js"><link rel="prefetch" href="/assets/js/331.d939f25b.js"><link rel="prefetch" href="/assets/js/332.1b358cc1.js"><link rel="prefetch" href="/assets/js/333.2c0791ff.js"><link rel="prefetch" href="/assets/js/334.9c7488c6.js"><link rel="prefetch" href="/assets/js/335.69a6e4d2.js"><link rel="prefetch" href="/assets/js/336.924e2aa5.js"><link rel="prefetch" href="/assets/js/337.7bb62c80.js"><link rel="prefetch" href="/assets/js/338.cfa5930a.js"><link rel="prefetch" href="/assets/js/339.3568d177.js"><link rel="prefetch" href="/assets/js/34.7e8835da.js"><link rel="prefetch" href="/assets/js/340.82a4d9b8.js"><link rel="prefetch" href="/assets/js/341.f191985d.js"><link rel="prefetch" href="/assets/js/342.46cb268d.js"><link rel="prefetch" href="/assets/js/343.c5c2ec3a.js"><link rel="prefetch" href="/assets/js/344.7d3b5d58.js"><link rel="prefetch" href="/assets/js/345.7cd2a55a.js"><link rel="prefetch" href="/assets/js/346.1d67532d.js"><link rel="prefetch" href="/assets/js/347.e5746dbe.js"><link rel="prefetch" href="/assets/js/348.54850172.js"><link rel="prefetch" href="/assets/js/349.696a8b0a.js"><link rel="prefetch" href="/assets/js/35.afc00612.js"><link rel="prefetch" href="/assets/js/350.7d3afa7e.js"><link rel="prefetch" href="/assets/js/351.bc7aaf03.js"><link rel="prefetch" href="/assets/js/352.7e3238ce.js"><link rel="prefetch" href="/assets/js/353.4c200924.js"><link rel="prefetch" href="/assets/js/354.2bf378ee.js"><link rel="prefetch" href="/assets/js/355.8c826b92.js"><link rel="prefetch" href="/assets/js/356.2f11fc87.js"><link rel="prefetch" href="/assets/js/357.f6c43c27.js"><link rel="prefetch" href="/assets/js/358.062234c4.js"><link rel="prefetch" href="/assets/js/359.cdfd0d09.js"><link rel="prefetch" href="/assets/js/36.db4b98e4.js"><link rel="prefetch" href="/assets/js/360.ed79bd84.js"><link rel="prefetch" href="/assets/js/361.20be9591.js"><link rel="prefetch" href="/assets/js/362.366bda21.js"><link rel="prefetch" href="/assets/js/363.38340179.js"><link rel="prefetch" href="/assets/js/364.0d9a33d7.js"><link rel="prefetch" href="/assets/js/365.e52c5af6.js"><link rel="prefetch" href="/assets/js/366.80eeffd8.js"><link rel="prefetch" href="/assets/js/367.cfd266f9.js"><link rel="prefetch" href="/assets/js/368.bd3cc78d.js"><link rel="prefetch" href="/assets/js/369.b568de16.js"><link rel="prefetch" href="/assets/js/37.9fbc5926.js"><link rel="prefetch" href="/assets/js/370.8865233a.js"><link rel="prefetch" href="/assets/js/371.56772f61.js"><link rel="prefetch" href="/assets/js/372.d4c2cf3e.js"><link rel="prefetch" href="/assets/js/373.997d462c.js"><link rel="prefetch" href="/assets/js/374.4e8bbb79.js"><link rel="prefetch" href="/assets/js/375.4fe8075a.js"><link rel="prefetch" href="/assets/js/376.42e8f3bb.js"><link rel="prefetch" href="/assets/js/377.72220464.js"><link rel="prefetch" href="/assets/js/378.45808f14.js"><link rel="prefetch" href="/assets/js/379.446d58c4.js"><link rel="prefetch" href="/assets/js/38.abff2811.js"><link rel="prefetch" href="/assets/js/380.930f5de1.js"><link rel="prefetch" href="/assets/js/381.f5385e93.js"><link rel="prefetch" href="/assets/js/382.d3551ecd.js"><link rel="prefetch" href="/assets/js/383.4344d201.js"><link rel="prefetch" href="/assets/js/384.6b86db19.js"><link rel="prefetch" href="/assets/js/385.6491cce1.js"><link rel="prefetch" href="/assets/js/386.69c9b62b.js"><link rel="prefetch" href="/assets/js/387.55ddd1af.js"><link rel="prefetch" href="/assets/js/388.e62fd98d.js"><link rel="prefetch" href="/assets/js/389.487083d1.js"><link rel="prefetch" href="/assets/js/39.de548a46.js"><link rel="prefetch" href="/assets/js/390.4ebe9975.js"><link rel="prefetch" href="/assets/js/391.2adb910a.js"><link rel="prefetch" href="/assets/js/392.cca72635.js"><link rel="prefetch" href="/assets/js/393.9b1c2435.js"><link rel="prefetch" href="/assets/js/394.d85b4431.js"><link rel="prefetch" href="/assets/js/395.d3288ae2.js"><link rel="prefetch" href="/assets/js/396.b3bfe727.js"><link rel="prefetch" href="/assets/js/397.8e8c329f.js"><link rel="prefetch" href="/assets/js/398.18d752d3.js"><link rel="prefetch" href="/assets/js/399.060021a5.js"><link rel="prefetch" href="/assets/js/4.289dc493.js"><link rel="prefetch" href="/assets/js/40.155c5f23.js"><link rel="prefetch" href="/assets/js/400.d0ec2779.js"><link rel="prefetch" href="/assets/js/401.aae12d2c.js"><link rel="prefetch" href="/assets/js/402.4c1e36ee.js"><link rel="prefetch" href="/assets/js/403.27b40602.js"><link rel="prefetch" href="/assets/js/404.f1e342ca.js"><link rel="prefetch" href="/assets/js/405.8b78b984.js"><link rel="prefetch" href="/assets/js/406.6175a4f4.js"><link rel="prefetch" href="/assets/js/407.49b22b20.js"><link rel="prefetch" href="/assets/js/408.917027d3.js"><link rel="prefetch" href="/assets/js/409.ef934658.js"><link rel="prefetch" href="/assets/js/41.9d17ef6e.js"><link rel="prefetch" href="/assets/js/410.4394cdfa.js"><link rel="prefetch" href="/assets/js/411.639427b2.js"><link rel="prefetch" href="/assets/js/412.39fa66e7.js"><link rel="prefetch" href="/assets/js/413.655206dd.js"><link rel="prefetch" href="/assets/js/414.9c71744c.js"><link rel="prefetch" href="/assets/js/415.815804fb.js"><link rel="prefetch" href="/assets/js/416.f16833eb.js"><link rel="prefetch" href="/assets/js/417.e36ce3b2.js"><link rel="prefetch" href="/assets/js/418.13401265.js"><link rel="prefetch" href="/assets/js/419.fb48320b.js"><link rel="prefetch" href="/assets/js/42.ea0dd33b.js"><link rel="prefetch" href="/assets/js/420.e7d0acc3.js"><link rel="prefetch" href="/assets/js/421.f0974b18.js"><link rel="prefetch" href="/assets/js/422.71bb1214.js"><link rel="prefetch" href="/assets/js/423.2933f26c.js"><link rel="prefetch" href="/assets/js/424.d73e5d07.js"><link rel="prefetch" href="/assets/js/425.76efc0b6.js"><link rel="prefetch" href="/assets/js/426.f3cc0d4e.js"><link rel="prefetch" href="/assets/js/427.f460718e.js"><link rel="prefetch" href="/assets/js/428.7a2e0b51.js"><link rel="prefetch" href="/assets/js/429.d396e33b.js"><link rel="prefetch" href="/assets/js/43.a4bcd5c1.js"><link rel="prefetch" href="/assets/js/430.cd2c1221.js"><link rel="prefetch" href="/assets/js/431.41d92cf2.js"><link rel="prefetch" href="/assets/js/432.4c961f1e.js"><link rel="prefetch" href="/assets/js/433.fd9590fb.js"><link rel="prefetch" href="/assets/js/434.a071a883.js"><link rel="prefetch" href="/assets/js/435.b43d72f5.js"><link rel="prefetch" href="/assets/js/436.b6cc4c7e.js"><link rel="prefetch" href="/assets/js/437.b82f1ba6.js"><link rel="prefetch" href="/assets/js/438.c7cdd003.js"><link rel="prefetch" href="/assets/js/439.62205b84.js"><link rel="prefetch" href="/assets/js/44.60a3a5c4.js"><link rel="prefetch" href="/assets/js/440.1bb4c051.js"><link rel="prefetch" href="/assets/js/441.bb2ab767.js"><link rel="prefetch" href="/assets/js/442.fd634853.js"><link rel="prefetch" href="/assets/js/443.2c83c8a0.js"><link rel="prefetch" href="/assets/js/444.2a65abd8.js"><link rel="prefetch" href="/assets/js/445.c67e96eb.js"><link rel="prefetch" href="/assets/js/446.1f229940.js"><link rel="prefetch" href="/assets/js/447.bdda1c4c.js"><link rel="prefetch" href="/assets/js/448.dc52e6f4.js"><link rel="prefetch" href="/assets/js/449.23958348.js"><link rel="prefetch" href="/assets/js/45.4ecc9166.js"><link rel="prefetch" href="/assets/js/450.7ea48cd3.js"><link rel="prefetch" href="/assets/js/451.2f4ef468.js"><link rel="prefetch" href="/assets/js/452.232a3747.js"><link rel="prefetch" href="/assets/js/453.c19c9493.js"><link rel="prefetch" href="/assets/js/454.10ef5ecd.js"><link rel="prefetch" href="/assets/js/455.8b534044.js"><link rel="prefetch" href="/assets/js/456.97cc7756.js"><link rel="prefetch" href="/assets/js/457.47caf365.js"><link rel="prefetch" href="/assets/js/458.b642097f.js"><link rel="prefetch" href="/assets/js/459.6c0f0bab.js"><link rel="prefetch" href="/assets/js/46.a2a97498.js"><link rel="prefetch" href="/assets/js/460.d4b716da.js"><link rel="prefetch" href="/assets/js/461.b3bc6aa1.js"><link rel="prefetch" href="/assets/js/462.261958e2.js"><link rel="prefetch" href="/assets/js/463.d2522029.js"><link rel="prefetch" href="/assets/js/464.fc287b93.js"><link rel="prefetch" href="/assets/js/465.e1b6a702.js"><link rel="prefetch" href="/assets/js/466.603fd881.js"><link rel="prefetch" href="/assets/js/467.4be682df.js"><link rel="prefetch" href="/assets/js/468.867411e9.js"><link rel="prefetch" href="/assets/js/469.9abd953c.js"><link rel="prefetch" href="/assets/js/47.2f079d35.js"><link rel="prefetch" href="/assets/js/470.57efab94.js"><link rel="prefetch" href="/assets/js/471.986e8f8c.js"><link rel="prefetch" href="/assets/js/472.06c4fa13.js"><link rel="prefetch" href="/assets/js/473.bb917d33.js"><link rel="prefetch" href="/assets/js/474.a96a06da.js"><link rel="prefetch" href="/assets/js/475.be817991.js"><link rel="prefetch" href="/assets/js/476.d8e6aab7.js"><link rel="prefetch" href="/assets/js/477.8a154034.js"><link rel="prefetch" href="/assets/js/478.74ab706c.js"><link rel="prefetch" href="/assets/js/479.c68341d9.js"><link rel="prefetch" href="/assets/js/48.5eeb8a44.js"><link rel="prefetch" href="/assets/js/480.d8f2fef3.js"><link rel="prefetch" href="/assets/js/481.3b1e928d.js"><link rel="prefetch" href="/assets/js/482.fd62d7b9.js"><link rel="prefetch" href="/assets/js/483.644a32e4.js"><link rel="prefetch" href="/assets/js/484.2c56c65a.js"><link rel="prefetch" href="/assets/js/485.75f8e02c.js"><link rel="prefetch" href="/assets/js/486.f169c4a6.js"><link rel="prefetch" href="/assets/js/487.c0fc1d0e.js"><link rel="prefetch" href="/assets/js/488.2450c255.js"><link rel="prefetch" href="/assets/js/489.36f0d0ed.js"><link rel="prefetch" href="/assets/js/49.43b5a8fe.js"><link rel="prefetch" href="/assets/js/490.c0fbfc79.js"><link rel="prefetch" href="/assets/js/491.4ef937f8.js"><link rel="prefetch" href="/assets/js/492.814248ac.js"><link rel="prefetch" href="/assets/js/493.65c8c9ff.js"><link rel="prefetch" href="/assets/js/494.e9fd53b1.js"><link rel="prefetch" href="/assets/js/495.06ce1b89.js"><link rel="prefetch" href="/assets/js/496.6ef29da3.js"><link rel="prefetch" href="/assets/js/497.d2b567f2.js"><link rel="prefetch" href="/assets/js/498.a696783a.js"><link rel="prefetch" href="/assets/js/499.3519597a.js"><link rel="prefetch" href="/assets/js/5.bdbe3014.js"><link rel="prefetch" href="/assets/js/50.51e57417.js"><link rel="prefetch" href="/assets/js/500.2da4db9f.js"><link rel="prefetch" href="/assets/js/501.9e84d79d.js"><link rel="prefetch" href="/assets/js/502.0b1f1ee6.js"><link rel="prefetch" href="/assets/js/503.16853c6e.js"><link rel="prefetch" href="/assets/js/504.01ff87fe.js"><link rel="prefetch" href="/assets/js/505.bb7450bf.js"><link rel="prefetch" href="/assets/js/506.fc2f8a19.js"><link rel="prefetch" href="/assets/js/507.6f711555.js"><link rel="prefetch" href="/assets/js/508.35c48a49.js"><link rel="prefetch" href="/assets/js/509.221af1e6.js"><link rel="prefetch" href="/assets/js/51.aef419f4.js"><link rel="prefetch" href="/assets/js/510.c96e4dc0.js"><link rel="prefetch" href="/assets/js/511.a1d377ff.js"><link rel="prefetch" href="/assets/js/512.88776012.js"><link rel="prefetch" href="/assets/js/513.c708de91.js"><link rel="prefetch" href="/assets/js/514.db14718e.js"><link rel="prefetch" href="/assets/js/515.879b8ccc.js"><link rel="prefetch" href="/assets/js/516.7152f397.js"><link rel="prefetch" href="/assets/js/517.21928a12.js"><link rel="prefetch" href="/assets/js/518.b6368128.js"><link rel="prefetch" href="/assets/js/519.d4c0d627.js"><link rel="prefetch" href="/assets/js/52.0ea32a87.js"><link rel="prefetch" href="/assets/js/520.7261308b.js"><link rel="prefetch" href="/assets/js/521.effa00ad.js"><link rel="prefetch" href="/assets/js/522.7922068d.js"><link rel="prefetch" href="/assets/js/523.ca05bb88.js"><link rel="prefetch" href="/assets/js/524.847464a8.js"><link rel="prefetch" href="/assets/js/525.6ea37be1.js"><link rel="prefetch" href="/assets/js/526.c2ffdc32.js"><link rel="prefetch" href="/assets/js/527.a42e0cb4.js"><link rel="prefetch" href="/assets/js/528.3036c125.js"><link rel="prefetch" href="/assets/js/529.5f35b218.js"><link rel="prefetch" href="/assets/js/53.a675003b.js"><link rel="prefetch" href="/assets/js/530.32e6ff9a.js"><link rel="prefetch" href="/assets/js/531.1d052765.js"><link rel="prefetch" href="/assets/js/532.e193e281.js"><link rel="prefetch" href="/assets/js/533.46144301.js"><link rel="prefetch" href="/assets/js/534.527e1550.js"><link rel="prefetch" href="/assets/js/535.48d8f2ef.js"><link rel="prefetch" href="/assets/js/536.daa89088.js"><link rel="prefetch" href="/assets/js/537.754ebdfe.js"><link rel="prefetch" href="/assets/js/538.29948ac3.js"><link rel="prefetch" href="/assets/js/539.7ee98087.js"><link rel="prefetch" href="/assets/js/54.69b15868.js"><link rel="prefetch" href="/assets/js/540.bb605d82.js"><link rel="prefetch" href="/assets/js/541.3c1a92e4.js"><link rel="prefetch" href="/assets/js/542.f720dc45.js"><link rel="prefetch" href="/assets/js/543.e3300b33.js"><link rel="prefetch" href="/assets/js/544.aa2be3bc.js"><link rel="prefetch" href="/assets/js/545.1be71ebc.js"><link rel="prefetch" href="/assets/js/546.2ae30677.js"><link rel="prefetch" href="/assets/js/547.f1eb5c82.js"><link rel="prefetch" href="/assets/js/548.afe053b3.js"><link rel="prefetch" href="/assets/js/549.0fa20de2.js"><link rel="prefetch" href="/assets/js/55.16e31180.js"><link rel="prefetch" href="/assets/js/550.d1218c6b.js"><link rel="prefetch" href="/assets/js/551.03bbe561.js"><link rel="prefetch" href="/assets/js/552.4258de00.js"><link rel="prefetch" href="/assets/js/553.fae22d64.js"><link rel="prefetch" href="/assets/js/554.a1de6989.js"><link rel="prefetch" href="/assets/js/555.89299f39.js"><link rel="prefetch" href="/assets/js/556.b3a3e1bf.js"><link rel="prefetch" href="/assets/js/557.7571494d.js"><link rel="prefetch" href="/assets/js/558.39dcf4cc.js"><link rel="prefetch" href="/assets/js/559.35b2ac5d.js"><link rel="prefetch" href="/assets/js/56.b0c4f131.js"><link rel="prefetch" href="/assets/js/560.a24a7313.js"><link rel="prefetch" href="/assets/js/561.824ea25f.js"><link rel="prefetch" href="/assets/js/562.a814d4ff.js"><link rel="prefetch" href="/assets/js/563.7b26c068.js"><link rel="prefetch" href="/assets/js/564.69a310f3.js"><link rel="prefetch" href="/assets/js/565.1574e33b.js"><link rel="prefetch" href="/assets/js/566.13564bd4.js"><link rel="prefetch" href="/assets/js/567.469eb27c.js"><link rel="prefetch" href="/assets/js/568.a21fc9be.js"><link rel="prefetch" href="/assets/js/569.9451d87f.js"><link rel="prefetch" href="/assets/js/57.cc5907e3.js"><link rel="prefetch" href="/assets/js/570.23a93abd.js"><link rel="prefetch" href="/assets/js/571.329379b7.js"><link rel="prefetch" href="/assets/js/572.8eae719e.js"><link rel="prefetch" href="/assets/js/573.e9f66fb2.js"><link rel="prefetch" href="/assets/js/574.13437590.js"><link rel="prefetch" href="/assets/js/575.89a62043.js"><link rel="prefetch" href="/assets/js/576.c65ea9c1.js"><link rel="prefetch" href="/assets/js/577.3feeffe3.js"><link rel="prefetch" href="/assets/js/578.1e3a138e.js"><link rel="prefetch" href="/assets/js/579.99e0d91b.js"><link rel="prefetch" href="/assets/js/58.f18a0092.js"><link rel="prefetch" href="/assets/js/580.14d6039b.js"><link rel="prefetch" href="/assets/js/581.673167b5.js"><link rel="prefetch" href="/assets/js/582.f5d7d5a1.js"><link rel="prefetch" href="/assets/js/583.cbd2660c.js"><link rel="prefetch" href="/assets/js/584.ce096077.js"><link rel="prefetch" href="/assets/js/585.03aa88fc.js"><link rel="prefetch" href="/assets/js/586.05599247.js"><link rel="prefetch" href="/assets/js/587.05947a43.js"><link rel="prefetch" href="/assets/js/588.732a8f38.js"><link rel="prefetch" href="/assets/js/589.bbe25597.js"><link rel="prefetch" href="/assets/js/59.ce268dd0.js"><link rel="prefetch" href="/assets/js/590.deae8a16.js"><link rel="prefetch" href="/assets/js/591.6dda25a3.js"><link rel="prefetch" href="/assets/js/592.d0b12c8f.js"><link rel="prefetch" href="/assets/js/593.1485ac69.js"><link rel="prefetch" href="/assets/js/594.27aa9f1b.js"><link rel="prefetch" href="/assets/js/595.62dd1621.js"><link rel="prefetch" href="/assets/js/596.76ea6f8c.js"><link rel="prefetch" href="/assets/js/597.0a6db182.js"><link rel="prefetch" href="/assets/js/598.b5a7d148.js"><link rel="prefetch" href="/assets/js/599.c5d6769d.js"><link rel="prefetch" href="/assets/js/6.9180a290.js"><link rel="prefetch" href="/assets/js/60.452b59a7.js"><link rel="prefetch" href="/assets/js/600.b1118e84.js"><link rel="prefetch" href="/assets/js/601.8cb2cb8e.js"><link rel="prefetch" href="/assets/js/602.017d72ed.js"><link rel="prefetch" href="/assets/js/603.3040f246.js"><link rel="prefetch" href="/assets/js/604.e5368b8d.js"><link rel="prefetch" href="/assets/js/605.e553dced.js"><link rel="prefetch" href="/assets/js/606.ce7c0bd5.js"><link rel="prefetch" href="/assets/js/607.cf6f6fdf.js"><link rel="prefetch" href="/assets/js/608.e2118d62.js"><link rel="prefetch" href="/assets/js/609.099a7557.js"><link rel="prefetch" href="/assets/js/61.d2fd31d6.js"><link rel="prefetch" href="/assets/js/610.218a0531.js"><link rel="prefetch" href="/assets/js/611.7a61e18d.js"><link rel="prefetch" href="/assets/js/612.5e138a18.js"><link rel="prefetch" href="/assets/js/613.5d73afd8.js"><link rel="prefetch" href="/assets/js/614.d8af26b5.js"><link rel="prefetch" href="/assets/js/615.1de79450.js"><link rel="prefetch" href="/assets/js/616.9555b7dd.js"><link rel="prefetch" href="/assets/js/617.59ac4db7.js"><link rel="prefetch" href="/assets/js/618.e0b4e9d8.js"><link rel="prefetch" href="/assets/js/619.c74fbc7d.js"><link rel="prefetch" href="/assets/js/62.bfb787fa.js"><link rel="prefetch" href="/assets/js/620.6437df6e.js"><link rel="prefetch" href="/assets/js/621.cc3cb0ac.js"><link rel="prefetch" href="/assets/js/622.87c8979a.js"><link rel="prefetch" href="/assets/js/623.d284c9e3.js"><link rel="prefetch" href="/assets/js/624.fea80144.js"><link rel="prefetch" href="/assets/js/625.c3475da3.js"><link rel="prefetch" href="/assets/js/626.791c8f03.js"><link rel="prefetch" href="/assets/js/627.4ad1941b.js"><link rel="prefetch" href="/assets/js/628.9dac6ee1.js"><link rel="prefetch" href="/assets/js/629.bac92225.js"><link rel="prefetch" href="/assets/js/63.301d0aa4.js"><link rel="prefetch" href="/assets/js/630.2218fa92.js"><link rel="prefetch" href="/assets/js/631.4be1487c.js"><link rel="prefetch" href="/assets/js/632.e527e02d.js"><link rel="prefetch" href="/assets/js/633.8f2e6120.js"><link rel="prefetch" href="/assets/js/634.67cfe34b.js"><link rel="prefetch" href="/assets/js/635.98750be5.js"><link rel="prefetch" href="/assets/js/636.fc68c03d.js"><link rel="prefetch" href="/assets/js/637.b1e71f2a.js"><link rel="prefetch" href="/assets/js/638.bcc97a8e.js"><link rel="prefetch" href="/assets/js/639.d528f731.js"><link rel="prefetch" href="/assets/js/64.bf8570fc.js"><link rel="prefetch" href="/assets/js/640.68b5f79d.js"><link rel="prefetch" href="/assets/js/641.02f53b72.js"><link rel="prefetch" href="/assets/js/642.730c56e8.js"><link rel="prefetch" href="/assets/js/643.7e79d5d8.js"><link rel="prefetch" href="/assets/js/644.d3d41010.js"><link rel="prefetch" href="/assets/js/645.ef636ddd.js"><link rel="prefetch" href="/assets/js/646.499ed862.js"><link rel="prefetch" href="/assets/js/647.31e78ba4.js"><link rel="prefetch" href="/assets/js/648.6b61b9ea.js"><link rel="prefetch" href="/assets/js/649.e703d5aa.js"><link rel="prefetch" href="/assets/js/65.77132072.js"><link rel="prefetch" href="/assets/js/650.ee63cc59.js"><link rel="prefetch" href="/assets/js/651.33b9eb36.js"><link rel="prefetch" href="/assets/js/652.ef35a0a8.js"><link rel="prefetch" href="/assets/js/653.2fba33b4.js"><link rel="prefetch" href="/assets/js/654.2fce6f2b.js"><link rel="prefetch" href="/assets/js/655.aa43d15a.js"><link rel="prefetch" href="/assets/js/656.1a43a0a6.js"><link rel="prefetch" href="/assets/js/657.a4641a43.js"><link rel="prefetch" href="/assets/js/658.8a7d1c0a.js"><link rel="prefetch" href="/assets/js/659.22529255.js"><link rel="prefetch" href="/assets/js/66.15254072.js"><link rel="prefetch" href="/assets/js/660.ff29789d.js"><link rel="prefetch" href="/assets/js/661.13e524e6.js"><link rel="prefetch" href="/assets/js/662.b3fe9d78.js"><link rel="prefetch" href="/assets/js/663.fa72128b.js"><link rel="prefetch" href="/assets/js/664.8920984a.js"><link rel="prefetch" href="/assets/js/665.5c33957c.js"><link rel="prefetch" href="/assets/js/666.541f7ff0.js"><link rel="prefetch" href="/assets/js/667.9a8c270f.js"><link rel="prefetch" href="/assets/js/668.daee2330.js"><link rel="prefetch" href="/assets/js/669.08e9f304.js"><link rel="prefetch" href="/assets/js/67.17fe092c.js"><link rel="prefetch" href="/assets/js/670.6cc1963a.js"><link rel="prefetch" href="/assets/js/671.5d3d74d1.js"><link rel="prefetch" href="/assets/js/672.7c74299d.js"><link rel="prefetch" href="/assets/js/673.f6d5b553.js"><link rel="prefetch" href="/assets/js/674.2969064d.js"><link rel="prefetch" href="/assets/js/68.60afc773.js"><link rel="prefetch" href="/assets/js/69.452131e8.js"><link rel="prefetch" href="/assets/js/7.c5dab81d.js"><link rel="prefetch" href="/assets/js/70.9b3bf8ad.js"><link rel="prefetch" href="/assets/js/71.b66684c1.js"><link rel="prefetch" href="/assets/js/72.97945bdf.js"><link rel="prefetch" href="/assets/js/73.871989da.js"><link rel="prefetch" href="/assets/js/74.931a6b08.js"><link rel="prefetch" href="/assets/js/75.f59920eb.js"><link rel="prefetch" href="/assets/js/76.631f9db0.js"><link rel="prefetch" href="/assets/js/77.c36f7b96.js"><link rel="prefetch" href="/assets/js/78.2f61eda3.js"><link rel="prefetch" href="/assets/js/79.8c723213.js"><link rel="prefetch" href="/assets/js/8.1a320525.js"><link rel="prefetch" href="/assets/js/80.f2ae23ce.js"><link rel="prefetch" href="/assets/js/81.bbb60795.js"><link rel="prefetch" href="/assets/js/82.06c7ca81.js"><link rel="prefetch" href="/assets/js/83.a83fc715.js"><link rel="prefetch" href="/assets/js/84.edcd8c27.js"><link rel="prefetch" href="/assets/js/85.d31eee28.js"><link rel="prefetch" href="/assets/js/86.10ec3513.js"><link rel="prefetch" href="/assets/js/87.051fdd23.js"><link rel="prefetch" href="/assets/js/88.4f49be9c.js"><link rel="prefetch" href="/assets/js/89.59877c73.js"><link rel="prefetch" href="/assets/js/9.a9688781.js"><link rel="prefetch" href="/assets/js/90.fd306930.js"><link rel="prefetch" href="/assets/js/91.8ba84d12.js"><link rel="prefetch" href="/assets/js/92.8660a55b.js"><link rel="prefetch" href="/assets/js/93.f5aa6f9d.js"><link rel="prefetch" href="/assets/js/94.f6320e1d.js"><link rel="prefetch" href="/assets/js/95.7aee9644.js"><link rel="prefetch" href="/assets/js/96.270b077f.js"><link rel="prefetch" href="/assets/js/97.2bf3e71f.js"><link rel="prefetch" href="/assets/js/99.d45e8282.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b7548b6d.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/note.png" alt="mznote" class="logo"> <span class="site-name can-hide">mznote</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><a href="/knowledge/" class="link-title">基础知识</a> <span class="title" style="display:none;">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/01.基础知识/10.离散数学/" class="nav-link">离散数学</a></li><li class="dropdown-item"><!----> <a href="/01.基础知识/11.具体数学/" class="nav-link">具体数学</a></li><li class="dropdown-item"><!----> <a href="/01.基础知识/12.CSAPP/" class="nav-link">CSAPP</a></li><li class="dropdown-item"><!----> <a href="/01.基础知识/13.数据结构/" class="nav-link">数据结构</a></li><li class="dropdown-item"><!----> <a href="/01.基础知识/15.算法导论/" class="nav-link">算法导论</a></li><li class="dropdown-item"><!----> <a href="/01.基础知识/17.计算机组成原理/" class="nav-link">计算机组成原理</a></li><li class="dropdown-item"><!----> <a href="/01.基础知识/20.编译原理/" class="nav-link">编译原理</a></li><li class="dropdown-item"><!----> <a href="/01.基础知识/25.计算机网络/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/01.基础知识/27.操作系统/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/01.基础知识/30.数据库系统/" class="nav-link">数据库系统</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程语言" class="dropdown-title"><a href="/language/" class="link-title">编程语言</a> <span class="title" style="display:none;">编程语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/02.编程语言/02.C/" class="nav-link">C</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实用技术" class="dropdown-title"><a href="/technology/" class="link-title">实用技术</a> <span class="title" style="display:none;">实用技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/03.实用技术/01.Linux/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/03.实用技术/02.VScode/" class="nav-link">VScode</a></li><li class="dropdown-item"><!----> <a href="/03.实用技术/03.GitHub/" class="nav-link">GitHub</a></li><li class="dropdown-item"><!----> <a href="/03.实用技术/19.Vuepress/" class="nav-link">Vuepress</a></li><li class="dropdown-item"><!----> <a href="/03.实用技术/20.实用工具/" class="nav-link">实用工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/99.日课/2022.2022年/01.01月/" class="nav-link">学习日课</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/sbwcwso/sbwcwso.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.png"> <div class="blogger-info"><h3>木子识时务</h3> <span>CS小白，努力进步中 🏃</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><a href="/knowledge/" class="link-title">基础知识</a> <span class="title" style="display:none;">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/01.基础知识/10.离散数学/" class="nav-link">离散数学</a></li><li class="dropdown-item"><!----> <a href="/01.基础知识/11.具体数学/" class="nav-link">具体数学</a></li><li class="dropdown-item"><!----> <a href="/01.基础知识/12.CSAPP/" class="nav-link">CSAPP</a></li><li class="dropdown-item"><!----> <a href="/01.基础知识/13.数据结构/" class="nav-link">数据结构</a></li><li class="dropdown-item"><!----> <a href="/01.基础知识/15.算法导论/" class="nav-link">算法导论</a></li><li class="dropdown-item"><!----> <a href="/01.基础知识/17.计算机组成原理/" class="nav-link">计算机组成原理</a></li><li class="dropdown-item"><!----> <a href="/01.基础知识/20.编译原理/" class="nav-link">编译原理</a></li><li class="dropdown-item"><!----> <a href="/01.基础知识/25.计算机网络/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/01.基础知识/27.操作系统/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/01.基础知识/30.数据库系统/" class="nav-link">数据库系统</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程语言" class="dropdown-title"><a href="/language/" class="link-title">编程语言</a> <span class="title" style="display:none;">编程语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/02.编程语言/02.C/" class="nav-link">C</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实用技术" class="dropdown-title"><a href="/technology/" class="link-title">实用技术</a> <span class="title" style="display:none;">实用技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/03.实用技术/01.Linux/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/03.实用技术/02.VScode/" class="nav-link">VScode</a></li><li class="dropdown-item"><!----> <a href="/03.实用技术/03.GitHub/" class="nav-link">GitHub</a></li><li class="dropdown-item"><!----> <a href="/03.实用技术/19.Vuepress/" class="nav-link">Vuepress</a></li><li class="dropdown-item"><!----> <a href="/03.实用技术/20.实用工具/" class="nav-link">实用工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/99.日课/2022.2022年/01.01月/" class="nav-link">学习日课</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/sbwcwso/sbwcwso.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/01.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/10.%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6/" class="sidebar-heading clickable"><span>离散数学</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/01.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/11.%E5%85%B7%E4%BD%93%E6%95%B0%E5%AD%A6/" class="sidebar-heading clickable"><span>具体数学</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/01.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/12.CSAPP/" class="sidebar-heading clickable open"><span>CSAPP</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/01.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/12.CSAPP/01.%E4%B9%A6%E6%9C%AC%E9%98%85%E8%AF%BB/" class="sidebar-heading clickable open"><span>书本阅读</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/cad752/" class="sidebar-link">第 2 章 信息的表示和处理</a></li><li><a href="/pages/306a79/" class="sidebar-link">第 3 章 程序的机器级表示</a></li><li><a href="/pages/e760c3/" aria-current="page" class="active sidebar-link">第 4 章 处理器体系结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/e760c3/#41-y86-64-指令集体系结构" class="sidebar-link">4.1 Y86-64 指令集体系结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/e760c3/#411-程序员可见的状态" class="sidebar-link">4.1.1 程序员可见的状态</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#412-y86-64-指令" class="sidebar-link">4.1.2 Y86-64 指令</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#413-指令编码" class="sidebar-link">4.1.3 指令编码</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#414-y86-64-异常" class="sidebar-link">4.1.4 Y86-64 异常</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#415-y86-64-程序" class="sidebar-link">4.1.5 Y86-64 程序</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#416-一些-y86-64-指令的详情" class="sidebar-link">4.1.6 一些 Y86-64 指令的详情</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#42-逻辑设计和硬件控制语言-hcl" class="sidebar-link">4.2 逻辑设计和硬件控制语言 HCL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/e760c3/#421-逻辑门" class="sidebar-link">4.2.1 逻辑门</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#422-组合电路和-hcl-布尔表达式" class="sidebar-link">4.2.2 组合电路和 HCL 布尔表达式</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#423-字级组合电路和-hcl-整数表达式" class="sidebar-link">4.2.3 字级组合电路和 HCL 整数表达式</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#424-集合关系" class="sidebar-link">4.2.4 集合关系</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#425-存储器和时钟" class="sidebar-link">4.2.5 存储器和时钟</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#43-y86-64-的顺序实现" class="sidebar-link">4.3 Y86-64 的顺序实现</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/e760c3/#431-将处理组织成阶段" class="sidebar-link">4.3.1 将处理组织成阶段</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#432-seq-的硬件结构" class="sidebar-link">4.3.2 SEQ 的硬件结构</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#433-seq-的时序" class="sidebar-link">4.3.3 SEQ 的时序</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#434-seq-阶段的实现" class="sidebar-link">4.3.4 SEQ 阶段的实现</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#44-流水线的通用原理" class="sidebar-link">4.4 流水线的通用原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/e760c3/#441-计算流水线" class="sidebar-link">4.4.1 计算流水线</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#442-流水线操作的详细说明" class="sidebar-link">4.4.2 流水线操作的详细说明</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#443-流水线的局限性" class="sidebar-link">4.4.3 流水线的局限性</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#444-带反馈的流水线系统" class="sidebar-link">4.4.4 带反馈的流水线系统</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#45-y86-64-的流水线实现" class="sidebar-link">4.5 Y86-64 的流水线实现</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/e760c3/#451-seq-重新安排计算阶段" class="sidebar-link">4.5.1 SEQ+: 重新安排计算阶段</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#452-插入流水线寄存器" class="sidebar-link">4.5.2 插入流水线寄存器</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#453-对信号进行重新排列和编号" class="sidebar-link">4.5.3 对信号进行重新排列和编号</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#454-预测下一个-pc" class="sidebar-link">4.5.4 预测下一个 PC</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#455-流水线冒险" class="sidebar-link">4.5.5 流水线冒险</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#456-异常处理" class="sidebar-link">4.5.6 异常处理</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#457-pipe-各阶段的实现" class="sidebar-link">4.5.7 PIPE 各阶段的实现</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#458-流水线控制逻辑" class="sidebar-link">4.5.8 流水线控制逻辑</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#459-性能分析" class="sidebar-link">4.5.9 性能分析</a></li><li class="sidebar-sub-header"><a href="/pages/e760c3/#4510-未完成的工作" class="sidebar-link">4.5.10 未完成的工作</a></li></ul></li></ul></li><li><a href="/pages/ac0011/" class="sidebar-link">第 5 章 优化程序性能</a></li><li><a href="/pages/4d33d6/" class="sidebar-link">第 6 章 存储器层次结构</a></li><li><a href="/pages/c4f6e6/" class="sidebar-link">第 7 章 链接</a></li><li><a href="/pages/fb3a2a/" class="sidebar-link">第 8 章 异常控制流</a></li><li><a href="/pages/b732ba/" class="sidebar-link">第 9 章 虚拟内存</a></li><li><a href="/pages/41d266/" class="sidebar-link">第 10 章 系统级I/O</a></li><li><a href="/pages/e95797/" class="sidebar-link">第 11 章 网络编程</a></li><li><a href="/pages/6f6eba/" class="sidebar-link">第 12 章 并发编程</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/01.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/12.CSAPP/02.lab/" class="sidebar-heading clickable"><span>lab</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/01.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/12.CSAPP/03.%E5%85%AC%E5%BC%80%E8%AF%BE%E7%AC%94%E8%AE%B0/" class="sidebar-heading clickable"><span>公开课笔记</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/01.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/13.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" class="sidebar-heading clickable"><span>数据结构</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/01.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/15.%E7%AE%97%E6%B3%95/" class="sidebar-heading clickable"><span>算法</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/01.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/17.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" class="sidebar-heading clickable"><span>计算机组成原理</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/01.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/20.%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" class="sidebar-heading clickable"><span>编译原理</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/01.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/25.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" class="sidebar-heading clickable"><span>计算机网络</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/01.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/27.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" class="sidebar-heading clickable"><span>操作系统</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/01.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/30.%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F/" class="sidebar-heading clickable"><span>数据库系统</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/01.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/40.%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/" class="sidebar-heading clickable"><span>软件工程</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-67beffb9><div class="articleInfo" data-v-67beffb9><ul class="breadcrumbs" data-v-67beffb9><li data-v-67beffb9><a href="/" class="iconfont icon-home router-link-active" data-v-67beffb9></a></li> <li data-v-67beffb9><a href="/01.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" data-v-67beffb9>
          基础知识
        </a></li><li data-v-67beffb9><a href="/01.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/12.CSAPP/" data-v-67beffb9>
          CSAPP
        </a></li><li data-v-67beffb9><a href="/01.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/12.CSAPP/01.%E4%B9%A6%E6%9C%AC%E9%98%85%E8%AF%BB/" data-v-67beffb9>
          书本阅读
        </a></li> <li data-v-67beffb9>第 4 章 处理器体系结构</li></ul> <div class="info" data-v-67beffb9><div title="作者" class="author iconfont icon-touxiang" data-v-67beffb9><a href="https://github.com/sbwcwso" target="_blank" title="作者" class="beLink" data-v-67beffb9>木子识时务</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-67beffb9><a href="javascript:;" data-v-67beffb9>2022-01-15</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">
          第 4 章 处理器体系结构
        </h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="第-4-章-处理器体系结构"><a href="#第-4-章-处理器体系结构" class="header-anchor">#</a> 第 4 章 处理器体系结构</h1> <div class="custom-block note"><p class="custom-block-title">指令集体系结构(Instruction-Set Architecture, ISA)</p> <ul><li>一个处理器支持的指令和指令的字节级编码称为它的指令集体系结构</li> <li>ISA 在编译器编写者和处理器设计人员之间提供了一个概念抽象层</li></ul></div> <div class="custom-block tip"><p class="custom-block-title">流水线化的处理器 (pipelined processor)</p> <ul><li>ISA 模型在抽象上是按顺序指令执行的</li> <li>通过将每条指令的执行分解为多个步骤，每个步骤由一个独立的硬件部分或阶段来处理
<ul><li>指令的执行需要经过流水线的各个阶段</li> <li>每个时钟周期都有一条新的指令进行流水线</li> <li>如此，处理器可以同时执行多条指令的不同阶段</li></ul></li> <li>借助流水线，处理器能获得更高的性能</li></ul></div> <h2 id="41-y86-64-指令集体系结构"><a href="#41-y86-64-指令集体系结构" class="header-anchor">#</a> 4.1 Y86-64 指令集体系结构</h2> <h3 id="411-程序员可见的状态"><a href="#411-程序员可见的状态" class="header-anchor">#</a> 4.1.1 程序员可见的状态</h3> <div class="custom-block note"><p class="custom-block-title">笔记</p> <ul><li>程序员可见状态包括
<ul><li>RF: 程序寄存器</li> <li>CC: 条件码</li> <li>PC: 程序计数器</li> <li>Stat: 程序状态</li> <li>DMEM: 内存</li></ul></li> <li><details class="custom-block details"><summary>程序员可见状态图示</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220115154537.png" alt="20220115154537"></p></details></li></ul></div> <h3 id="412-y86-64-指令"><a href="#412-y86-64-指令" class="header-anchor">#</a> 4.1.2 Y86-64 指令</h3> <div class="custom-block note"><p class="custom-block-title">笔记</p> <ul><li><code>halt</code> 指令停止指令的执行，并将状态码设置为 <code>HLT</code></li> <li><details class="custom-block details"><summary>Y86-64 指令集</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220115155147.png" alt="20220115155147"></p></details></li></ul></div> <h3 id="413-指令编码"><a href="#413-指令编码" class="header-anchor">#</a> 4.1.3 指令编码</h3> <div class="custom-block note"><p class="custom-block-title">笔记</p> <ul><li><details class="custom-block details"><summary>Y86-64 指令集的功能码</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220115155749.png" alt="20220115155749"></p></details></li></ul> <h6 id="register_id" class="anchor-user-defined"><a href="#register_id" class="header-anchor">#</a></h6> <ul><li><details class="custom-block details"><summary>Y86-64 程序寄存器的标识符</summary> <ul><li><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220115160016.png" alt="20220115160016"></li> <li>只需要一个寄存器操作数的指令将另一个寄存器指示符设置为 <code>0XF</code></li></ul></details></li> <li>分支指令和调用指令的目的是一个绝对地址</li> <li>所有的整数采用小端法编码</li> <li><div class="custom-block tip"><p class="custom-block-title">指令集的一个重要特性是字节编码必须要有唯一的解释</p> <ul><li>这个性质保证了处理器可以无二义性的执行目标代码程序</li></ul></div></li></ul></div> <div class="custom-block tip"><p class="custom-block-title">CISC 和 RISC</p> <ul><li>CISC，复杂指令集计算机</li> <li>RISC，精简指令集计算机</li> <li><details class="custom-block details"><summary>CISC 和 RISC 的对比</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220115171058.png" alt="20220115171058"></p></details></li></ul></div> <h3 id="414-y86-64-异常"><a href="#414-y86-64-异常" class="header-anchor">#</a> 4.1.4 Y86-64 异常</h3> <div class="custom-block tip"><p class="custom-block-title">Y86-64 状态码</p> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220115171226.png" alt="20220115171226"></p></div> <h3 id="415-y86-64-程序"><a href="#415-y86-64-程序" class="header-anchor">#</a> 4.1.5 Y86-64 程序</h3> <div class="custom-block note"><p class="custom-block-title">笔记</p> <ul><li>以 <code>.</code> 开头的词是 <strong>汇编器伪指令</strong>(assembler directives)
<ul><li>它们会告诉汇编器调整地址，以便在那儿产生代码或插入一些数据</li></ul></li></ul></div> <h3 id="416-一些-y86-64-指令的详情"><a href="#416-一些-y86-64-指令的详情" class="header-anchor">#</a> 4.1.6 一些 Y86-64 指令的详情</h3> <div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li><code>push %rsp</code> 压入的是 <code>%rsp</code> 中原始的值</li> <li><code>pop %rsp</code> 弹出的是最后一次压入栈中的值</li></ul></div> <h2 id="42-逻辑设计和硬件控制语言-hcl"><a href="#42-逻辑设计和硬件控制语言-hcl" class="header-anchor">#</a> 4.2 逻辑设计和硬件控制语言 HCL</h2> <h3 id="421-逻辑门"><a href="#421-逻辑门" class="header-anchor">#</a> 4.2.1 逻辑门</h3> <div class="custom-block note"><p class="custom-block-title">笔记</p> <ul><li><details class="custom-block details"><summary>逻辑门类型</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220115210641.png" alt="20220115210641"></p></details></li> <li>逻辑门总是活动的
<ul><li>一旦输入变化，则在很短的时间内，输出就会相应地变化</li></ul></li></ul></div> <h3 id="422-组合电路和-hcl-布尔表达式"><a href="#422-组合电路和-hcl-布尔表达式" class="header-anchor">#</a> 4.2.2 组合电路和 HCL 布尔表达式</h3> <div class="custom-block tip"><p class="custom-block-title">检测位相等</p> <ul><li>HCL 表示
<ul><li><code>bool eq = (a &amp;&amp; b) || (!a &amp;&amp; !b)</code></li></ul></li> <li><details class="custom-block details"><summary>电路图</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220115211240.png" alt="20220115211240"></p></details></li></ul></div> <div class="custom-block note"><p class="custom-block-title">单个位的多路复用器</p> <ul><li>HCL 表达式
<ul><li><code>bool out = (s &amp;&amp; a) || (!s &amp;&amp; b)</code></li></ul></li> <li><details class="custom-block details"><summary>电路图</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220115212305.png" alt="20220115212305"></p></details></li></ul></div> <h3 id="423-字级组合电路和-hcl-整数表达式"><a href="#423-字级组合电路和-hcl-整数表达式" class="header-anchor">#</a> 4.2.3 字级组合电路和 HCL 整数表达式</h3> <div class="custom-block tip"><p class="custom-block-title">字级相等测试</p> <ul><li>HCL 表达式
<ul><li><code>bool Eq = (A == B)</code></li></ul></li> <li><details class="custom-block details"><summary>字级相等测试电路</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220115212807.png" alt="20220115212807"></p></details></li></ul></div> <div class="custom-block note"><p class="custom-block-title">字级的多路利用器</p> <ul><li><p>HCL 表达式</p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>word <span class="token property">Out</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
  s: A;
  <span class="token number">1</span>: B;
<span class="token punctuation">]</span>;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>选择表达式顺序求值，第一个求值为 <code>1</code> 的情况会被选中</li></ul></li> <li><details class="custom-block details"><summary>字级多路复用电路图</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220116062841.png" alt="20220116062841"></p></details></li></ul></div> <div class="custom-block tip"><p class="custom-block-title">四路复用器</p> <ul><li><p>HCL 表达式</p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>word <span class="token property">Out4</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
  !s1 &amp;&amp; !s0 : A; <span class="token comment"># 00</span>
  !s1 : B;        <span class="token comment"># 01</span>
  !s0 : C;        <span class="token comment"># 10</span>
  <span class="token number">1</span> : D;          <span class="token comment"># 11</span>
<span class="token punctuation">]</span>;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><details class="custom-block details"><summary>电路图</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220116063745.png" alt="20220116063745"></p></details></li></ul></div> <div class="custom-block note"><p class="custom-block-title">计算 <code>A, B, C</code> 中的最小值</p> <ul><li><p>HCL 表达式</p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>word <span class="token property">Min3</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
  A &lt;<span class="token punctuation">=</span> B &amp;&amp; A &lt;<span class="token punctuation">=</span> C : A;
  B &lt;<span class="token punctuation">=</span> C : B;
  <span class="token number">1</span> :C;
<span class="token punctuation">]</span>;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><details class="custom-block details"><summary>电路图</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220116064012.png" alt="20220116064012"></p></details></li></ul></div> <div class="custom-block tip"><p class="custom-block-title">算术逻辑单元(ALU)</p> <ul><li>三个输入
<ul><li>两个数据输入</li> <li>一个控制输入</li> <li><div class="custom-block note"><p class="custom-block-title">根据控制输入的设置，电路会对数据输入执行不同的算术或逻辑操作</p></div></li></ul></li> <li><details class="custom-block details"><summary>ALU 电路示意图</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220116065212.png" alt="20220116065212"></p></details></li></ul></div> <h3 id="424-集合关系"><a href="#424-集合关系" class="header-anchor">#</a> 4.2.4 集合关系</h3> <div class="custom-block note"><p class="custom-block-title">用两位信号 <code>code</code> 控制四路复用器</p> <ul><li><p>HCL 表达式</p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>bool  <span class="token property">s1</span> <span class="token punctuation">=</span> code <span class="token keyword">in</span> <span class="token punctuation">{</span><span class="token number">2</span>, <span class="token number">3</span><span class="token punctuation">}</span>;
bool  <span class="token property">s0</span> <span class="token punctuation">=</span> code <span class="token keyword">in</span> <span class="token punctuation">{</span><span class="token number">1</span>, <span class="token number">3</span><span class="token punctuation">}</span>;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><details class="custom-block details"><summary>电路示意图</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220116065816.png" alt="20220116065816"></p></details></li></ul></div> <h3 id="425-存储器和时钟"><a href="#425-存储器和时钟" class="header-anchor">#</a> 4.2.5 存储器和时钟</h3> <div class="custom-block tip"><p class="custom-block-title">组合电路从本质上来讲，不储存任何信息</p></div> <div class="custom-block note"><p class="custom-block-title">时钟寄存器</p> <ul><li>简称寄存器</li> <li>时钟信号控制寄存器加载输入值
<ul><li>只有在时钟的上升沿，才会更新寄存器的值</li> <li><details class="custom-block details"><summary>寄存器操作图示</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220116072013.png" alt="20220116072013"></p></details></li></ul></li> <li>在机器级编程中，寄存器代表的是 CPU 中为数不多的可寻址字
<ul><li>地址即为<a href="#register_id">寄存器 ID</a></li></ul></li> <li>寄存器可以看做电路不同部分中组合逻辑之间的屏障</li> <li><div class="custom-block tip"><p class="custom-block-title">寄存器文件</p> <ul><li><details class="custom-block details"><summary>寄存器文件示意图</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220116072811.png" alt="20220116072811"></p></details></li> <li>从寄存器文件读数据时，可以将其看做一个以地址为输入、数据为输出的组合逻辑块</li> <li>向寄存器文件写入字是由时钟信号控制的</li></ul></div></li></ul></div> <div class="custom-block tip"><p class="custom-block-title">随机访问存储器</p> <ul><li>简称内存</li> <li>用地址选择该读或者该写哪个字</li> <li><details class="custom-block details"><summary>随机访问存储器图示</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220116073417.png" alt="20220116073417"></p></details></li> <li>从内存中读的操作方式类似于组合逻辑</li> <li>写内存是由时钟控制的</li></ul></div> <div class="custom-block warning"><p class="custom-block-title">只读存储器用来读指令</p></div> <h2 id="43-y86-64-的顺序实现"><a href="#43-y86-64-的顺序实现" class="header-anchor">#</a> 4.3 Y86-64 的顺序实现</h2> <div class="custom-block warning"><p class="custom-block-title">各个变量的含义</p> <table><thead><tr><th style="text-align:center;">变量名</th> <th style="text-align:left;">含义</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>srcA, srcB</code></td> <td style="text-align:left;">寄存器读端口的地址输入</td></tr> <tr><td style="text-align:center;"><code>dstW</code></td> <td style="text-align:left;">寄存器写端口的地址输入</td></tr> <tr><td style="text-align:center;"><code>valA</code></td> <td style="text-align:left;">从寄存器 <code>A</code> 读出的数据， 常用于访存阶段</td></tr> <tr><td style="text-align:center;"><code>valB</code></td> <td style="text-align:left;">从寄存器 <code>B</code> 读出的数据, 常用于执行阶段</td></tr> <tr><td style="text-align:center;"><code>valC</code></td> <td style="text-align:left;">指令中的四字节常数</td></tr> <tr><td style="text-align:center;"><code>valE</code></td> <td style="text-align:left;">ALU 计算输出的值</td></tr> <tr><td style="text-align:center;"><code>valM</code></td> <td style="text-align:left;">从内存中读出的数据</td></tr> <tr><td style="text-align:center;"><code>valP</code></td> <td style="text-align:left;">下一条指令的地址</td></tr> <tr><td style="text-align:center;"><code>valW</code></td> <td style="text-align:left;">数据输入，一般用于更新寄存器的值</td></tr></tbody></table></div> <div class="custom-block note"><p class="custom-block-title">SEQ 处理器</p> <ul><li>SEQ(sequential)</li> <li>每个时钟周期上， SEQ 执行处理一条完整指令所需的所有步骤</li></ul></div> <h3 id="431-将处理组织成阶段"><a href="#431-将处理组织成阶段" class="header-anchor">#</a> 4.3.1 将处理组织成阶段</h3> <div class="custom-block note"><p class="custom-block-title">笔记</p> <ul><li>处理一条指令包含很多操作，可以将它们组织成某个特殊的阶段序列
<ul><li>每一步的具体处理取决于正在执行的指令</li> <li>创建这样一个框架，有助于设计一个充分利用硬件的处理器</li></ul></li></ul></div> <div class="custom-block tip"><p class="custom-block-title">各个阶段</p> <ul><li><strong>取指</strong>(fetch)
<ul><li>从内存中读取指令字节</li> <li>可能从指令中取出一个四字常数字 <code>ValC</code></li> <li>按顺序执行的方式计算出当前指令的下一条指令的地址 <code>valP</code></li></ul></li> <li><strong>译码</strong>(decode)
<ul><li>从寄存器中读入最多两个操作数，得到值 <code>valA</code> 和/或 <code>valB</code></li> <li>一般读入指令 <code>rA, rB</code> 字段指明的寄存器</li> <li>有些指令(<code>popq</code>, <code>pushq</code>) 是读寄存器 <code>%rsp</code> 的</li></ul></li> <li><strong>执行</strong>(execute)
<ul><li>ALU 根据指令的内容进行相应的计算，得到的结果记为 <code>valE</code></li> <li>此阶段也可以设置条件码
<ul><li>对于条件传送指令，这个阶段会验证条件码和传送条件，如果条件成立，则更新目标寄存器</li> <li>对于跳转指令，这个阶段会决定是不是应该选择分支</li></ul></li></ul></li> <li><strong>访存</strong>(memory)
<ul><li>将数据写入内存或从内存读出数据，读出的值为 <code>valM</code></li></ul></li> <li><strong>写回</strong>(write back)
<ul><li>写回阶段最多可以写两个结果到寄存器文件</li></ul></li> <li><strong>更新 PC</strong>(PC update)
<ul><li>将 PC 设置为下一条指令的地址</li></ul></li></ul></div> <div class="custom-block note"><p class="custom-block-title">笔记</p> <ul><li>设计硬件时，一个非常简单而一致的结构是非常重要的</li> <li>降低复杂度的一种方法是让不同的指令共享尽量多的硬件</li> <li>在硬件上复制逻辑块的成本要比软件中有重复代码的成本大得多</li></ul></div> <details class="custom-block details"><summary>Y86-64 中指令 <code>OPq</code>, <code>rrmovq</code>, <code>irmovq</code> 在顺序实现中的计算</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220116090011.png" alt="20220116090011"></p> <div class="custom-block tip"><p class="custom-block-title">没有明确指定 <code>Set CC</code>，则执行阶段不会设置条件码</p></div></details> <details class="custom-block details"><summary>Y86-64 中指令 <code>rmmovq</code>, <code>mrmovq</code> 在顺序实现中的计算</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220116091212.png" alt="20220116091212"></p></details> <details class="custom-block details"><summary>Y86-64 中指令 <code>pushq</code>, <code>popq</code> 在顺序实现中的计算</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220116092257.png" alt="20220116092257"></p> <ul><li>注意整体的操作顺序顺序与 <code>popq %rsp</code> 和 <code>pushq %rsp</code> 的行为一致</li></ul></details> <details class="custom-block details"><summary>Y86-64 中指令 <code>jxx</code>, <code>call</code> 和 <code>ret</code> 在顺序实现中的计算</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220116094226.png" alt="20220116094226"></p> <ul><li><code>jxx</code> 的跳转阶段，通过检查条件码和跳转条件来确定是否要选择分支
<ul><li>会产生一个一位信号 <code>Cnd</code></li></ul></li> <li><code>call</code> 指令从指令中读出跳转地址，并将下一条指令的地址压入栈中</li></ul></details> <h3 id="432-seq-的硬件结构"><a href="#432-seq-的硬件结构" class="header-anchor">#</a> 4.3.2 SEQ 的硬件结构</h3> <div class="custom-block note"><p class="custom-block-title">SEQ 的抽象视图</p> <ul><li><details class="custom-block details"><summary>SEQ 抽象视图图示</summary> <ul><li><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/%E9%A1%B5%E9%9D%A2%E6%8F%90%E5%8F%96%E8%87%AA%EF%BC%8DComputer-Systems-A-Programmers-Perspective-3rd%20(2).jpg" alt="页面提取自－Computer-Systems-A-Programmers-Perspective-3rd (2)"></li></ul></details></li> <li>信息沿着线流动，先向上，再向右
<ul><li>同各个阶段相关的硬件单元负责执行这些处理</li> <li>在右边，反馈线路向下，包括要写到寄存器文件中的更新值，以及更新的程序计数器值</li></ul></li></ul></div> <div class="custom-block tip"><p class="custom-block-title">SEQ 的硬件结构</p> <ul><li><details class="custom-block details"><summary>SEQ 硬件结构图示</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220116103303.png" alt="20220116103303"></p></details></li> <li>PC 是 SEQ 中唯一的时钟寄存器</li></ul></div> <h3 id="433-seq-的时序"><a href="#433-seq-的时序" class="header-anchor">#</a> 4.3.3 SEQ 的时序</h3> <div class="custom-block note"><p class="custom-block-title">各个硬件单元的时序</p> <ul><li>程序计数器
<ul><li>每个时钟周期，程序计数器都会装载新的指令地址</li></ul></li> <li>条件码寄存器
<ul><li>只有在执行整数运算指令时，才会装载条件码寄存器</li></ul></li> <li>数据内存
<ul><li>只有在执行 <code>rmmovq</code> 、 <code>pushq</code> 或 <code>call</code> 指令时，才会写数据内存</li></ul></li> <li>寄存器文件的两个写端口允许每个时钟周期更新两个程序寄存器
<ul><li>读操作与组合逻辑类似</li> <li>写操作由时钟控制</li></ul></li></ul></div> <div class="custom-block tip"><p class="custom-block-title">遵循 &quot;从不回读&quot; 的原则组织计算</p> <ul><li>处理器从来不需要为了完成一条指令的执行而去读由该指令更新了的状态</li> <li>实例
<ul><li><code>pushq</code> 指令的实现
<ul><li>用信号 <code>valE</code> 既作为寄存器写的数据，也作为内存写的地址</li> <li>不是先将 <code>%rsp</code> 减 8，然后再将更新后的 <code>%rsp</code> 的值作为写操作的地址</li></ul></li> <li>没有指令必须即设置又读取条件码</li></ul></li></ul></div> <div class="custom-block note"><p class="custom-block-title">用时钟来控制状态单元的更新，以及值通过组合逻辑来传播，足够控制 SEQ 实现中每条指令的计算</p> <ul><li>每次时钟由低变高时，处理器开始执行一条新的指令</li> <li><details class="custom-block details"><summary>SEQ 执行的两个周期图示</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/%E9%A1%B5%E9%9D%A2%E6%8F%90%E5%8F%96%E8%87%AA%EF%BC%8D%E7%AC%AC4%E7%AB%A0%20%E5%A4%84%E7%90%86%E5%99%A8%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%20(2).jpg" alt="页面提取自－第4章 处理器体系结构 (2)"></p></details></li></ul></div> <h3 id="434-seq-阶段的实现"><a href="#434-seq-阶段的实现" class="header-anchor">#</a> 4.3.4 SEQ 阶段的实现</h3> <details class="custom-block details"><summary>HCL 描述中使用的常数值</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220116110439.png" alt="20220116110439"></p> <ul><li><code>nop</code> 指令只是简单的经过各个阶段，除了要将 PC 加 1，不进行任何处理</li></ul></details> <div class="custom-block note"><p class="custom-block-title">取指阶段</p> <ul><li><details class="custom-block details"><summary>示意图</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220116110758.png" alt="20220116110758"></p></details></li> <li><p><code>need_regids</code> 的 HCL 描述</p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>bool <span class="token property">need_regids</span> <span class="token punctuation">=</span>
          icode <span class="token keyword">in</span> <span class="token punctuation">{</span> IRRMOVQ, IIRMOVQ, IRMMOVQ, IMRMOVQ,
                    IOPQ, IPUSHQ, IPOPQ <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><code>need_valC</code> 的 HCL 描述</p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>bool <span class="token property">need_valC</span> <span class="token punctuation">=</span>
          icode <span class="token keyword">in</span> <span class="token punctuation">{</span> IIRMOVQ, IRMMOVQ, IMRMOVQ, IJXX, ICALL<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul></div> <div class="custom-block tip"><p class="custom-block-title">译码和写回阶段</p> <ul><li><details class="custom-block details"><summary>图示</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220116112339.png" alt="20220116112339"></p></details></li> <li><p>译码阶段 <code>srcA</code> 的 HCL 描述</p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>word <span class="token property">srcA</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
  icode <span class="token keyword">in</span> <span class="token punctuation">{</span> IRRMOVQ, IRMMOVQ, IOPQ, IPUSHQ <span class="token punctuation">}</span>: rA;
  icode <span class="token keyword">in</span> <span class="token punctuation">{</span> IPOPQ, IRET <span class="token punctuation">}</span>: RRSP;
  <span class="token number">1</span> : RNONE;  <span class="token comment"># Don't need register </span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>译码阶段 <code>srcB</code> 的 HCL 描述</p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>word <span class="token property">srcB</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
  icode <span class="token keyword">in</span> <span class="token punctuation">{</span> IOPQ, IRMMOVQ, IMRMOVQ<span class="token punctuation">}</span>: rB;
  icode <span class="token keyword">in</span> <span class="token punctuation">{</span> IPUSH, IPOPQ, ICALL, IRET <span class="token punctuation">}</span>: RRSP;
  <span class="token number">1</span> : RNONE;  <span class="token comment"># Don't need register </span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>写回阶段 <code>dstE</code> 的 HCL 描述</p> <ul><li>暂不包括条件移动指令</li></ul> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>word <span class="token property">dstE</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
  icode <span class="token keyword">in</span> <span class="token punctuation">{</span> IRRMOVQ, IIRMOVQ, IOPQ<span class="token punctuation">}</span> : rB;
  icode <span class="token keyword">in</span> <span class="token punctuation">{</span> IPUSHQ, IPOPQ, ICALL, IRET<span class="token punctuation">}</span> : RRSP;
  <span class="token number">1</span>: RNONE;  <span class="token comment"># Don't write any register</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>写回阶段 <code>dstM</code> 的 HCL 描述</p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>word <span class="token property">dstM</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
  icode <span class="token keyword">in</span> <span class="token punctuation">{</span>IMRMOVQ, IPOPQ<span class="token punctuation">}</span> : rA; 
  <span class="token number">1</span>: RNONE; <span class="token comment"># Don't write any register</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul></div> <div class="custom-block note"><p class="custom-block-title">执行阶段</p> <ul><li><details class="custom-block details"><summary>图示</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220116122001.png" alt="20220116122001"></p> <ul><li>根据指令的类型， <code>aluA</code> 和 <code>aluB</code> 的取值会不同</li></ul></details></li> <li><p><code>aluA</code> 的 HCL 表示</p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>word <span class="token property">aluA</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
  icode <span class="token keyword">in</span> <span class="token punctuation">{</span> IRRMOVQ, IOPQ <span class="token punctuation">}</span> : valA;
  icode <span class="token keyword">in</span> <span class="token punctuation">{</span> IIRMOVQ, IRMMOVQ, IMRMOVQ <span class="token punctuation">}</span> : valC;
  icode <span class="token keyword">in</span> <span class="token punctuation">{</span> ICALL, IPUSHQ<span class="token punctuation">}</span> : -<span class="token number">8</span>;
  icode <span class="token keyword">in</span> <span class="token punctuation">{</span> IRET, IPOPQ<span class="token punctuation">}</span> : <span class="token number">8</span>;
  <span class="token comment"># Other instructions don't need ALU</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p><code>aluB</code> 的 HCL 表示</p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>word <span class="token property">aluB</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
  icode <span class="token keyword">in</span> <span class="token punctuation">{</span> IRMMOVQ, IMRMOVQ, IOPQ, IPUSHQ, IPOPQ, ICALL, IRET<span class="token punctuation">}</span> : valB;
  icode <span class="token keyword">in</span> <span class="token punctuation">{</span> IRRMOVQ, IIRMOVQ<span class="token punctuation">}</span> : <span class="token number">0</span>;
  <span class="token comment"># Other instructions don't need ALU</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>ALU 控制的 HCL 表示为</p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>word <span class="token property">alufun</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
  icode <span class="token punctuation">=</span><span class="token punctuation">=</span> IOPQ: ifun;
  <span class="token number">1</span>: ALUADD;
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>使用 <code>set_cc</code> 来控制是否该更新寄存器</p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>bool <span class="token property">set_cc</span> <span class="token punctuation">=</span> icode <span class="token keyword">in</span> <span class="token punctuation">{</span>IOPQ<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></div> <div class="custom-block tip"><p class="custom-block-title">访存阶段</p> <ul><li><details class="custom-block details"><summary>示意图</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220116133419.png" alt="20220116133419"></p></details></li> <li><p>内存读和写的地址总是 <code>valE</code> 或 <code>valA</code></p></li> <li><p><code>mem_addr</code> 的 HCL 描述</p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>word <span class="token property">mem_addr</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
  icode <span class="token keyword">in</span> <span class="token punctuation">{</span>IRMMOVQ, IMRMOVQ, IPUSHQ, ICALL<span class="token punctuation">}</span>: valE
  icode <span class="token keyword">in</span> <span class="token punctuation">{</span>IPOPQ, IRET<span class="token punctuation">}</span>: valA
  <span class="token comment"># Other instructions don't need address</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p><code>mem_data</code> 的 HCL 描述</p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>word <span class="token property">mem_data</span><span class="token punctuation">=</span> <span class="token punctuation">[</span>
  icode <span class="token keyword">in</span> <span class="token punctuation">{</span>IRMMOVQ, IPUSHQ<span class="token punctuation">}</span>: valA
  icode <span class="token punctuation">=</span><span class="token punctuation">=</span> ICALL: valP
  <span class="token comment"># Other instructions don't need data</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p><code>mem_read</code> 的 HCL 描述</p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>bool <span class="token property">mem_read</span> <span class="token punctuation">=</span> icode <span class="token keyword">in</span> <span class="token punctuation">{</span> IMRMOVQ, IPOPQ, IRET <span class="token punctuation">}</span>;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>mem_write</code> 的 HCL 描述</p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>bool <span class="token property">mem_write</span> <span class="token punctuation">=</span> icode <span class="token keyword">in</span> <span class="token punctuation">{</span> IRMMOVQ, IPUSHQ, ICALL<span class="token punctuation">}</span>;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>stat</code> 的 HCL 描述</p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>bool <span class="token property">stat</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
  imem_error || dmem_error: SADR;
  !instr_valid: SINS;
  icode <span class="token punctuation">=</span><span class="token punctuation">=</span> IHALT: SHLT;
  <span class="token number">1</span>: SAOK;
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul></div> <div class="custom-block note"><p class="custom-block-title">访存阶段</p> <ul><li><details class="custom-block details"><summary>示意图</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220116135214.png" alt="20220116135214"></p></details></li> <li><p><code>new_pc</code> 的 HCL 描述</p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>word <span class="token property">new_pc</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
  icode <span class="token punctuation">=</span><span class="token punctuation">=</span> ICALL : valC;
  icode <span class="token punctuation">=</span><span class="token punctuation">=</span> IJXX &amp;&amp; Cnd : valC;
  icode <span class="token punctuation">=</span><span class="token punctuation">=</span> IRET: valM;
  <span class="token number">1</span>: valP;
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul></div> <div class="custom-block warning"><p class="custom-block-title">SEQ 小结</p> <ul><li>通过将执行每条不同指令所需的步骤组织成一个统一的流程，就可以用很少量的各种硬件以及一个时钟来控制计算的顺序，从而实现整个处理器</li> <li>SEQ 的时钟必须非常慢，以使信号能在一个周期内传播所有的阶段</li> <li>这种实现方法不能充分的利用硬件
<ul><li>因为每个单元只在整体时钟周期的一部分时间内才被使用</li> <li><div class="custom-block tip"><p class="custom-block-title">引入流水线可以获得更好的性能</p></div></li></ul></li></ul></div> <h2 id="44-流水线的通用原理"><a href="#44-流水线的通用原理" class="header-anchor">#</a> 4.4 流水线的通用原理</h2> <div class="custom-block note"><p class="custom-block-title">流水线化的特点</p> <ul><li>在流水线化的系统中，待执行的任务被划分成了若干个独立的阶段</li> <li>流水线能够提高系统的吞吐量(throughput)</li> <li>流水线会轻微的增加系统的延迟(latency)</li></ul></div> <h3 id="441-计算流水线"><a href="#441-计算流水线" class="header-anchor">#</a> 4.4.1 计算流水线</h3> <div class="custom-block tip"><p class="custom-block-title">吞吐量与延迟</p> <ul><li>电路延迟以皮秒(picosecond, 简写为 ps)，即 <mjx-container jax="SVG" class="MathJax"><svg xmlns="http://www.w3.org/2000/svg" width="5.295ex" height="2.005ex" role="img" focusable="false" viewBox="0 -864 2340.2 886" xmlns:xlink="http://www.w3.org/1999/xlink" style="vertical-align:-0.05ex;"><defs><path id="MJX-1197-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-1197-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-1197-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-1197-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-1197-TEX-N-31"></use><use data-c="30" xlink:href="#MJX-1197-TEX-N-30" transform="translate(500,0)"></use></g><g data-mml-node="TeXAtom" transform="translate(1033,393.1) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><use data-c="2212" xlink:href="#MJX-1197-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(778,0)"><use data-c="31" xlink:href="#MJX-1197-TEX-N-31"></use><use data-c="32" xlink:href="#MJX-1197-TEX-N-32" transform="translate(500,0)"></use></g></g></g></g></g></svg></mjx-container> 秒来计算</li> <li>以每秒千兆条指令(GIPS)为单位来描述吞吐量
<ul><li>即为每秒十亿条(<mjx-container jax="SVG" class="MathJax"><svg xmlns="http://www.w3.org/2000/svg" width="3.25ex" height="2.005ex" role="img" focusable="false" viewBox="0 -864 1436.6 886" xmlns:xlink="http://www.w3.org/1999/xlink" style="vertical-align:-0.05ex;"><defs><path id="MJX-1198-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-1198-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-1198-TEX-N-39" d="M352 287Q304 211 232 211Q154 211 104 270T44 396Q42 412 42 436V444Q42 537 111 606Q171 666 243 666Q245 666 249 666T257 665H261Q273 665 286 663T323 651T370 619T413 560Q456 472 456 334Q456 194 396 97Q361 41 312 10T208 -22Q147 -22 108 7T68 93T121 149Q143 149 158 135T173 96Q173 78 164 65T148 49T135 44L131 43Q131 41 138 37T164 27T206 22H212Q272 22 313 86Q352 142 352 280V287ZM244 248Q292 248 321 297T351 430Q351 508 343 542Q341 552 337 562T323 588T293 615T246 625Q208 625 181 598Q160 576 154 546T147 441Q147 358 152 329T172 282Q197 248 244 248Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-1198-TEX-N-31"></use><use data-c="30" xlink:href="#MJX-1198-TEX-N-30" transform="translate(500,0)"></use></g><g data-mml-node="mn" transform="translate(1033,393.1) scale(0.707)"><use data-c="39" xlink:href="#MJX-1198-TEX-N-39"></use></g></g></g></g></svg></mjx-container>)指令</li></ul></li> <li>从头到尾执行一条指令所需的时间称为延迟</li></ul></div> <div class="custom-block note"><p class="custom-block-title">非流水线化与流水线化的计算硬件</p> <ul><li>非流小线化的计算硬件
<ul><li><details class="custom-block details"><summary>图示</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220117103430.png" alt="20220117103430"></p></details></li></ul></li> <li>流水线化的计算硬件
<ul><li><details class="custom-block details"><summary>图示</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220117103517.png" alt="20220117103517"></p></details></li> <li>在稳定状态下，流水线的每个阶段都应该是活动的
<ul><li>即每个时钟周期，都有一条指令离开系统，并且有一条新的指令进入系统</li></ul></li></ul></li></ul> <div class="custom-block tip"><p class="custom-block-title">流水线能够提高系统的吞吐量，但是代价是增加了一些硬件，以及延迟的增加</p> <ul><li>延迟变大是由于增加的流水线寄存器的时间开销</li></ul></div></div> <h3 id="442-流水线操作的详细说明"><a href="#442-流水线操作的详细说明" class="header-anchor">#</a> 4.4.2 流水线操作的详细说明</h3> <div class="custom-block tip"><p class="custom-block-title">流水线阶段之间的指令转移是由时钟信号来控制的</p> <ul><li><details class="custom-block details"><summary>图示</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220117104215.png" alt="20220117104215"></p></details></li></ul></div> <div class="custom-block note"><p class="custom-block-title">流水线操作的一个时钟周期</p> <ul><li><details class="custom-block details"><summary>图示</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/%E9%A1%B5%E9%9D%A2%E6%8F%90%E5%8F%96%E8%87%AA%EF%BC%8D%E7%AC%AC4%E7%AB%A0%20%E5%A4%84%E7%90%86%E5%99%A8%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%20(3).jpg" alt="页面提取自－第4章 处理器体系结构 (3)"></p></details></li> <li>信号可能以不同的速度通过各个不同的部分</li></ul></div> <div class="custom-block tip"><p class="custom-block-title">在组合逻辑块之间采用时钟寄存器的简单机制，足够控制流水线中的指令流</p> <ul><li>随着时钟周而复始地上升和下降，不同的指令会通过流水线的各个阶段，不会相互干扰</li></ul></div> <h3 id="443-流水线的局限性"><a href="#443-流水线的局限性" class="header-anchor">#</a> 4.4.3 流水线的局限性</h3> <div class="custom-block note"><p class="custom-block-title">不一致的划分</p> <ul><li><details class="custom-block details"><summary>图示</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220117105723.png" alt="20220117105723"></p></details></li> <li>系统的吞吐量和延迟受最慢阶段的速度所限制</li></ul></div> <div class="custom-block tip"><p class="custom-block-title">流水线过深</p> <ul><li><details class="custom-block details"><summary>图示</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220117112127.png" alt="20220117112127"></p></details></li> <li>流水线过深时
<ul><li>寄存器延迟会成为限制流水线吞吐量的一个制约因素</li> <li>系统的延迟也会相应的增加</li></ul></li></ul></div> <h3 id="444-带反馈的流水线系统"><a href="#444-带反馈的流水线系统" class="header-anchor">#</a> 4.4.4 带反馈的流水线系统</h3> <div class="custom-block note"><p class="custom-block-title">传过流水线的对象，可能不是相互独立的</p> <ul><li>相邻的指令之间可能存在着 <strong>数据相关</strong> <ul><li><p>下一条指令会用到当前指令的计算结果</p></li> <li><p>实例</p> <div class="language-nasm line-numbers-mode"><pre class="language-nasm"><code>irmovq <span class="token number">$50</span>, <span class="token operator">%</span><span class="token register variable">rax</span>
addq <span class="token operator">%</span><span class="token register variable">rax</span> , <span class="token operator">%</span><span class="token register variable">rbx</span>
mrmovq <span class="token number">100</span>(<span class="token operator">%</span><span class="token register variable">rbx</span> ), <span class="token operator">%</span><span class="token register variable">rdx</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><details class="custom-block details"><summary>图示</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220117113753.png" alt="20220117113753"></p></details></li></ul></li> <li>由于指令控制流造成的 <strong>控制相关</strong> <ul><li>一条指令会确定下一条指令的位置</li></ul></li></ul></div> <h2 id="45-y86-64-的流水线实现"><a href="#45-y86-64-的流水线实现" class="header-anchor">#</a> 4.5 Y86-64 的流水线实现</h2> <h3 id="451-seq-重新安排计算阶段"><a href="#451-seq-重新安排计算阶段" class="header-anchor">#</a> 4.5.1 SEQ+: 重新安排计算阶段</h3> <div class="custom-block tip"><p class="custom-block-title">改变计算 PC 的位置</p> <ul><li>改进前<a href="#432-seq-%E7%9A%84%E7%A1%AC%E4%BB%B6%E7%BB%93%E6%9E%84">SEQ 的硬件结构</a></li> <li><details class="custom-block details"><summary>改进后的 SEQ+ 硬件结构图示</summary> <ul><li><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/1%20(2).jpg" alt="1"></li></ul></details></li> <li>根据前一个周期产生的控制信号等信息来计算 PC</li> <li>这种对状态单元的改变称为<strong>电路重定时</strong> <ul><li>重定时改变了一个系统的状态表示，但是并不改变它的逻辑行为</li> <li>通常用其来平衡一个流水线系统中各个阶段之间的延迟</li></ul></li></ul></div> <h3 id="452-插入流水线寄存器"><a href="#452-插入流水线寄存器" class="header-anchor">#</a> 4.5.2 插入流水线寄存器</h3> <div class="custom-block note"><p class="custom-block-title">在 SEQ+ 的各个阶段之间插入流水线寄存器</p> <ul><li>每个流水线寄存器可以存放多个字节和字</li> <li>各个流水线寄存器的作用
<ul><li><code>F</code> <ul><li>保存程序计数器的预测值</li></ul></li> <li><code>D</code> <ul><li>位于取指和译码阶段之间</li> <li>保存关于最新取出的指令的信息</li></ul></li> <li><code>E</code> <ul><li>位于译码和执行阶段</li> <li>保存最新的译码指令和从寄存器文件读出的值的信息</li></ul></li> <li><code>M</code> <ul><li>位于执行和访存阶段之间</li> <li>保存最新执行的指令的结果；还保存用于处理条件转移的分支条件和分支目标的信息</li></ul></li> <li><code>W</code> <ul><li>位于访存阶段和反馈路径之间</li></ul></li></ul></li></ul></div> <h6 id="pipe-" class="anchor-user-defined"><a href="#pipe-" class="header-anchor">#</a></h6> <details class="custom-block details"><summary>PIPE- 的硬件结构图示</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20221%20(2).jpg" alt="20221 (2)"></p></details> <details class="custom-block details"><summary>指令通过流水线的示例</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220117120603.png" alt="20220117120603"></p></details> <h3 id="453-对信号进行重新排列和编号"><a href="#453-对信号进行重新排列和编号" class="header-anchor">#</a> 4.5.3 对信号进行重新排列和编号</h3> <div class="custom-block note"><p class="custom-block-title">信号编号规则</p> <ul><li>在流水线化的设计中，与各个指令相关联的值有多个版本，会随着指令一起流过系统</li> <li>存储在流水线寄存器中的信号，通过在信号名前加上大写的流水线寄存器名字作为前缀
<ul><li>如 <code>D_stat</code>、<code>E_stat</code></li></ul></li> <li>在某一个阶段刚计算出来的信号，其命名是在信号名前面加上小写的阶段名第一个字母作为前缀
<ul><li>如 <code>f_stat</code>、<code>m_stat</code></li></ul></li></ul></div> <h6 id="select-a" class="anchor-user-defined"><a href="#select-a" class="header-anchor">#</a></h6> <div class="custom-block tip"><p class="custom-block-title"><code>Select A</code> 块</p> <ul><li>参照 <a href="#pipe-">PIPE- 硬件结构图</a></li> <li>其会从 <code>D_valP</code> 和 <code>d_rvalA</code> 中选择一个信号传送给 <code>E_valA</code> <ul><li>只有 <code>call</code> 在访存阶段和 <code>jxx</code> 指令在执行阶段（当不需要跳转时）需要 <code>valP</code> 的值
<ul><li>而这些指令不需要从寄存器中读出的值</li> <li><code>jxx</code> 指令默认是选择跳转分支，即 <code>valC</code> 的值，参照 <a href="#454-%E9%A2%84%E6%B5%8B%E4%B8%8B%E4%B8%80%E4%B8%AA-pc">4.5.4 预测下一个PC</a></li></ul></li></ul></li> <li>包括这个块是为了减少要传递给寄存器 <code>E</code> 和 <code>M</code> 的状态数量</li></ul></div> <h3 id="454-预测下一个-pc"><a href="#454-预测下一个-pc" class="header-anchor">#</a> 4.5.4 预测下一个 PC</h3> <div class="custom-block warning"><p class="custom-block-title">流水线设计的目的就是每个时钟周期都<b>发射</b>一条新指令</p> <ul><li>因此必须在取出当前指令后，马上确定下一条指令的位置</li> <li>但如果取出的是条件分支指令，则必须要等到条件分支指令通过执行阶段后，才能知道是否要选择分支</li> <li>如果取出的指令是 <code>ret</code>，则要到指令通过访存阶段，才能确定返回地址</li></ul></div> <div class="custom-block tip"><p class="custom-block-title">分支预测</p> <ul><li>猜测分支方向并根据猜测开始取指的技术称为分支预测
<ul><li>有些系统花费了大量的硬件来解决这个问题</li></ul></li> <li>PIPE- 采用总是预测选择了条件分支(always taken)的简单策略
<ul><li>这个策略的成功概率有 60%</li></ul></li> <li>从不选择(never taken, NT)
<ul><li>这个策略成功的概念有 40%</li></ul></li> <li>反向选择，正向不选择(backward taken, forward not-taken)
<ul><li>当分支的地址比下一条指令低时，就选择分支；否则不选择</li> <li>成功率有 65%</li> <li>因为循环往往由后向分支结束，而循环往往要执行很多次</li></ul></li></ul> <div class="custom-block note"><p class="custom-block-title">必须有措施来应对预测错误的情况</p> <ul><li>分支预测错误会极大的降低程序的性能，因此在条件允许时，往往用条件数据传送来替代条件控制转移</li></ul></div></div> <div class="custom-block note"><p class="custom-block-title">返回地址预测</p> <ul><li>PIPE- 中不对返回地址作任何预测，只是简单地暂停处理新指令，直至 <code>ret</code> 指令通过写回阶段</li> <li><div class="custom-block tip"><p class="custom-block-title">使用硬件栈进行返回地址预测</p> <ul><li>因为一般情况下，过程调用和返回是成对出现的，因此可以在取指阶段，用一个硬件栈来储存过程调用指令产生的返回地址</li> <li>当碰到 <code>ret</code> 指令时，就从栈中弹出顶部的值，作为预测的返回地址</li> <li>在预测错误时，必须要有相应的错误恢复机制</li> <li><div class="custom-block note"><p class="custom-block-title">此硬件栈对于程序员来说是不可见的</p></div></li></ul></div></li></ul></div> <h3 id="455-流水线冒险"><a href="#455-流水线冒险" class="header-anchor">#</a> 4.5.5 流水线冒险</h3> <div class="custom-block tip"><p class="custom-block-title">数据相关和控制相关可能会导致流水线出现计算错误，称为冒险(hazard)</p> <ul><li>数据相关和控制相关参照 <a href="#444-%E5%B8%A6%E5%8F%8D%E9%A6%88%E7%9A%84%E6%B5%81%E6%B0%B4%E7%BA%BF%E7%B3%BB%E7%BB%9F">带反馈的流水线系统</a></li> <li>冒险分为数据冒险和控制冒险</li></ul></div> <div class="custom-block note"><p class="custom-block-title">数据冒险</p> <ul><li>如果一个指令的操作数被它前面三条指令中的任意一个改变的话，都会出现数据冒险
<ul><li>相当于当前指令处于译码阶段时，在流水线的执行，访存和写入阶段中的其它指令对当前指令的操作数进行修改</li> <li>此处主要是指寄存器数据冒险</li> <li><details class="custom-block details"><summary>数据冒险示例</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220117150059.png" alt="20220117150059"></p></details></li></ul></li> <li><div class="custom-block tip"><p class="custom-block-title">用暂停来避免数据冒险</p> <ul><li>暂停 (stalling) 是避免冒险的一种常用技术</li> <li>暂停技术就是让一组指令阻塞在它们所处的阶段，而允许其他指令继续通过流水线</li> <li>让一条指令停留在译码阶段，直至修改它源操作数的指令通过了写回阶段，就可以避免数据冒险
<ul><li>还需将其下一条指令阻塞在取指阶段，通过保持 PC 值不变可以做到这一点</li> <li>将指令阻塞在译码阶段，就是在执行阶段插入一个气泡(bubble)
<ul><li>气泡像一个自动产生的 <code>nop</code> 指令 -- 它不会改变寄存器、内存、条件码或程序状态</li></ul></li></ul></li> <li><details class="custom-block details"><summary>示例</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220117150138.png" alt="20220117150138"></p></details></li> <li><div class="custom-block note"><p class="custom-block-title">用暂停获得的性能并不很好，因为这样会导致流水线暂停长达三个周期，会降低整体的吞吐量</p></div></li></ul></div></li> <li><div class="custom-block tip"><p class="custom-block-title">用转发来避免数据冒险</p> <ul><li>与其暂停直到其它指令的写入操作完成，不如简单的将要写的值传到流水线操作数 <code>E</code> 作为源操作数</li> <li>将结果值直接从一个流水线阶段传送到较早阶段的技术称为<strong>数据转发</strong>(data forwarding，或简称转发，有时称旁路(bypassing))
<ul><li>数据转发需要在基本的硬件结构中增加一些额外的数据连接和控制逻辑</li> <li>在写入阶段，访存阶段和执行阶段有对寄存器未进行的写时，均可以使用数据转发</li></ul></li> <li>一共有 5 个不同的转发源 (<code>e_valE</code>, <code>m_valM</code>, <code>M_valE</code>, <code>W_valM</code> 和 <code>W_valE</code>)</li> <li><details class="custom-block details"><summary>实例</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220117153549.png" alt="20220117153549"></p></details></li> <li>译码阶段逻辑能够确定是使用来自寄存器文件的值，还是用转发过来的值
<ul><li>通过 <code>e_dstM</code> , <code>M_dstE</code>，<code>M_dstM</code> 和 <code>W_destE</code>, <code>W_destM</code> 的值与源寄存器 ID <code>srcA</code> 和 <code>srcB</code> 相比较，能够确定是否使用转发的值</li> <li>不过有多个流水线寄存器的值和源 ID 相等时，需要在各外转发源中建立起优先级关系</li> <li>具体参照<a href="#decode-write">译码和写回阶段</a></li></ul></li></ul></div></li> <li><div class="custom-block tip"><p class="custom-block-title">加载/使用数据冒险</p> <ul><li>由于访存要比译码晚两个阶段，当需要从内存中读取数据更新寄存器 <code>%rax</code> 的值，而下一条指令又需要 <code>%rax</code> 的值时，就会出现加载/使用数据冒险</li> <li><details class="custom-block details"><summary>加载/使用冒险示例</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220117155337.png" alt="20220117155337"></p></details></li> <li>将暂停和转发结合起来，可以避免加载/使用数据冒险
<ul><li>这种方法称为加载互锁(load interlock)</li> <li><details class="custom-block details"><summary>用加载互锁来处理加载/使用冒险的实例</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/45678%20(2).jpg" alt="45678 (2)"></p></details></li></ul></li></ul></div></li></ul> <div class="custom-block warning"><p class="custom-block-title">加载互锁和转发技术结合起来足以处理所有可能类型的数据冒险</p> <ul><li>只有加载互锁会降低流水线的吞吐量</li> <li>因此几乎可以实现每个时钟周期发射一条新指令的吞吐目标</li></ul></div></div> <h6 id="pipe" class="anchor-user-defined"><a href="#pipe" class="header-anchor">#</a></h6> <details class="custom-block details"><summary><b>流水线化的最终实现 -- PIPE 的硬件结构</b></summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/233%20(2).jpg" alt="233 (2)"></p></details> <div class="custom-block note"><p class="custom-block-title">控制冒险</p> <ul><li>当处理器无法根据取指阶段的当前指令来确定下一条指令的地址时，就会出现控制冒险</li> <li><div class="custom-block tip"><p class="custom-block-title"><code>ret</code> 指令的处理</p> <ul><li>当 <code>ret</code> 指令经过译码、执行和访存阶段时，流水线应该暂停</li> <li><details class="custom-block details"><summary>示例</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220117161353.png" alt="20220117161353"></p></details></li></ul></div></li></ul> <h6 id="branch-predict-error" class="anchor-user-defined"><a href="#branch-predict-error" class="header-anchor">#</a></h6> <ul><li><div class="custom-block tip"><p class="custom-block-title">分支预测错误的处理</p> <ul><li>跳转代码在执行阶段才能发现分支预测错误，此时已经取出了两条错误指令
<ul><li>但是这两条错误指令还没有到达执行阶段，不会导致程序员可见的状态发生改变</li> <li>只需在下一个周期向译码和执行阶段插入气泡，同时取出跳转指令后面的指令即可</li></ul></li> <li><details class="custom-block details"><summary>示例</summary> <ul><li><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220117162122.png" alt="20220117162122"></li></ul></details></li></ul></div></li></ul></div> <div class="custom-block danger"><p class="custom-block-title">在出现特殊情况时，暂停和往流水线中插入气泡的技术可以动态调整流水线的流程</p></div> <h3 id="456-异常处理"><a href="#456-异常处理" class="header-anchor">#</a> 4.5.6 异常处理</h3> <div class="custom-block note"><p class="custom-block-title">异常处理的细节问题</p> <ul><li><div class="custom-block tip"><p class="custom-block-title">可能同时有多条指令会引起异常</p> <ul><li>基本原则是：由流水线中最深的指令引起的异常，优先级最高</li></ul></div></li> <li><div class="custom-block tip"><p class="custom-block-title">当首先取出一条指令，开始执行时，导致了一个异常，而后来由于分支预测错误，取消了该指令</p> <ul><li><details class="custom-block details"><summary>示例</summary> <ul><li><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220117162711.png" alt="20220117162711"></li></ul></details></li></ul></div></li> <li><div class="custom-block tip"><p class="custom-block-title">流水线化的处理器会在不同的阶段更新系统状态的不同部分，一条指令发生异常后，它后面的指令可能在异常完成之前改变了部分程序员可见的状态</p> <ul><li><details class="custom-block details"><summary>示例</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220117163010.png" alt="20220117163010"></p></details></li></ul></div></li></ul></div> <div class="custom-block tip"><p class="custom-block-title">异常状态以及与指令相关的所有其他信息一起通过流水线的简单原则是处理异常的简单可靠的机制</p> <ul><li>每个流水线寄存器都有一个状态码 <code>stat</code> <ul><li>如果一个指令在其处理的某个阶段发生了异常，就会将这个状态字段设置成指示异常的种类</li> <li>异常状态和该指令的其他信息一起沿着流水线传播，直到它到达写回阶段</li></ul></li> <li>当处于访存或写回阶段中的指令导致异常时，流水线控制逻辑必须禁止更新条件码寄存器或数据内存
<ul><li>除此之外，异常事件不会对流水线中的其他指令流有任何影响，直至异常指令到达最后的流水线阶段</li></ul></li> <li>第一条遇到异常的指令会第一个到达写回阶段，此时程序执行会停止，流水线寄存器 W 中的状态码会被记录为程序状态
<ul><li>如果取出了某条指令，过后又取消了，则所有关于这条指令的异常状态信息也会被取消</li></ul></li></ul></div> <h3 id="457-pipe-各阶段的实现"><a href="#457-pipe-各阶段的实现" class="header-anchor">#</a> 4.5.7 PIPE 各阶段的实现</h3> <div class="custom-block tip"><p class="custom-block-title">PIPE 是使用了转发技术的流水线化的 Y86-64 处理器</p></div> <div class="custom-block note"><p class="custom-block-title">PC 选择和取指阶段</p> <ul><li><details class="custom-block details"><summary>PIPE 的 PC 选择和取指逻辑图</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220117171046.png" alt="20220117171046"></p></details></li> <li><div class="custom-block tip"><p class="custom-block-title">相关信号的 HCL 代码</p> <ul><li><p><code>f_pc</code></p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>word <span class="token property">f_pc</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
<span class="token comment"># Mispredicted branch. Fetch at incremented PC</span>
M_icode <span class="token punctuation">=</span><span class="token punctuation">=</span> IJXX &amp;&amp; !M_Cnd : M_valA;
<span class="token comment"># Completion of RET instruction</span>
W_icode <span class="token punctuation">=</span><span class="token punctuation">=</span> IRET : W_valM;
<span class="token comment"># Default: Use predicted value of PC</span>
<span class="token number">1</span> : F_predPC;
<span class="token punctuation">]</span>;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><code>IJXX</code> 情况下选取参照 <a href="#select-a">Select A块</a></li></ul></li> <li><p><code>f_predPC</code></p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>word <span class="token property">f_predPC</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
  f_icode <span class="token keyword">in</span> <span class="token punctuation">{</span> IJXX, ICALL <span class="token punctuation">}</span> : f_valC;
  <span class="token number">1</span> : f_valP;
<span class="token punctuation">]</span>;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><code>jxx</code> 指令默认选择跳转分支</li></ul></li> <li><p><code>f_stat</code></p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code><span class="token comment"># Determine status code for fetched instruction</span>
word <span class="token property">f_stat</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
  imem_error: SADR;
  !instr_valid : SINS;
  f_icode <span class="token punctuation">=</span><span class="token punctuation">=</span> IHALT : SHLT;
  <span class="token number">1</span> : SAOK;
<span class="token punctuation">]</span>;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul></div></li></ul></div> <h6 id="decode-write" class="anchor-user-defined"><a href="#decode-write" class="header-anchor">#</a></h6> <div class="custom-block note"><p class="custom-block-title">译码和写回阶段</p> <ul><li><details class="custom-block details"><summary>译码和写回阶段逻辑图</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/45622124.jpg" alt="45622124"></p></details></li> <li><details class="custom-block details"><summary>5 个不同的转发源</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220117173838.png" alt="20220117173838"></p> <ul><li>转发源的优先级依次降低
<ul><li>给处于较早流水线阶段中的转发源以较高的优先级</li></ul></li> <li><details class="custom-block details"><summary>优先级示例程序</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220117174427.png" alt="20220117174427"></p></details></li></ul></details></li> <li><div class="custom-block tip"><p class="custom-block-title">相关信号的 HCL 代码</p> <ul><li><p><code>d_valA</code></p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>word <span class="token property">d_valA</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
  D_icode <span class="token keyword">in</span> <span class="token punctuation">{</span> ICALL, IJXX <span class="token punctuation">}</span> : D_valP; <span class="token comment"># Use incremented PC</span>
  d_srcA <span class="token punctuation">=</span><span class="token punctuation">=</span> e_dstE : e_valE; <span class="token comment"># Forward valE from execute</span>
  d_srcA <span class="token punctuation">=</span><span class="token punctuation">=</span> M_dstM : m_valM; <span class="token comment"># Forward valM from memory</span>
  d_srcA <span class="token punctuation">=</span><span class="token punctuation">=</span> M_dstE : M_valE; <span class="token comment"># Forward valE from memory</span>
  d_srcA <span class="token punctuation">=</span><span class="token punctuation">=</span> W_dstM : W_valM; <span class="token comment"># Forward valM from write back</span>
  d_srcA <span class="token punctuation">=</span><span class="token punctuation">=</span> W_dstE : W_valE; <span class="token comment"># Forward valE from write back</span>
  <span class="token number">1</span> : d_rvalA; <span class="token comment"># Use value read from register file</span>
<span class="token punctuation">]</span>;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>次序决定了转发源的优先级以及程序的行为
<ul><li>特别是对于 <code>popq %rsp</code> 这种指令来说</li></ul></li></ul></li> <li><p><code>d_valB</code></p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>word <span class="token property">d_valB</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
  d_srcB <span class="token punctuation">=</span><span class="token punctuation">=</span> e_dstE : e_valE; <span class="token comment"># Forward valE from execute</span>
  d_srcB <span class="token punctuation">=</span><span class="token punctuation">=</span> M_dstM : m_valM; <span class="token comment"># Forward valM from memory</span>
  d_srcB <span class="token punctuation">=</span><span class="token punctuation">=</span> M_dstE : M_valE; <span class="token comment"># Forward valE from memory</span>
  d_srcB <span class="token punctuation">=</span><span class="token punctuation">=</span> W_dstM : W_valM; <span class="token comment"># Forward valM from write back</span>
  d_srcB <span class="token punctuation">=</span><span class="token punctuation">=</span> W_dstE : W_valE; <span class="token comment"># Forward valE from write back</span>
  <span class="token number">1</span> : d_rvalB; <span class="token comment"># Use value read from register file</span>
<span class="token punctuation">]</span>;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul></div></li></ul></div> <div class="custom-block note"><p class="custom-block-title">执行阶段</p> <ul><li><details class="custom-block details"><summary>执行阶段逻辑图</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220117213850.png" alt="20220117213850"></p></details></li> <li><code>SetCC</code> 以 <code>m_stat</code> 和 <code>W_stat</code> 作为输入，来决定是否更新条件码
<ul><li>这些信号用来检查是否有一条导致异常的指令正在通过后面的流水线阶段</li></ul></li></ul></div> <div class="custom-block note"><p class="custom-block-title">访存阶段</p> <ul><li><details class="custom-block details"><summary>图示</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220118063647.png" alt="20220118063647"></p></details></li> <li><p>相关信号的 HCL 代码</p> <ul><li><p><code>f_stat</code></p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code><span class="token comment"># Determine status code for fetched instruction</span>
word <span class="token property">m_stat</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
  dmem_error: SADR;
  <span class="token number">1</span> : M_stat;
<span class="token punctuation">]</span>;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul></li></ul></div> <h3 id="458-流水线控制逻辑"><a href="#458-流水线控制逻辑" class="header-anchor">#</a> 4.5.8 流水线控制逻辑</h3> <div class="custom-block tip"><p class="custom-block-title">4 种特殊的控制情况</p> <ul><li>加载/使用冒险
<ul><li>在从内存中取值的指令和使用该值的指令之间，流水线需要暂停一个周期</li></ul></li> <li>处理 <code>ret</code> <ul><li>流水线需暂停直到 <code>ret</code> 指令到达写回阶段</li></ul></li> <li>预测错误的分支
<ul><li>需要取消错误加载的分支，并从跳转指令后面的那条指令开始执行</li></ul></li> <li>异常
<ul><li>当一条指令导致异常，必须禁止后面的指令更新程序员可见状态，并在异常指令到达写回阶段时，停止执行</li></ul></li></ul></div> <div class="custom-block note"><p class="custom-block-title">特殊情况下所期望的处理</p> <ul><li>只有 <code>mrmovq</code>，<code>popq</code> 指令会从内存中读数据，只有在这种情况下才可能会发生加载/使用冒险
<ul><li>当发现冒险情况时，需保持流水线寄存器 <code>F</code> 和 <code>D</code> 不变，并且在执行阶段插入气泡</li></ul></li> <li>流水线需要暂停 3 个周期，直到 <code>ret</code> 指令完成访存阶段，读出返回地址，进入写回阶段
<ul><li><details class="custom-block details"><summary><code>ret</code> 指令的详细处理过程</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220118070120.png" alt="20220118070120"></p></details></li> <li>无法在取指阶段插入气泡，因此在译码阶段插入气泡，阻止 <code>ret</code> 后面的一条指令继续运行</li></ul></li> <li>分支预测错误的情况参照<a href="#branch-predict-error">控制冒险</a></li> <li>异常处理
<ul><li><details class="custom-block details"><summary>异常处理示例</summary> <ul><li><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220118071219.png" alt="20220118071219"></li> <li>访存阶段出现的错误会禁止执行阶段更新条件码</li> <li>并在访存阶段插入气泡</li></ul></details></li></ul></li></ul></div> <div class="custom-block tip"><p class="custom-block-title">发现特殊控制条件</p> <h6 id="4-64" class="anchor-user-defined"><a href="#4-64" class="header-anchor">#</a></h6> <ul><li><details class="custom-block details"><summary>流水线控制逻辑的检查条件</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220118072428.png" alt="20220118072428"></p></details></li> <li>只需要访存和写回阶段检查异常指令即可</li></ul></div> <div class="custom-block note"><p class="custom-block-title">流水线控制机制</p> <ul><li>每个流水线寄存器有两个控制输入：暂停(stall) 和气泡(bubble)
<ul><li>当暂停信号设为 <code>1</code> 时，会禁止更新状态
<ul><li>使得其可以将指令阻塞在某个流水线阶段中</li></ul></li> <li>当气泡信号设置为 <code>1</code> 时，寄存器状态会设置成某个固定的复位配置(reset configuration)，得到一个等效于 <code>nop</code> 指令的状态</li> <li>将气泡和暂停信号都设为 <code>1</code> 看成是出错</li> <li><details class="custom-block details"><summary>附加的流水线寄存器操作</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220118075011.png" alt="20220118075011"></p></details></li></ul></li> <li>时序方面，流水线寄存器的暂停和气泡控制信号是由组合逻辑块产生的
<ul><li><details class="custom-block details"><summary>流水线控制逻辑的动作</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220118075245.png" alt="20220118075245"></p> <ul><li>此动作需要和 <a href="#4-64">流水线控制逻辑的检查条件</a> 结合起来使用</li></ul></details></li></ul></li></ul></div> <div class="custom-block tip"><p class="custom-block-title">控制条件的组合</p> <ul><li><div class="custom-block note"><p class="custom-block-title">在设计系统时，常见的缺陷是不能同时处理多个特殊情况的情形</p></div></li> <li>可能同时出现的控制条件
<ul><li><details class="custom-block details"><summary>图示</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220118104628.png" alt="20220118104628"></p></details></li> <li><div class="custom-block note"><p class="custom-block-title">组合 <code>A</code> 的处理</p> <ul><li><code>ret</code> 指令位于 <code>jxx</code> 的跳转目标处，同时 <code>jxx</code> 选择不跳转时，会出现此类情况</li> <li><details class="custom-block details"><summary>解决方案图示</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220118104851.png" alt="20220118104851"></p></details></li> <li>简单的组合两种处理情况，即可解决问题。即流水线能正常处理此种组合</li></ul></div></li> <li><div class="custom-block note"><p class="custom-block-title">组合 <code>B</code> 的处理</p> <ul><li>当 <code>ret</code> 前的一条指令从内存中读取数据设置 <code>%rsp</code> 时，会出现这种情况</li> <li><details class="custom-block details"><summary>解决方案图示</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220118105447.png" alt="20220118105447"></p></details></li> <li>简单的组合会出现气泡+暂停的问题，实际处理时应将 <code>ret</code> 指令的动作推迟一个周期</li></ul></div></li></ul></li></ul></div> <div class="custom-block todo_list"><p class="custom-block-title">🔲 待做事项</p> <ul><li>练习题 4.37 答案的具体含义</li></ul></div> <div class="custom-block note"><p class="custom-block-title">控制逻辑的实现</p> <ul><li><details class="custom-block details"><summary>PIPE 流水线控制逻辑图</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220118105743.png" alt="20220118105743"></p></details></li> <li>相关信号的 <code>HCL</code> 代码
<ul><li><p><code>F_stall</code></p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>bool <span class="token property">F_stall</span> <span class="token punctuation">=</span>
  <span class="token comment"># Conditions for a load/use hazard</span>
  E_icode <span class="token keyword">in</span> <span class="token punctuation">{</span> IMRMOVQ, IPOPQ <span class="token punctuation">}</span> &amp;&amp;
  E_dstM <span class="token keyword">in</span> <span class="token punctuation">{</span> d_srcA, d_srcB <span class="token punctuation">}</span> ||
  <span class="token comment"># Stalling at fetch while ret passes through pipeline</span>
  IRET <span class="token keyword">in</span> <span class="token punctuation">{</span> D_icode, E_icode, M_icode <span class="token punctuation">}</span>;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p><code>D_stall</code></p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>bool <span class="token property">D_stall</span> <span class="token punctuation">=</span>
  <span class="token comment"># Conditions for a load/use hazard</span>
  E_icode <span class="token keyword">in</span> <span class="token punctuation">{</span> IMRMOVQ, IPOPQ <span class="token punctuation">}</span> &amp;&amp;
  E_dstM <span class="token keyword">in</span> <span class="token punctuation">{</span> d_srcA, d_srcB <span class="token punctuation">}</span> ||
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p><code>D_bubble</code></p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>bool <span class="token property">D_bubble</span> <span class="token punctuation">=</span>
  <span class="token comment"># Mispredicted branch</span>
  (E_icode <span class="token punctuation">=</span><span class="token punctuation">=</span> IJXX &amp;&amp; !e_Cnd) ||
  <span class="token comment"># Bubbling at fetch while ret passes through pipeline</span>
  <span class="token comment"># but not condition for a load/use hazard</span>
  !(E_icode <span class="token keyword">in</span> <span class="token punctuation">{</span> IMRMOVQ, IPOPQ <span class="token punctuation">}</span> &amp;&amp; E_dstM <span class="token keyword">in</span> <span class="token punctuation">{</span> d_srcA, d_srcB <span class="token punctuation">}</span>) &amp;&amp;
  IRET <span class="token keyword">in</span> <span class="token punctuation">{</span> D_icode, E_icode, M_icode <span class="token punctuation">}</span>;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p><code>E_bubble</code></p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>bool <span class="token property">E_bubble</span> <span class="token punctuation">=</span>
  <span class="token comment"># Mispredicted branch</span>
  (E_icode <span class="token punctuation">=</span><span class="token punctuation">=</span> IJXX &amp;&amp; !e_Cnd) ||
  <span class="token comment"># Load/use hazard</span>
  E_icode <span class="token keyword">in</span> <span class="token punctuation">{</span> IMRMOVQ, IPOPQ <span class="token punctuation">}</span> &amp;&amp; E_dstM <span class="token keyword">in</span> <span class="token punctuation">{</span> d_srcA, d_srcB <span class="token punctuation">}</span>;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p><code>set_cc</code></p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>bool <span class="token property">set_cc</span> <span class="token punctuation">=</span> E_icode <span class="token punctuation">=</span><span class="token punctuation">=</span> IOPQ &amp;&amp;
  <span class="token comment"># State changes only during normal operation</span>
  !m_stat <span class="token keyword">in</span> <span class="token punctuation">{</span> SADR, SINS, SHLT <span class="token punctuation">}</span> &amp;&amp; !W_stat <span class="token keyword">in</span> <span class="token punctuation">{</span> SADR, SINS, SHLT <span class="token punctuation">}</span>;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><code>M_bubble</code></p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>bool <span class="token property">M_bubble</span> <span class="token punctuation">=</span> m_stat <span class="token keyword">in</span> <span class="token punctuation">{</span> SADR, SINS, SHLT <span class="token punctuation">}</span> || W_stat <span class="token keyword">in</span> <span class="token punctuation">{</span> SADR, SINS, SHLT <span class="token punctuation">}</span>;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>W_stall</code></p> <div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code>bool <span class="token property">W_stall</span><span class="token punctuation">=</span> W_stat <span class="token keyword">in</span> <span class="token punctuation">{</span> SADR, SINS, SHLT <span class="token punctuation">}</span>;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul></div> <h3 id="459-性能分析"><a href="#459-性能分析" class="header-anchor">#</a> 4.5.9 性能分析</h3> <div class="custom-block tip"><p class="custom-block-title">所有需要流水线控制逻辑进行特殊处理的条件，都会导致流水线不能实现每个时钟周期发射一条指令的目标</p> <ul><li>可以通过确定往流水线中插入气泡的频率来衡量效率的损失
<ul><li>因为插入气泡会导致未使用的流水线周期</li> <li>暂停往往伴随插入气泡</li></ul></li></ul></div> <div class="custom-block note"><p class="custom-block-title">CPI</p> <ul><li>CPI (Cycles Per Instruction，每指令周期数)
<p><mjx-container jax="SVG" display="true" class="MathJax"><svg xmlns="http://www.w3.org/2000/svg" width="28.348ex" height="5.033ex" role="img" focusable="false" viewBox="0 -1381 12529.6 2224.8" xmlns:xlink="http://www.w3.org/1999/xlink" style="vertical-align:-1.909ex;"><defs><path id="MJX-1199-TEX-I-1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path><path id="MJX-1199-TEX-I-1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path><path id="MJX-1199-TEX-I-1D43C" d="M43 1Q26 1 26 10Q26 12 29 24Q34 43 39 45Q42 46 54 46H60Q120 46 136 53Q137 53 138 54Q143 56 149 77T198 273Q210 318 216 344Q286 624 286 626Q284 630 284 631Q274 637 213 637H193Q184 643 189 662Q193 677 195 680T209 683H213Q285 681 359 681Q481 681 487 683H497Q504 676 504 672T501 655T494 639Q491 637 471 637Q440 637 407 634Q393 631 388 623Q381 609 337 432Q326 385 315 341Q245 65 245 59Q245 52 255 50T307 46H339Q345 38 345 37T342 19Q338 6 332 0H316Q279 2 179 2Q143 2 113 2T65 2T43 1Z"></path><path id="MJX-1199-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-1199-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path><path id="MJX-1199-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-1199-TEX-I-1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path><path id="MJX-1199-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-1199-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-1199-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D436" xlink:href="#MJX-1199-TEX-I-1D436"></use></g><g data-mml-node="mi" transform="translate(760,0)"><use data-c="1D443" xlink:href="#MJX-1199-TEX-I-1D443"></use></g><g data-mml-node="mi" transform="translate(1511,0)"><use data-c="1D43C" xlink:href="#MJX-1199-TEX-I-1D43C"></use></g><g data-mml-node="mo" transform="translate(2292.8,0)"><use data-c="3D" xlink:href="#MJX-1199-TEX-N-3D"></use></g><g data-mml-node="mfrac" transform="translate(3348.6,0)"><g data-mml-node="mrow" transform="translate(220,676)"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D436" xlink:href="#MJX-1199-TEX-I-1D436"></use></g><g data-mml-node="mi" transform="translate(748,-150) scale(0.707)"><use data-c="1D456" xlink:href="#MJX-1199-TEX-I-1D456"></use></g></g><g data-mml-node="mo" transform="translate(1264.2,0)"><use data-c="2B" xlink:href="#MJX-1199-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(2264.4,0)"><g data-mml-node="mi"><use data-c="1D436" xlink:href="#MJX-1199-TEX-I-1D436"></use></g><g data-mml-node="mi" transform="translate(748,-150) scale(0.707)"><use data-c="1D44F" xlink:href="#MJX-1199-TEX-I-1D44F"></use></g></g></g><g data-mml-node="msub" transform="translate(1381.9,-686)"><g data-mml-node="mi"><use data-c="1D436" xlink:href="#MJX-1199-TEX-I-1D436"></use></g><g data-mml-node="mi" transform="translate(748,-150) scale(0.707)"><use data-c="1D456" xlink:href="#MJX-1199-TEX-I-1D456"></use></g></g><rect width="3565.7" height="60" x="120" y="220"></rect></g><g data-mml-node="mo" transform="translate(7432.1,0)"><use data-c="3D" xlink:href="#MJX-1199-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(8487.9,0)"><use data-c="31" xlink:href="#MJX-1199-TEX-N-31"></use><use data-c="2E" xlink:href="#MJX-1199-TEX-N-2E" transform="translate(500,0)"></use><use data-c="30" xlink:href="#MJX-1199-TEX-N-30" transform="translate(778,0)"></use></g><g data-mml-node="mo" transform="translate(9988.1,0)"><use data-c="2B" xlink:href="#MJX-1199-TEX-N-2B"></use></g><g data-mml-node="mfrac" transform="translate(10988.3,0)"><g data-mml-node="msub" transform="translate(220,676)"><g data-mml-node="mi"><use data-c="1D436" xlink:href="#MJX-1199-TEX-I-1D436"></use></g><g data-mml-node="mi" transform="translate(748,-150) scale(0.707)"><use data-c="1D44F" xlink:href="#MJX-1199-TEX-I-1D44F"></use></g></g><g data-mml-node="msub" transform="translate(249.7,-686)"><g data-mml-node="mi"><use data-c="1D436" xlink:href="#MJX-1199-TEX-I-1D436"></use></g><g data-mml-node="mi" transform="translate(748,-150) scale(0.707)"><use data-c="1D456" xlink:href="#MJX-1199-TEX-I-1D456"></use></g></g><rect width="1301.3" height="60" x="120" y="220"></rect></g></g></g></svg></mjx-container></p> <ul><li>一个时间段内共处理了 <mjx-container jax="SVG" class="MathJax"><svg xmlns="http://www.w3.org/2000/svg" width="2.357ex" height="1.952ex" role="img" focusable="false" viewBox="0 -705 1042 862.8" xmlns:xlink="http://www.w3.org/1999/xlink" style="vertical-align:-0.357ex;"><defs><path id="MJX-1200-TEX-I-1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path><path id="MJX-1200-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D436" xlink:href="#MJX-1200-TEX-I-1D436"></use></g><g data-mml-node="mi" transform="translate(748,-150) scale(0.707)"><use data-c="1D456" xlink:href="#MJX-1200-TEX-I-1D456"></use></g></g></g></g></svg></mjx-container> 条指令和 <mjx-container jax="SVG" class="MathJax"><svg xmlns="http://www.w3.org/2000/svg" width="2.492ex" height="1.952ex" role="img" focusable="false" viewBox="0 -705 1101.3 862.8" xmlns:xlink="http://www.w3.org/1999/xlink" style="vertical-align:-0.357ex;"><defs><path id="MJX-1201-TEX-I-1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path><path id="MJX-1201-TEX-I-1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D436" xlink:href="#MJX-1201-TEX-I-1D436"></use></g><g data-mml-node="mi" transform="translate(748,-150) scale(0.707)"><use data-c="1D44F" xlink:href="#MJX-1201-TEX-I-1D44F"></use></g></g></g></g></svg></mjx-container> 条气泡</li></ul></li> <li><details class="custom-block details"><summary>各种处罚汇总表</summary> <p><img src="https://raw.githubusercontent.com/sbwcwso/PicBed/master/20220118114533.png" alt="20220118114533"></p></details></li> <li>条件转移指令非常常见，为了进一步降低 CPI，需要提升分支预测的成功概率</li></ul></div> <h3 id="4510-未完成的工作"><a href="#4510-未完成的工作" class="header-anchor">#</a> 4.5.10 未完成的工作</h3> <div class="custom-block tip"><p class="custom-block-title">多周期指令</p> <ul><li>更为复杂的指令需要多个周期才能完成</li> <li>一般采用独立于主流水线的特殊硬件功能单元来处理较为复杂的操作
<ul><li>一条指令在译码阶段，可以被发射到特殊单元，处理器会继续处理其它指令</li> <li>但不同单元的操作必须同步，以避免出错</li></ul></li></ul></div> <div class="custom-block note"><p class="custom-block-title">与储存系统的接口</p></div></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/sbwcwso/sbwcwso.github.io/edit/master/docs/01.基础知识/12.CSAPP/01.书本阅读/04.第 4 章 处理器体系结构.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=csapp" title="标签">#csapp</a></div> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/306a79/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">第 3 章 程序的机器级表示</div></a> <a href="/pages/ac0011/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">第 5 章 优化程序性能</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/306a79/" class="prev">第 3 章 程序的机器级表示</a></span> <span class="next"><a href="/pages/ac0011/">第 5 章 优化程序性能</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/01.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/27.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/02.MIT6_S081%E7%BF%BB%E8%AF%91%5B%E6%90%AC%E8%BF%90%5D/"><div>MIT6_S081翻译[搬运]</div></a> <span>10-05</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/a5ff04/"><div>SUMMARY</div></a> <span>10-05</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/a0b5b4/"><div>1.1 课程内容简介</div></a> <span>10-05</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/sbwcwso" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2023
    <span>lijunjie9502| <a href="https://github.com/sbwcwso/note/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.095f6a1f.js" defer></script><script src="/assets/js/2.6bb19404.js" defer></script><script src="/assets/js/3.6d4bd9fe.js" defer></script><script src="/assets/js/98.7925b0c9.js" defer></script>
  </body>
</html>